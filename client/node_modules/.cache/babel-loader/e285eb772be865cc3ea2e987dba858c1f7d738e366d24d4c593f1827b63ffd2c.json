{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan\\\\Desktop\\\\henkes-stoffzauber\\\\henkes-stoffzauber-projekt\\\\client\\\\src\\\\AdminDashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\n// client/src/components/AdminDashboard.js\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { LogOut, Edit, Trash2, PlusCircle, CheckCircle, XCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3001/api';\nconst BACKEND_URL = 'http://localhost:3001';\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/100x100/CCCCCC/333333?text=N/A\";\n\n// --- Hilfsfunktionen für Admin-Operationen ---\n\n/**\r\n * Ruft den Admin-Authentifizierungstoken aus dem localStorage ab.\r\n * @returns {object} Objekt mit Headern oder Fehlermeldung.\r\n */\nconst getAuthHeaders = () => {\n  const adminToken = localStorage.getItem('adminToken');\n  if (!adminToken) {\n    return {\n      error: 'Admin-Sitzung abgelaufen oder nicht gefunden.'\n    };\n  }\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${adminToken}`\n  };\n};\n\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n */\nconst getImageUrl = imagePath => {\n  if (imagePath && imagePath.startsWith('/uploads/')) {\n    return `${BACKEND_URL}${imagePath}`;\n  }\n  return imagePath || FALLBACK_IMAGE_URL;\n};\n\n// =========================================================================\n// BEGINN: EINGEBETTETER CODE VON ProductForm\n// =========================================================================\n\nconst getInitialState = productToEdit => productToEdit || {\n  name: '',\n  description: '',\n  price: 0,\n  stock: 0,\n  isFeatured: false,\n  imageFile: null,\n  imageUrl: '',\n  fabricId: ''\n};\n\n// --- Komponente: Produktformular (ProductForm) ---\nconst ProductForm = ({\n  productToEdit,\n  onSubmit,\n  onCancel,\n  fabrics\n}) => {\n  _s();\n  // useMemo stellt sicher, dass initialState nur neu berechnet wird, wenn sich productToEdit ändert\n  const initialState = useMemo(() => getInitialState(productToEdit), [productToEdit]);\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!productToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    // Setzt das Formular zurück, wenn ein neues Produkt geladen wird\n    setFormData(initialState);\n    setIsEditing(!!productToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, productToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : type === 'number' ? parseFloat(value) : value\n    }));\n  };\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    setFormData(prev => ({\n      ...prev,\n      imageFile: file,\n      // Wenn eine Datei ausgewählt wird, generiere eine lokale Vorschau-URL\n      // Die alte imageUrl (vom Server) wird durch die neue lokale Vorschau überschrieben\n      imageUrl: ''\n    }));\n    setPreviewImage(file ? URL.createObjectURL(file) : formData.imageUrl || null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Erstellen eines FormData-Objekts für den Dateiupload\n    const data = new FormData();\n\n    // Hinzufügen aller Formularfelder\n    Object.keys(formData).forEach(key => {\n      if (key !== 'imageFile' && formData[key] !== null && formData[key] !== undefined) {\n        // Konvertiere boolesche Werte in Strings, da FormData sie nicht direkt als Bool speichert\n        data.append(key, typeof formData[key] === 'boolean' ? formData[key].toString() : formData[key]);\n      }\n    });\n\n    // Hinzufügen der Bilddatei, falls vorhanden\n    if (formData.imageFile) {\n      data.append('imageFile', formData.imageFile);\n    } else if (isEditing && formData.imageUrl) {\n      // Wenn wir bearbeiten und es ein Bild vom Server gibt, aber keine neue Datei hochgeladen wird,\n      // fügen wir die URL als Platzhalter hinzu, damit das Backend weiß, dass das Bild beibehalten werden soll.\n      // Dies ist eine spezifische Backend-Konvention.\n      data.append('imageUrl', formData.imageUrl);\n    }\n\n    // Der onSubmit-Handler des Dashboards kümmert sich um die API-Anfrage\n    onSubmit(data, isEditing);\n  };\n\n  // Definiert die endgültige URL für die Bildvorschau\n  const getFinalPreviewUrl = () => {\n    if (formData.imageFile && previewImage) {\n      return previewImage; // Lokale Vorschau\n    }\n    if (formData.imageUrl) {\n      return getImageUrl(formData.imageUrl); // Server-Bild\n    }\n    return FALLBACK_IMAGE_URL; // Fallback\n  };\n  const relevantFabrics = useMemo(() => fabrics || [], [fabrics]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"admin-form-title\",\n      children: isEditing ? 'Produkt bearbeiten' : 'Neues Produkt erstellen'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: \"Produktname:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Beschreibung:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        rows: \"4\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          children: \"Preis (\\u20AC):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"price\",\n          name: \"price\",\n          value: formData.price,\n          onChange: handleChange,\n          min: \"0\",\n          step: \"0.01\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"stock\",\n          children: \"Bestand (St\\xFCck):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"stock\",\n          name: \"stock\",\n          value: formData.stock,\n          onChange: handleChange,\n          min: \"0\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricId\",\n        children: \"Zugeh\\xF6riger Stoff (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"fabricId\",\n        name: \"fabricId\",\n        value: formData.fabricId || '',\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Keinen Stoff zuordnen --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), relevantFabrics.map(fabric => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: fabric._id,\n          children: [fabric.name, \" (\", fabric.fabricType, \")\"]\n        }, fabric._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n        style: {\n          color: '#666',\n          marginTop: '5px',\n          display: 'block'\n        },\n        children: \"W\\xE4hlen Sie den Stoff aus, zu dem dieses Produkt (z.B. N\\xE4hzubeh\\xF6r, fertige Ware) geh\\xF6rt.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageFile\",\n        children: \"Produktbild (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"imageFile\",\n        name: \"imageFile\",\n        accept: \"image/*\",\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }, this), (previewImage || formData.imageUrl) && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getFinalPreviewUrl(),\n          alt: \"Vorschau\",\n          style: {\n            maxWidth: '100px',\n            maxHeight: '100px',\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"isFeatured\",\n        name: \"isFeatured\",\n        checked: formData.isFeatured,\n        onChange: handleChange,\n        style: {\n          width: '20px',\n          height: '20px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"isFeatured\",\n        style: {\n          margin: 0,\n          fontWeight: 'normal',\n          cursor: 'pointer'\n        },\n        children: \"Als \\\"Featured Product\\\" auf der Startseite anzeigen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        children: isEditing ? 'Änderungen speichern' : 'Produkt erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen (Zur\\xFCck zur Erstellung)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n};\n\n// =========================================================================\n// ENDE: EINGEBETTETER CODE VON ProductForm\n// =========================================================================\n\n// =========================================================================\n// BEGINN: EINGEBETTETER CODE VON AdminProductList\n// =========================================================================\n_s(ProductForm, \"Tqr/IoKZoT3FEawkiIaN1CcP9Vs=\");\n_c = ProductForm;\nconst AdminProductList = ({\n  products,\n  onEdit,\n  onDelete,\n  fabrics\n}) => {\n  _s2();\n  const fabricMap = useMemo(() => {\n    return (fabrics || []).reduce((acc, fabric) => {\n      acc[fabric._id] = fabric.name;\n      return acc;\n    }, {});\n  }, [fabrics]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-list-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"admin-form-title\",\n      children: [\"Verf\\xFCgbare Produkte (\", products.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: '600px',\n        overflowY: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '80px'\n              },\n              children: \"Bild\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Stoff (ID)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '100px'\n              },\n              children: \"Bestand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '100px'\n              },\n              children: \"Preis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '100px'\n              },\n              children: \"Aktionen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: products.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: getImageUrl(product.imageUrl),\n                alt: product.name,\n                style: {\n                  width: '50px',\n                  height: '50px',\n                  objectFit: 'cover',\n                  borderRadius: '4px'\n                },\n                onError: e => {\n                  e.target.onerror = null;\n                  e.target.src = FALLBACK_IMAGE_URL;\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 'bold'\n                },\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                style: {\n                  color: '#666'\n                },\n                children: [\"ID: \", product._id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: product.fabricId ? /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  backgroundColor: 'var(--farbe-akzent)',\n                  color: 'white',\n                  padding: '2px 6px',\n                  borderRadius: '4px',\n                  fontSize: '0.75em'\n                },\n                children: fabricMap[product.fabricId] || 'Unbekannt'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#999',\n                  fontSize: '0.85em'\n                },\n                children: \"- Keine -\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: product.stock > 0 ? 'var(--farbe-grün)' : 'var(--farbe-rot)',\n                  fontWeight: 'bold'\n                },\n                children: product.stock\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [product.price.toFixed(2), \" \\u20AC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '5px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onEdit(product),\n                  className: \"admin-icon-button\",\n                  title: \"Bearbeiten\",\n                  children: /*#__PURE__*/_jsxDEV(Edit, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onDelete(product._id, product.name),\n                  className: \"admin-icon-button delete-button\",\n                  title: \"L\\xF6schen\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 33\n            }, this)]\n          }, product._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 286,\n    columnNumber: 9\n  }, this);\n};\n\n// =========================================================================\n// ENDE: EINGEBETTETER CODE VON AdminProductList\n// =========================================================================\n\n// =========================================================================\n// BEGINN: EINGEBETTETER CODE VON FabricForm\n// =========================================================================\n\n// Liste der möglichen Verwendungszwecke (zum Checkbox-Rendern)\n_s2(AdminProductList, \"/nqj/tke2pXH5IvoC9hpAureges=\");\n_c2 = AdminProductList;\nconst USAGE_OPTIONS = ['Mütze (Außen)', 'Mütze (Innen)', 'Bündchen', 'Bekleidung (Oberteil)', 'Bekleidung (Hose)', 'Babybekleidung', 'Deko', 'Taschen', 'Accessoires'];\n\n// Liste der Stoffarten\nconst FABRIC_TYPES = ['Jersey', 'French Terry (Sommersweat)', 'Sweat', 'Bündchenstoff', 'Musselin', 'Webware Baumwolle', 'Cord', 'Fleece', 'Softshell', 'Leder (Imitat/Echt)'];\nconst getFabricInitialState = stoffToEdit => stoffToEdit || {\n  name: '',\n  description: '',\n  fabricType: '',\n  suitableFor: [],\n  stock: 0,\n  imageUrl: '',\n  imageFile: null\n};\nconst FabricForm = ({\n  stoffToEdit,\n  onAdd,\n  onCancel\n}) => {\n  _s3();\n  const initialState = useMemo(() => getFabricInitialState(stoffToEdit), [stoffToEdit]);\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!stoffToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    setFormData(initialState);\n    setIsEditing(!!stoffToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, stoffToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    if (name === 'suitableFor') {\n      // Spezielle Behandlung für Checkboxen-Array\n      setFormData(prev => {\n        const updatedSuitableFor = checked ? [...prev.suitableFor, value] : prev.suitableFor.filter(v => v !== value);\n        return {\n          ...prev,\n          suitableFor: updatedSuitableFor\n        };\n      });\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'number' ? parseFloat(value) : value\n      }));\n    }\n  };\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    setFormData(prev => ({\n      ...prev,\n      imageFile: file,\n      imageUrl: ''\n    }));\n    setPreviewImage(file ? URL.createObjectURL(file) : formData.imageUrl || null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const data = new FormData();\n    Object.keys(formData).forEach(key => {\n      if (key === 'suitableFor') {\n        // Konvertiere Array in JSON-String, damit FormData es übertragen kann\n        data.append(key, JSON.stringify(formData[key]));\n      } else if (key !== 'imageFile' && formData[key] !== null && formData[key] !== undefined) {\n        data.append(key, formData[key]);\n      }\n    });\n    if (formData.imageFile) {\n      data.append('imageFile', formData.imageFile);\n    } else if (isEditing && formData.imageUrl) {\n      data.append('imageUrl', formData.imageUrl);\n    }\n\n    // Ruft den onAdd-Handler des Dashboards auf\n    onAdd(data, isEditing);\n  };\n  const getFinalPreviewUrl = () => {\n    if (formData.imageFile && previewImage) {\n      return previewImage;\n    }\n    if (formData.imageUrl) {\n      return getImageUrl(formData.imageUrl);\n    }\n    return FALLBACK_IMAGE_URL;\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"admin-form-title\",\n      children: isEditing ? 'Stoff bearbeiten' : 'Neuen Stoff hinzufügen'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: \"Stoffname/Muster:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          name: \"name\",\n          value: formData.name,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fabricType\",\n          children: \"Stoffart:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"fabricType\",\n          name: \"fabricType\",\n          value: formData.fabricType,\n          onChange: handleChange,\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Bitte w\\xE4hlen --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 25\n          }, this), FABRIC_TYPES.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: type,\n            children: type\n          }, type, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Beschreibung:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        rows: \"2\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"stock\",\n        children: \"Bestand (Meter):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"stock\",\n        name: \"stock\",\n        value: formData.stock,\n        onChange: handleChange,\n        min: \"0\",\n        step: \"0.01\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n        style: {\n          color: '#666',\n          marginTop: '5px',\n          display: 'block'\n        },\n        children: \"Geben Sie den verf\\xFCgbaren Bestand in Metern an (z.B. 10.5 f\\xFCr 10 Meter und 50 cm).\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Geeignet f\\xFCr (Verwendungszwecke):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexWrap: 'wrap',\n          gap: '10px',\n          backgroundColor: 'var(--farbe-hintergrund)',\n          padding: '10px',\n          borderRadius: '5px'\n        },\n        children: USAGE_OPTIONS.map(usage => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: `usage-${usage}`,\n            name: \"suitableFor\",\n            value: usage,\n            checked: formData.suitableFor.includes(usage),\n            onChange: handleChange,\n            style: {\n              width: '15px',\n              height: '15px',\n              cursor: 'pointer'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `usage-${usage}`,\n            style: {\n              margin: 0,\n              fontWeight: 'normal',\n              cursor: 'pointer',\n              fontSize: '0.9em'\n            },\n            children: usage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 29\n          }, this)]\n        }, usage, true, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageFile\",\n        children: \"Stoffmuster Bild (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"imageFile\",\n        name: \"imageFile\",\n        accept: \"image/*\",\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getFinalPreviewUrl(),\n          alt: \"Vorschau\",\n          style: {\n            maxWidth: '100px',\n            maxHeight: '100px',\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        children: isEditing ? 'Änderungen speichern' : 'Stoff erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen (Zur\\xFCck zur Erstellung)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 469,\n    columnNumber: 9\n  }, this);\n};\n\n// =========================================================================\n// ENDE: EINGEBETTETER CODE VON FabricForm\n// =========================================================================\n\n// =========================================================================\n// BEGINN: EINGEBETTETER CODE VON AdminFabricList\n// =========================================================================\n_s3(FabricForm, \"wGOTUVtITCs2ajUBJK3xxSyGbCY=\");\n_c3 = FabricForm;\nconst AdminFabricList = ({\n  fabrics,\n  onDelete\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-list-card\",\n    style: {\n      marginTop: '30px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"admin-form-title\",\n      children: [\"Verf\\xFCgbare Stoffe (\", fabrics.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: '400px',\n        overflowY: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '80px'\n              },\n              children: \"Bild\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '100px'\n              },\n              children: \"Stoffart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '100px'\n              },\n              children: \"Bestand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                width: '100px'\n              },\n              children: \"Aktionen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: fabrics.map(fabric => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: getImageUrl(fabric.imageUrl),\n                alt: fabric.name,\n                style: {\n                  width: '50px',\n                  height: '50px',\n                  objectFit: 'cover',\n                  borderRadius: '4px'\n                },\n                onError: e => {\n                  e.target.onerror = null;\n                  e.target.src = FALLBACK_IMAGE_URL;\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 636,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 'bold'\n                },\n                children: fabric.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                style: {\n                  color: '#666'\n                },\n                children: [\"ID: \", fabric._id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: fabric.fabricType\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: fabric.stock > 0 ? 'var(--farbe-grün)' : 'var(--farbe-rot)',\n                  fontWeight: 'bold'\n                },\n                children: [fabric.stock.toFixed(2), \" m\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '5px'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onDelete(fabric._id, fabric.name),\n                  className: \"admin-icon-button delete-button\",\n                  title: \"L\\xF6schen\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 662,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 657,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 33\n            }, this)]\n          }, fabric._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 619,\n    columnNumber: 9\n  }, this);\n};\n\n// =========================================================================\n// ENDE: EINGEBETTETER CODE VON AdminFabricList\n// =========================================================================\n\n// --- Hauptkomponente: AdminDashboard ---\n_c4 = AdminFabricList;\nconst AdminDashboard = () => {\n  _s4();\n  const navigate = useNavigate();\n  const [products, setProducts] = useState([]);\n  const [fabrics, setFabrics] = useState([]);\n  const [currentProduct, setCurrentProduct] = useState(null);\n  const [statusMessage, setStatusMessage] = useState({\n    message: '',\n    type: ''\n  }); // type: 'success' | 'error'\n\n  const handleLogout = useCallback(() => {\n    localStorage.removeItem('adminToken');\n    navigate('/admin'); // Leitet zur Login-Seite weiter (wird dort automatisch durch AdminProtectedRoute geprüft)\n  }, [navigate]);\n\n  // Lade Produkte und Stoffe beim Start\n  const fetchAllData = useCallback(async () => {\n    const headers = getAuthHeaders();\n    if (headers.error) {\n      setStatusMessage({\n        message: headers.error,\n        type: 'error'\n      });\n      handleLogout();\n      return;\n    }\n    try {\n      // 1. Produkte laden\n      const productsResponse = await fetch(`${API_URL}/products`, {\n        headers\n      });\n      const productsData = await productsResponse.json();\n      if (productsResponse.ok) {\n        setProducts(productsData);\n      } else {\n        throw new Error(productsData.message || 'Fehler beim Laden der Produkte.');\n      }\n\n      // 2. Stoffe laden\n      const fabricsResponse = await fetch(`${API_URL}/fabrics`, {\n        headers\n      });\n      const fabricsData = await fabricsResponse.json();\n      if (fabricsResponse.ok) {\n        setFabrics(fabricsData);\n      } else {\n        throw new Error(fabricsData.message || 'Fehler beim Laden der Stoffe.');\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Laden der Admin-Daten:\", error);\n      setStatusMessage({\n        message: `Fehler: ${error.message}`,\n        type: 'error'\n      });\n    }\n  }, [handleLogout]);\n  useEffect(() => {\n    fetchAllData();\n  }, [fetchAllData]);\n  const showStatus = (message, type = 'success') => {\n    setStatusMessage({\n      message,\n      type\n    });\n    setTimeout(() => setStatusMessage({\n      message: '',\n      type: ''\n    }), 5000);\n  };\n\n  // --- Produkt-Operationen ---\n\n  const handleProductSubmit = async (formData, isEditing) => {\n    const headers = getAuthHeaders();\n    if (headers.error) {\n      showStatus(headers.error, 'error');\n      handleLogout();\n      return;\n    }\n    const method = isEditing ? 'PUT' : 'POST';\n    const url = isEditing ? `${API_URL}/products/${currentProduct._id}` : `${API_URL}/products`;\n\n    // Bei FormData-Objekten muss der Header 'Content-Type': 'application/json' entfernt werden.\n    // Das Browser setzt 'Content-Type': 'multipart/form-data' automatisch korrekt.\n    const productHeaders = {\n      'Authorization': headers['Authorization']\n    };\n    try {\n      const response = await fetch(url, {\n        method: method,\n        headers: productHeaders,\n        body: formData\n      });\n      const result = await response.json();\n      if (response.ok) {\n        showStatus(`Produkt erfolgreich ${isEditing ? 'aktualisiert' : 'erstellt'}!`, 'success');\n        setCurrentProduct(null); // Formular zurücksetzen\n        fetchAllData(); // Daten neu laden\n      } else {\n        throw new Error(result.message || `Fehler bei der ${isEditing ? 'Aktualisierung' : 'Erstellung'} des Produkts.`);\n      }\n    } catch (error) {\n      console.error(\"Fehler bei Produkt-Operation:\", error);\n      showStatus(`Fehler: ${error.message}`, 'error');\n    }\n  };\n  const handleEdit = product => {\n    setCurrentProduct(product);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n  const handleCancelEdit = () => {\n    setCurrentProduct(null);\n  };\n  const handleDelete = async (productId, productName) => {\n    if (!window.confirm(`Soll das Produkt \"${productName}\" wirklich gelöscht werden?`)) {\n      return;\n    }\n    const headers = getAuthHeaders();\n    if (headers.error) {\n      showStatus(headers.error, 'error');\n      handleLogout();\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/products/${productId}`, {\n        method: 'DELETE',\n        headers: headers\n      });\n      if (response.ok) {\n        showStatus(`Produkt \"${productName}\" erfolgreich gelöscht!`, 'success');\n        fetchAllData();\n      } else {\n        const result = await response.json();\n        throw new Error(result.message || 'Fehler beim Löschen des Produkts.');\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Löschen:\", error);\n      showStatus(`Fehler: ${error.message}`, 'error');\n    }\n  };\n\n  // --- Stoff-Operationen ---\n\n  const handleAddFabric = async formData => {\n    const headers = getAuthHeaders();\n    if (headers.error) {\n      showStatus(headers.error, 'error');\n      handleLogout();\n      return;\n    }\n\n    // POST ist die einzige unterstützte Methode für FabricForm in diesem Dashboard\n    const url = `${API_URL}/fabrics`;\n\n    // Bei FormData-Objekten muss der Header 'Content-Type': 'application/json' entfernt werden.\n    const fabricHeaders = {\n      'Authorization': headers['Authorization']\n    };\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: fabricHeaders,\n        body: formData\n      });\n      const result = await response.json();\n      if (response.ok) {\n        showStatus(`Stoff \"${result.name}\" erfolgreich erstellt!`, 'success');\n        fetchAllData(); // Daten neu laden\n      } else {\n        throw new Error(result.message || 'Fehler bei der Erstellung des Stoffs.');\n      }\n    } catch (error) {\n      console.error(\"Fehler bei Stoff-Operation:\", error);\n      showStatus(`Fehler: ${error.message}`, 'error');\n    }\n  };\n  const handleDeleteFabric = async (fabricId, fabricName) => {\n    if (!window.confirm(`Soll der Stoff \"${fabricName}\" wirklich gelöscht werden? Achtung: Alle zugeordneten Produkte bleiben bestehen, verlieren aber die Verknüpfung!`)) {\n      return;\n    }\n    const headers = getAuthHeaders();\n    if (headers.error) {\n      showStatus(headers.error, 'error');\n      handleLogout();\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/fabrics/${fabricId}`, {\n        method: 'DELETE',\n        headers: headers\n      });\n      if (response.ok) {\n        showStatus(`Stoff \"${fabricName}\" erfolgreich gelöscht!`, 'success');\n        fetchAllData();\n      } else {\n        const result = await response.json();\n        throw new Error(result.message || 'Fehler beim Löschen des Stoffs.');\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Löschen des Stoffs:\", error);\n      showStatus(`Fehler: ${error.message}`, 'error');\n    }\n  };\n\n  // --- Rendern der Hauptkomponente ---\n\n  const statusStyle = {\n    padding: '10px 20px',\n    borderRadius: '8px',\n    fontWeight: 'bold',\n    marginBottom: '20px',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px',\n    color: 'white',\n    backgroundColor: statusMessage.type === 'success' ? 'var(--farbe-grün)' : 'var(--farbe-rot)'\n  };\n\n  // Allgemeine Styles, die im CSS-Teil der App definiert sein sollten, hier als Fallback inline\n  const dashboardStyles = {\n    padding: '40px 50px',\n    maxWidth: '1400px',\n    margin: '0 auto'\n  };\n  const adminHeaderStyles = {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '30px',\n    borderBottom: '2px solid var(--farbe-grau)',\n    paddingBottom: '20px'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: dashboardStyles,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: adminHeaderStyles,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'var(--farbe-primär)',\n          fontSize: '2em',\n          margin: 0\n        },\n        children: \"Admin Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 924,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"admin-logout-button\",\n        style: {\n          backgroundColor: 'var(--farbe-rot)',\n          color: 'white',\n          padding: '8px 15px',\n          borderRadius: '6px',\n          border: 'none',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '5px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(LogOut, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 21\n        }, this), \"Logout\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 927,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 923,\n      columnNumber: 13\n    }, this), statusMessage.message && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: statusStyle,\n      children: [statusMessage.type === 'success' ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 950,\n        columnNumber: 57\n      }, this) : /*#__PURE__*/_jsxDEV(XCircle, {\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 950,\n        columnNumber: 85\n      }, this), statusMessage.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 949,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: 'var(--farbe-primär)',\n        marginBottom: '30px',\n        fontSize: '1.8em'\n      },\n      children: \"Produkt-Verwaltung\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 956,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1.5fr',\n        gap: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(ProductForm, {\n          productToEdit: currentProduct,\n          onSubmit: handleProductSubmit,\n          onCancel: handleCancelEdit,\n          fabrics: fabrics\n        }, currentProduct ? currentProduct._id : 'new', false, {\n          fileName: _jsxFileName,\n          lineNumber: 963,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 962,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(AdminProductList, {\n          products: products,\n          onEdit: handleEdit,\n          onDelete: handleDelete,\n          fabrics: fabrics\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 974,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 973,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 960,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '40px',\n        borderTop: '2px solid var(--farbe-grau)',\n        paddingTop: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'var(--farbe-primär)',\n          marginBottom: '30px',\n          fontSize: '1.8em'\n        },\n        children: \"Stoff-Inventar-Verwaltung\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 990,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FabricForm, {\n        stoffToEdit: null,\n        onAdd: handleAddFabric,\n        onCancel: () => {}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 996,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AdminFabricList, {\n        fabrics: fabrics,\n        onDelete: handleDeleteFabric\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1003,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 985,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 921,\n    columnNumber: 9\n  }, this);\n};\n_s4(AdminDashboard, \"lqiCcjb/5jfbcbbIfe6n+lOfvfA=\", false, function () {\n  return [useNavigate];\n});\n_c5 = AdminDashboard;\nexport default AdminDashboard;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"ProductForm\");\n$RefreshReg$(_c2, \"AdminProductList\");\n$RefreshReg$(_c3, \"FabricForm\");\n$RefreshReg$(_c4, \"AdminFabricList\");\n$RefreshReg$(_c5, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","useNavigate","LogOut","Edit","Trash2","PlusCircle","CheckCircle","XCircle","jsxDEV","_jsxDEV","API_URL","BACKEND_URL","FALLBACK_IMAGE_URL","getAuthHeaders","adminToken","localStorage","getItem","error","getImageUrl","imagePath","startsWith","getInitialState","productToEdit","name","description","price","stock","isFeatured","imageFile","imageUrl","fabricId","ProductForm","onSubmit","onCancel","fabrics","_s","initialState","formData","setFormData","isEditing","setIsEditing","previewImage","setPreviewImage","handleChange","e","value","type","checked","target","prev","parseFloat","handleFileChange","file","files","URL","createObjectURL","handleSubmit","preventDefault","data","FormData","Object","keys","forEach","key","undefined","append","toString","getFinalPreviewUrl","relevantFabrics","className","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","onChange","required","rows","style","display","gap","flex","min","step","map","fabric","_id","fabricType","color","marginTop","accept","src","alt","maxWidth","maxHeight","borderRadius","border","alignItems","width","height","margin","fontWeight","cursor","paddingTop","borderTop","onClick","backgroundColor","_c","AdminProductList","products","onEdit","onDelete","_s2","fabricMap","reduce","acc","length","overflowY","product","objectFit","onError","onerror","padding","fontSize","toFixed","title","size","_c2","USAGE_OPTIONS","FABRIC_TYPES","getFabricInitialState","stoffToEdit","suitableFor","FabricForm","onAdd","_s3","updatedSuitableFor","filter","v","JSON","stringify","flexWrap","usage","includes","_c3","AdminFabricList","_c4","AdminDashboard","_s4","navigate","setProducts","setFabrics","currentProduct","setCurrentProduct","statusMessage","setStatusMessage","message","handleLogout","removeItem","fetchAllData","headers","productsResponse","fetch","productsData","json","ok","Error","fabricsResponse","fabricsData","console","showStatus","setTimeout","handleProductSubmit","method","url","productHeaders","response","body","result","handleEdit","window","scrollTo","top","behavior","handleCancelEdit","handleDelete","productId","productName","confirm","handleAddFabric","fabricHeaders","handleDeleteFabric","fabricName","statusStyle","marginBottom","dashboardStyles","adminHeaderStyles","justifyContent","borderBottom","paddingBottom","gridTemplateColumns","_c5","$RefreshReg$"],"sources":["C:/Users/Stefan/Desktop/henkes-stoffzauber/henkes-stoffzauber-projekt/client/src/AdminDashboard.js"],"sourcesContent":["// client/src/components/AdminDashboard.js\r\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { LogOut, Edit, Trash2, PlusCircle, CheckCircle, XCircle } from 'lucide-react';\r\n\r\nconst API_URL = 'http://localhost:3001/api';\r\nconst BACKEND_URL = 'http://localhost:3001';\r\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/100x100/CCCCCC/333333?text=N/A\";\r\n\r\n// --- Hilfsfunktionen für Admin-Operationen ---\r\n\r\n/**\r\n * Ruft den Admin-Authentifizierungstoken aus dem localStorage ab.\r\n * @returns {object} Objekt mit Headern oder Fehlermeldung.\r\n */\r\nconst getAuthHeaders = () => {\r\n    const adminToken = localStorage.getItem('adminToken');\r\n    if (!adminToken) {\r\n        return { error: 'Admin-Sitzung abgelaufen oder nicht gefunden.' };\r\n    }\r\n    return { \r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${adminToken}`,\r\n    };\r\n};\r\n\r\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n */\r\nconst getImageUrl = (imagePath) => {\r\n    if (imagePath && imagePath.startsWith('/uploads/')) {\r\n        return `${BACKEND_URL}${imagePath}`;\r\n    }\r\n    return imagePath || FALLBACK_IMAGE_URL;\r\n};\r\n\r\n// =========================================================================\r\n// BEGINN: EINGEBETTETER CODE VON ProductForm\r\n// =========================================================================\r\n\r\nconst getInitialState = (productToEdit) => productToEdit || {\r\n    name: '',\r\n    description: '',\r\n    price: 0,\r\n    stock: 0,\r\n    isFeatured: false,\r\n    imageFile: null,\r\n    imageUrl: '',\r\n    fabricId: '',\r\n};\r\n\r\n// --- Komponente: Produktformular (ProductForm) ---\r\nconst ProductForm = ({ productToEdit, onSubmit, onCancel, fabrics }) => {\r\n    \r\n    // useMemo stellt sicher, dass initialState nur neu berechnet wird, wenn sich productToEdit ändert\r\n    const initialState = useMemo(() => getInitialState(productToEdit), [productToEdit]);\r\n    \r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!productToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n\r\n    useEffect(() => {\r\n        // Setzt das Formular zurück, wenn ein neues Produkt geladen wird\r\n        setFormData(initialState);\r\n        setIsEditing(!!productToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, productToEdit]); \r\n    \r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: type === 'checkbox' ? checked : (type === 'number' ? parseFloat(value) : value),\r\n        }));\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            imageFile: file,\r\n            // Wenn eine Datei ausgewählt wird, generiere eine lokale Vorschau-URL\r\n            // Die alte imageUrl (vom Server) wird durch die neue lokale Vorschau überschrieben\r\n            imageUrl: '', \r\n        }));\r\n        setPreviewImage(file ? URL.createObjectURL(file) : (formData.imageUrl || null));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        // Erstellen eines FormData-Objekts für den Dateiupload\r\n        const data = new FormData();\r\n        \r\n        // Hinzufügen aller Formularfelder\r\n        Object.keys(formData).forEach(key => {\r\n            if (key !== 'imageFile' && formData[key] !== null && formData[key] !== undefined) {\r\n                // Konvertiere boolesche Werte in Strings, da FormData sie nicht direkt als Bool speichert\r\n                data.append(key, typeof formData[key] === 'boolean' ? formData[key].toString() : formData[key]);\r\n            }\r\n        });\r\n\r\n        // Hinzufügen der Bilddatei, falls vorhanden\r\n        if (formData.imageFile) {\r\n            data.append('imageFile', formData.imageFile);\r\n        } else if (isEditing && formData.imageUrl) {\r\n             // Wenn wir bearbeiten und es ein Bild vom Server gibt, aber keine neue Datei hochgeladen wird,\r\n             // fügen wir die URL als Platzhalter hinzu, damit das Backend weiß, dass das Bild beibehalten werden soll.\r\n             // Dies ist eine spezifische Backend-Konvention.\r\n             data.append('imageUrl', formData.imageUrl);\r\n        }\r\n\r\n        // Der onSubmit-Handler des Dashboards kümmert sich um die API-Anfrage\r\n        onSubmit(data, isEditing);\r\n    };\r\n    \r\n    // Definiert die endgültige URL für die Bildvorschau\r\n    const getFinalPreviewUrl = () => {\r\n        if (formData.imageFile && previewImage) {\r\n            return previewImage; // Lokale Vorschau\r\n        }\r\n        if (formData.imageUrl) {\r\n            return getImageUrl(formData.imageUrl); // Server-Bild\r\n        }\r\n        return FALLBACK_IMAGE_URL; // Fallback\r\n    };\r\n    \r\n    const relevantFabrics = useMemo(() => fabrics || [], [fabrics]);\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form-card\">\r\n            <h2 className=\"admin-form-title\">\r\n                {isEditing ? 'Produkt bearbeiten' : 'Neues Produkt erstellen'}\r\n            </h2>\r\n            \r\n            {/* 1. Name */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"name\">Produktname:</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            {/* 2. Beschreibung */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"description\">Beschreibung:</label>\r\n                <textarea\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    rows=\"4\"\r\n                    required\r\n                />\r\n            </div>\r\n            \r\n            {/* 3. Preis & Bestand in einer Zeile (Flex-Container) */}\r\n            <div style={{ display: 'flex', gap: '20px' }}>\r\n                <div className=\"admin-form-group\" style={{ flex: 1 }}>\r\n                    <label htmlFor=\"price\">Preis (€):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"price\"\r\n                        name=\"price\"\r\n                        value={formData.price}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        step=\"0.01\"\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"admin-form-group\" style={{ flex: 1 }}>\r\n                    <label htmlFor=\"stock\">Bestand (Stück):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"stock\"\r\n                        name=\"stock\"\r\n                        value={formData.stock}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* NEU: 4. Stoffauswahl (fabricId) */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricId\">Zugehöriger Stoff (optional):</label>\r\n                <select\r\n                    id=\"fabricId\"\r\n                    name=\"fabricId\"\r\n                    value={formData.fabricId || ''}\r\n                    onChange={handleChange}\r\n                >\r\n                    <option value=\"\">-- Keinen Stoff zuordnen --</option>\r\n                    {relevantFabrics.map(fabric => (\r\n                        <option key={fabric._id} value={fabric._id}>\r\n                            {fabric.name} ({fabric.fabricType})\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n                <small style={{ color: '#666', marginTop: '5px', display: 'block' }}>\r\n                    Wählen Sie den Stoff aus, zu dem dieses Produkt (z.B. Nähzubehör, fertige Ware) gehört.\r\n                </small>\r\n            </div>\r\n            \r\n            {/* 5. Bild-Upload und Vorschau */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"imageFile\">Produktbild (optional):</label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    name=\"imageFile\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleFileChange}\r\n                />\r\n                \r\n                {(previewImage || formData.imageUrl) && (\r\n                    <div style={{ marginTop: '15px' }}>\r\n                        <img\r\n                            src={getFinalPreviewUrl()}\r\n                            alt=\"Vorschau\"\r\n                            style={{ maxWidth: '100px', maxHeight: '100px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n            \r\n            <div className=\"admin-form-group\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"isFeatured\"\r\n                    name=\"isFeatured\"\r\n                    checked={formData.isFeatured}\r\n                    onChange={handleChange}\r\n                    style={{ width: '20px', height: '20px' }}\r\n                />\r\n                <label htmlFor=\"isFeatured\" style={{ margin: 0, fontWeight: 'normal', cursor: 'pointer' }}>\r\n                    Als \"Featured Product\" auf der Startseite anzeigen\r\n                </label>\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\">\r\n                    {isEditing ? 'Änderungen speichern' : 'Produkt erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen (Zurück zur Erstellung)\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n\r\n// =========================================================================\r\n// ENDE: EINGEBETTETER CODE VON ProductForm\r\n// =========================================================================\r\n\r\n\r\n// =========================================================================\r\n// BEGINN: EINGEBETTETER CODE VON AdminProductList\r\n// =========================================================================\r\n\r\nconst AdminProductList = ({ products, onEdit, onDelete, fabrics }) => {\r\n\r\n    const fabricMap = useMemo(() => {\r\n        return (fabrics || []).reduce((acc, fabric) => {\r\n            acc[fabric._id] = fabric.name;\r\n            return acc;\r\n        }, {});\r\n    }, [fabrics]);\r\n\r\n    return (\r\n        <div className=\"admin-list-card\">\r\n            <h2 className=\"admin-form-title\">Verfügbare Produkte ({products.length})</h2>\r\n            <div style={{ maxHeight: '600px', overflowY: 'auto' }}>\r\n                <table className=\"admin-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th style={{ width: '80px' }}>Bild</th>\r\n                            <th>Name</th>\r\n                            <th>Stoff (ID)</th>\r\n                            <th style={{ width: '100px' }}>Bestand</th>\r\n                            <th style={{ width: '100px' }}>Preis</th>\r\n                            <th style={{ width: '100px' }}>Aktionen</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {products.map(product => (\r\n                            <tr key={product._id}>\r\n                                <td>\r\n                                    <img \r\n                                        src={getImageUrl(product.imageUrl)} \r\n                                        alt={product.name} \r\n                                        style={{ width: '50px', height: '50px', objectFit: 'cover', borderRadius: '4px' }}\r\n                                        onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                                    />\r\n                                </td>\r\n                                <td>\r\n                                    <div style={{ fontWeight: 'bold' }}>{product.name}</div>\r\n                                    <small style={{ color: '#666' }}>ID: {product._id}</small>\r\n                                </td>\r\n                                <td>\r\n                                    {product.fabricId ? (\r\n                                        <span style={{ backgroundColor: 'var(--farbe-akzent)', color: 'white', padding: '2px 6px', borderRadius: '4px', fontSize: '0.75em' }}>\r\n                                            {fabricMap[product.fabricId] || 'Unbekannt'}\r\n                                        </span>\r\n                                    ) : (\r\n                                        <span style={{ color: '#999', fontSize: '0.85em' }}>- Keine -</span>\r\n                                    )}\r\n                                </td>\r\n                                <td>\r\n                                    <span style={{ color: product.stock > 0 ? 'var(--farbe-grün)' : 'var(--farbe-rot)', fontWeight: 'bold' }}>\r\n                                        {product.stock}\r\n                                    </span>\r\n                                </td>\r\n                                <td>{product.price.toFixed(2)} €</td>\r\n                                <td>\r\n                                    <div style={{ display: 'flex', gap: '5px' }}>\r\n                                        <button \r\n                                            onClick={() => onEdit(product)} \r\n                                            className=\"admin-icon-button\" \r\n                                            title=\"Bearbeiten\"\r\n                                        >\r\n                                            <Edit size={16} />\r\n                                        </button>\r\n                                        <button \r\n                                            onClick={() => onDelete(product._id, product.name)} \r\n                                            className=\"admin-icon-button delete-button\" \r\n                                            title=\"Löschen\"\r\n                                        >\r\n                                            <Trash2 size={16} />\r\n                                        </button>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// =========================================================================\r\n// ENDE: EINGEBETTETER CODE VON AdminProductList\r\n// =========================================================================\r\n\r\n// =========================================================================\r\n// BEGINN: EINGEBETTETER CODE VON FabricForm\r\n// =========================================================================\r\n\r\n// Liste der möglichen Verwendungszwecke (zum Checkbox-Rendern)\r\nconst USAGE_OPTIONS = [\r\n    'Mütze (Außen)', 'Mütze (Innen)', 'Bündchen', 'Bekleidung (Oberteil)', \r\n    'Bekleidung (Hose)', 'Babybekleidung', 'Deko', 'Taschen', 'Accessoires'\r\n];\r\n\r\n// Liste der Stoffarten\r\nconst FABRIC_TYPES = [\r\n    'Jersey', 'French Terry (Sommersweat)', 'Sweat', 'Bündchenstoff', 'Musselin', \r\n    'Webware Baumwolle', 'Cord', 'Fleece', 'Softshell', 'Leder (Imitat/Echt)'\r\n];\r\n\r\n\r\nconst getFabricInitialState = (stoffToEdit) => stoffToEdit || {\r\n    name: '',\r\n    description: '',\r\n    fabricType: '',\r\n    suitableFor: [],\r\n    stock: 0,\r\n    imageUrl: '',\r\n    imageFile: null,\r\n};\r\n\r\n\r\nconst FabricForm = ({ stoffToEdit, onAdd, onCancel }) => {\r\n    \r\n    const initialState = useMemo(() => getFabricInitialState(stoffToEdit), [stoffToEdit]);\r\n    \r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!stoffToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n\r\n    useEffect(() => {\r\n        setFormData(initialState);\r\n        setIsEditing(!!stoffToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, stoffToEdit]); \r\n    \r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n\r\n        if (name === 'suitableFor') {\r\n            // Spezielle Behandlung für Checkboxen-Array\r\n            setFormData(prev => {\r\n                const updatedSuitableFor = checked\r\n                    ? [...prev.suitableFor, value]\r\n                    : prev.suitableFor.filter(v => v !== value);\r\n                return { ...prev, suitableFor: updatedSuitableFor };\r\n            });\r\n        } else {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                [name]: type === 'number' ? parseFloat(value) : value,\r\n            }));\r\n        }\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            imageFile: file,\r\n            imageUrl: '',\r\n        }));\r\n        setPreviewImage(file ? URL.createObjectURL(file) : (formData.imageUrl || null));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        const data = new FormData();\r\n        \r\n        Object.keys(formData).forEach(key => {\r\n            if (key === 'suitableFor') {\r\n                // Konvertiere Array in JSON-String, damit FormData es übertragen kann\r\n                data.append(key, JSON.stringify(formData[key]));\r\n            } else if (key !== 'imageFile' && formData[key] !== null && formData[key] !== undefined) {\r\n                data.append(key, formData[key]);\r\n            }\r\n        });\r\n\r\n        if (formData.imageFile) {\r\n            data.append('imageFile', formData.imageFile);\r\n        } else if (isEditing && formData.imageUrl) {\r\n             data.append('imageUrl', formData.imageUrl);\r\n        }\r\n\r\n        // Ruft den onAdd-Handler des Dashboards auf\r\n        onAdd(data, isEditing);\r\n    };\r\n    \r\n    const getFinalPreviewUrl = () => {\r\n        if (formData.imageFile && previewImage) {\r\n            return previewImage;\r\n        }\r\n        if (formData.imageUrl) {\r\n            return getImageUrl(formData.imageUrl);\r\n        }\r\n        return FALLBACK_IMAGE_URL;\r\n    };\r\n    \r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form-card\">\r\n            <h2 className=\"admin-form-title\">\r\n                {isEditing ? 'Stoff bearbeiten' : 'Neuen Stoff hinzufügen'}\r\n            </h2>\r\n            \r\n            {/* 1. Name & Stoffart (Flex-Container) */}\r\n            <div style={{ display: 'flex', gap: '20px' }}>\r\n                 {/* Name */}\r\n                <div className=\"admin-form-group\" style={{ flex: 1 }}>\r\n                    <label htmlFor=\"name\">Stoffname/Muster:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"name\"\r\n                        name=\"name\"\r\n                        value={formData.name}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                 {/* Stoffart */}\r\n                <div className=\"admin-form-group\" style={{ flex: 1 }}>\r\n                    <label htmlFor=\"fabricType\">Stoffart:</label>\r\n                    <select\r\n                        id=\"fabricType\"\r\n                        name=\"fabricType\"\r\n                        value={formData.fabricType}\r\n                        onChange={handleChange}\r\n                        required\r\n                    >\r\n                        <option value=\"\">-- Bitte wählen --</option>\r\n                        {FABRIC_TYPES.map(type => (\r\n                            <option key={type} value={type}>{type}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 2. Beschreibung */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"description\">Beschreibung:</label>\r\n                <textarea\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    rows=\"2\"\r\n                    required\r\n                />\r\n            </div>\r\n            \r\n            {/* 3. Bestand */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"stock\">Bestand (Meter):</label>\r\n                <input\r\n                    type=\"number\"\r\n                    id=\"stock\"\r\n                    name=\"stock\"\r\n                    value={formData.stock}\r\n                    onChange={handleChange}\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    required\r\n                />\r\n                <small style={{ color: '#666', marginTop: '5px', display: 'block' }}>\r\n                    Geben Sie den verfügbaren Bestand in Metern an (z.B. 10.5 für 10 Meter und 50 cm).\r\n                </small>\r\n            </div>\r\n            \r\n            {/* 4. Verwendungszwecke */}\r\n            <div className=\"admin-form-group\">\r\n                <label>Geeignet für (Verwendungszwecke):</label>\r\n                <div style={{ \r\n                    display: 'flex', \r\n                    flexWrap: 'wrap', \r\n                    gap: '10px', \r\n                    backgroundColor: 'var(--farbe-hintergrund)', \r\n                    padding: '10px', \r\n                    borderRadius: '5px' \r\n                }}>\r\n                    {USAGE_OPTIONS.map(usage => (\r\n                        <div key={usage} style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                id={`usage-${usage}`}\r\n                                name=\"suitableFor\"\r\n                                value={usage}\r\n                                checked={formData.suitableFor.includes(usage)}\r\n                                onChange={handleChange}\r\n                                style={{ width: '15px', height: '15px', cursor: 'pointer' }}\r\n                            />\r\n                            <label \r\n                                htmlFor={`usage-${usage}`} \r\n                                style={{ margin: 0, fontWeight: 'normal', cursor: 'pointer', fontSize: '0.9em' }}\r\n                            >\r\n                                {usage}\r\n                            </label>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* 5. Bild-Upload und Vorschau */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"imageFile\">Stoffmuster Bild (optional):</label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    name=\"imageFile\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleFileChange}\r\n                />\r\n                \r\n                <div style={{ marginTop: '15px' }}>\r\n                    <img\r\n                        src={getFinalPreviewUrl()}\r\n                        alt=\"Vorschau\"\r\n                        style={{ maxWidth: '100px', maxHeight: '100px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* 6. Aktionen */}\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\">\r\n                    {isEditing ? 'Änderungen speichern' : 'Stoff erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen (Zurück zur Erstellung)\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n\r\n// =========================================================================\r\n// ENDE: EINGEBETTETER CODE VON FabricForm\r\n// =========================================================================\r\n\r\n// =========================================================================\r\n// BEGINN: EINGEBETTETER CODE VON AdminFabricList\r\n// =========================================================================\r\n\r\nconst AdminFabricList = ({ fabrics, onDelete }) => {\r\n    \r\n    return (\r\n        <div className=\"admin-list-card\" style={{ marginTop: '30px' }}>\r\n            <h2 className=\"admin-form-title\">Verfügbare Stoffe ({fabrics.length})</h2>\r\n            <div style={{ maxHeight: '400px', overflowY: 'auto' }}>\r\n                <table className=\"admin-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th style={{ width: '80px' }}>Bild</th>\r\n                            <th>Name</th>\r\n                            <th style={{ width: '100px' }}>Stoffart</th>\r\n                            <th style={{ width: '100px' }}>Bestand</th>\r\n                            <th style={{ width: '100px' }}>Aktionen</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {fabrics.map(fabric => (\r\n                            <tr key={fabric._id}>\r\n                                <td>\r\n                                    <img \r\n                                        src={getImageUrl(fabric.imageUrl)} \r\n                                        alt={fabric.name} \r\n                                        style={{ width: '50px', height: '50px', objectFit: 'cover', borderRadius: '4px' }}\r\n                                        onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                                    />\r\n                                </td>\r\n                                <td>\r\n                                    <div style={{ fontWeight: 'bold' }}>{fabric.name}</div>\r\n                                    <small style={{ color: '#666' }}>ID: {fabric._id}</small>\r\n                                </td>\r\n                                <td>{fabric.fabricType}</td>\r\n                                <td>\r\n                                    <span style={{ color: fabric.stock > 0 ? 'var(--farbe-grün)' : 'var(--farbe-rot)', fontWeight: 'bold' }}>\r\n                                        {fabric.stock.toFixed(2)} m\r\n                                    </span>\r\n                                </td>\r\n                                <td>\r\n                                    <div style={{ display: 'flex', gap: '5px' }}>\r\n                                        {/* Bearbeiten-Funktion ist hier nicht implementiert, aber der Platzhalter bleibt für die Zukunft */}\r\n                                        {/* <button className=\"admin-icon-button\" title=\"Bearbeiten\"><Edit size={16} /></button> */}\r\n                                        <button \r\n                                            onClick={() => onDelete(fabric._id, fabric.name)} \r\n                                            className=\"admin-icon-button delete-button\" \r\n                                            title=\"Löschen\"\r\n                                        >\r\n                                            <Trash2 size={16} />\r\n                                        </button>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// =========================================================================\r\n// ENDE: EINGEBETTETER CODE VON AdminFabricList\r\n// =========================================================================\r\n\r\n\r\n// --- Hauptkomponente: AdminDashboard ---\r\n\r\nconst AdminDashboard = () => {\r\n    const navigate = useNavigate();\r\n    const [products, setProducts] = useState([]);\r\n    const [fabrics, setFabrics] = useState([]);\r\n    const [currentProduct, setCurrentProduct] = useState(null);\r\n    const [statusMessage, setStatusMessage] = useState({ message: '', type: '' }); // type: 'success' | 'error'\r\n\r\n    const handleLogout = useCallback(() => {\r\n        localStorage.removeItem('adminToken');\r\n        navigate('/admin'); // Leitet zur Login-Seite weiter (wird dort automatisch durch AdminProtectedRoute geprüft)\r\n    }, [navigate]);\r\n\r\n    // Lade Produkte und Stoffe beim Start\r\n    const fetchAllData = useCallback(async () => {\r\n        const headers = getAuthHeaders();\r\n        if (headers.error) {\r\n            setStatusMessage({ message: headers.error, type: 'error' });\r\n            handleLogout();\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // 1. Produkte laden\r\n            const productsResponse = await fetch(`${API_URL}/products`, { headers });\r\n            const productsData = await productsResponse.json();\r\n            if (productsResponse.ok) {\r\n                setProducts(productsData);\r\n            } else {\r\n                 throw new Error(productsData.message || 'Fehler beim Laden der Produkte.');\r\n            }\r\n\r\n            // 2. Stoffe laden\r\n            const fabricsResponse = await fetch(`${API_URL}/fabrics`, { headers });\r\n            const fabricsData = await fabricsResponse.json();\r\n            if (fabricsResponse.ok) {\r\n                setFabrics(fabricsData);\r\n            } else {\r\n                 throw new Error(fabricsData.message || 'Fehler beim Laden der Stoffe.');\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Laden der Admin-Daten:\", error);\r\n            setStatusMessage({ message: `Fehler: ${error.message}`, type: 'error' });\r\n        }\r\n    }, [handleLogout]);\r\n\r\n    useEffect(() => {\r\n        fetchAllData();\r\n    }, [fetchAllData]);\r\n\r\n    const showStatus = (message, type = 'success') => {\r\n        setStatusMessage({ message, type });\r\n        setTimeout(() => setStatusMessage({ message: '', type: '' }), 5000);\r\n    };\r\n\r\n\r\n    // --- Produkt-Operationen ---\r\n\r\n    const handleProductSubmit = async (formData, isEditing) => {\r\n        const headers = getAuthHeaders();\r\n        if (headers.error) {\r\n            showStatus(headers.error, 'error');\r\n            handleLogout();\r\n            return;\r\n        }\r\n\r\n        const method = isEditing ? 'PUT' : 'POST';\r\n        const url = isEditing ? `${API_URL}/products/${currentProduct._id}` : `${API_URL}/products`;\r\n\r\n        // Bei FormData-Objekten muss der Header 'Content-Type': 'application/json' entfernt werden.\r\n        // Das Browser setzt 'Content-Type': 'multipart/form-data' automatisch korrekt.\r\n        const productHeaders = { \r\n            'Authorization': headers['Authorization'], \r\n        };\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: method,\r\n                headers: productHeaders,\r\n                body: formData,\r\n            });\r\n\r\n            const result = await response.json();\r\n            \r\n            if (response.ok) {\r\n                showStatus(`Produkt erfolgreich ${isEditing ? 'aktualisiert' : 'erstellt'}!`, 'success');\r\n                setCurrentProduct(null); // Formular zurücksetzen\r\n                fetchAllData(); // Daten neu laden\r\n            } else {\r\n                throw new Error(result.message || `Fehler bei der ${isEditing ? 'Aktualisierung' : 'Erstellung'} des Produkts.`);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Fehler bei Produkt-Operation:\", error);\r\n            showStatus(`Fehler: ${error.message}`, 'error');\r\n        }\r\n    };\r\n\r\n    const handleEdit = (product) => {\r\n        setCurrentProduct(product);\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    };\r\n\r\n    const handleCancelEdit = () => {\r\n        setCurrentProduct(null);\r\n    };\r\n\r\n    const handleDelete = async (productId, productName) => {\r\n        if (!window.confirm(`Soll das Produkt \"${productName}\" wirklich gelöscht werden?`)) {\r\n            return;\r\n        }\r\n        \r\n        const headers = getAuthHeaders();\r\n        if (headers.error) {\r\n            showStatus(headers.error, 'error');\r\n            handleLogout();\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/products/${productId}`, {\r\n                method: 'DELETE',\r\n                headers: headers,\r\n            });\r\n\r\n            if (response.ok) {\r\n                showStatus(`Produkt \"${productName}\" erfolgreich gelöscht!`, 'success');\r\n                fetchAllData();\r\n            } else {\r\n                const result = await response.json();\r\n                throw new Error(result.message || 'Fehler beim Löschen des Produkts.');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Löschen:\", error);\r\n            showStatus(`Fehler: ${error.message}`, 'error');\r\n        }\r\n    };\r\n    \r\n    // --- Stoff-Operationen ---\r\n    \r\n    const handleAddFabric = async (formData) => {\r\n         const headers = getAuthHeaders();\r\n        if (headers.error) {\r\n            showStatus(headers.error, 'error');\r\n            handleLogout();\r\n            return;\r\n        }\r\n\r\n        // POST ist die einzige unterstützte Methode für FabricForm in diesem Dashboard\r\n        const url = `${API_URL}/fabrics`;\r\n        \r\n        // Bei FormData-Objekten muss der Header 'Content-Type': 'application/json' entfernt werden.\r\n        const fabricHeaders = { \r\n            'Authorization': headers['Authorization'], \r\n        };\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: 'POST',\r\n                headers: fabricHeaders,\r\n                body: formData,\r\n            });\r\n\r\n            const result = await response.json();\r\n            \r\n            if (response.ok) {\r\n                showStatus(`Stoff \"${result.name}\" erfolgreich erstellt!`, 'success');\r\n                fetchAllData(); // Daten neu laden\r\n            } else {\r\n                throw new Error(result.message || 'Fehler bei der Erstellung des Stoffs.');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Fehler bei Stoff-Operation:\", error);\r\n            showStatus(`Fehler: ${error.message}`, 'error');\r\n        }\r\n    };\r\n    \r\n     const handleDeleteFabric = async (fabricId, fabricName) => {\r\n        if (!window.confirm(`Soll der Stoff \"${fabricName}\" wirklich gelöscht werden? Achtung: Alle zugeordneten Produkte bleiben bestehen, verlieren aber die Verknüpfung!`)) {\r\n            return;\r\n        }\r\n        \r\n        const headers = getAuthHeaders();\r\n        if (headers.error) {\r\n            showStatus(headers.error, 'error');\r\n            handleLogout();\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/fabrics/${fabricId}`, {\r\n                method: 'DELETE',\r\n                headers: headers,\r\n            });\r\n\r\n            if (response.ok) {\r\n                showStatus(`Stoff \"${fabricName}\" erfolgreich gelöscht!`, 'success');\r\n                fetchAllData();\r\n            } else {\r\n                const result = await response.json();\r\n                throw new Error(result.message || 'Fehler beim Löschen des Stoffs.');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Löschen des Stoffs:\", error);\r\n            showStatus(`Fehler: ${error.message}`, 'error');\r\n        }\r\n    };\r\n\r\n    // --- Rendern der Hauptkomponente ---\r\n\r\n    const statusStyle = {\r\n        padding: '10px 20px',\r\n        borderRadius: '8px',\r\n        fontWeight: 'bold',\r\n        marginBottom: '20px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '10px',\r\n        color: 'white',\r\n        backgroundColor: statusMessage.type === 'success' ? 'var(--farbe-grün)' : 'var(--farbe-rot)',\r\n    };\r\n    \r\n    // Allgemeine Styles, die im CSS-Teil der App definiert sein sollten, hier als Fallback inline\r\n    const dashboardStyles = {\r\n        padding: '40px 50px',\r\n        maxWidth: '1400px',\r\n        margin: '0 auto',\r\n    };\r\n    \r\n    const adminHeaderStyles = {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        marginBottom: '30px',\r\n        borderBottom: '2px solid var(--farbe-grau)',\r\n        paddingBottom: '20px',\r\n    };\r\n\r\n\r\n    return (\r\n        <div style={dashboardStyles}>\r\n            \r\n            <div style={adminHeaderStyles}>\r\n                <h1 style={{ color: 'var(--farbe-primär)', fontSize: '2em', margin: 0 }}>\r\n                    Admin Dashboard\r\n                </h1>\r\n                <button \r\n                    onClick={handleLogout} \r\n                    className=\"admin-logout-button\"\r\n                    style={{ \r\n                        backgroundColor: 'var(--farbe-rot)', \r\n                        color: 'white', \r\n                        padding: '8px 15px', \r\n                        borderRadius: '6px', \r\n                        border: 'none', \r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '5px'\r\n                    }}\r\n                >\r\n                    <LogOut size={18} />\r\n                    Logout\r\n                </button>\r\n            </div>\r\n            \r\n            {/* Statusmeldung */}\r\n            {statusMessage.message && (\r\n                <div style={statusStyle}>\r\n                    {statusMessage.type === 'success' ? <CheckCircle size={20} /> : <XCircle size={20} />}\r\n                    {statusMessage.message}\r\n                </div>\r\n            )}\r\n            \r\n            {/* 1. Bereich: PRODUKT-VERWALTUNG (Grid) */}\r\n            <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                Produkt-Verwaltung\r\n            </h1>\r\n            \r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1.5fr', gap: '30px' }}>\r\n                {/* 1. Spalte: Produkt-Formular */}\r\n                <div>\r\n                    <ProductForm\r\n                        key={currentProduct ? currentProduct._id : 'new'} \r\n                        productToEdit={currentProduct}\r\n                        onSubmit={handleProductSubmit}\r\n                        onCancel={handleCancelEdit}\r\n                        fabrics={fabrics} \r\n                    />\r\n                </div>\r\n\r\n                {/* 2. Spalte: Produktliste */}\r\n                <div>\r\n                    <AdminProductList \r\n                        products={products}\r\n                        onEdit={handleEdit}\r\n                        onDelete={handleDelete}\r\n                        fabrics={fabrics} \r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            \r\n            {/* 2. Bereich: STOFF-VERWALTUNG (Unterhalb des Grids) */}\r\n            <div style={{ \r\n                marginTop: '40px', \r\n                borderTop: '2px solid var(--farbe-grau)', \r\n                paddingTop: '30px' \r\n            }}>\r\n                <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                    Stoff-Inventar-Verwaltung\r\n                </h1>\r\n                \r\n                {/* Stoff-Formular */}\r\n                {/* Hinweis: Wir geben 'null' an stoffToEdit, da die Bearbeitung des Stoffs in diesem Dashboard nicht implementiert wurde. */}\r\n                <FabricForm \r\n                    stoffToEdit={null}\r\n                    onAdd={handleAddFabric} \r\n                    onCancel={() => {}} \r\n                />\r\n                \r\n                {/* Stoff-Liste */}\r\n                <AdminFabricList fabrics={fabrics} onDelete={handleDeleteFabric} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}