{"ast":null,"code":"// nur die relevante PayPal useEffect\nuseEffect(() => {\n  if (formData.paymentMethod !== 'paypal') return;\n  if (!paypalClientId) return;\n  if (!paypalRef.current) return; // frühzeitig exit wenn Ref fehlt\n\n  const existing = document.getElementById('paypal-sdk');\n  if (existing) existing.remove();\n  setLoadingPaypal(true);\n  const script = document.createElement('script');\n  script.id = 'paypal-sdk';\n  script.src = `https://www.paypal.com/sdk/js?client-id=${paypalClientId}&currency=EUR`;\n  script.async = true;\n  script.onload = () => {\n    setLoadingPaypal(false);\n    if (!window.paypal) return console.error('window.paypal not available');\n    if (!paypalRef.current) return; // Ref nochmal checken\n\n    try {\n      window.paypal.Buttons({\n        style: {\n          layout: 'vertical',\n          color: 'gold',\n          shape: 'pill',\n          label: 'pay'\n        },\n        createOrder: async () => {/* dein Code */},\n        onApprove: async (data, actions) => {/* dein Code */},\n        onError: err => {\n          console.error('PayPal Buttons error', err);\n          alert('PayPal Zahlung fehlgeschlagen');\n        }\n      }).render(paypalRef.current);\n    } catch (err) {\n      console.error('Error rendering PayPal Buttons', err);\n    }\n  };\n  script.onerror = () => {\n    setLoadingPaypal(false);\n    console.error('PayPal SDK load error');\n  };\n  document.body.appendChild(script);\n  return () => {\n    const el = document.getElementById('paypal-sdk');\n    if (el) el.remove();\n    if (paypalRef.current) paypalRef.current.innerHTML = '';\n  };\n}, [paypalClientId, formData.paymentMethod, cartItems, paypalRef]);","map":{"version":3,"names":["useEffect","formData","paymentMethod","paypalClientId","paypalRef","current","existing","document","getElementById","remove","setLoadingPaypal","script","createElement","id","src","async","onload","window","paypal","console","error","Buttons","style","layout","color","shape","label","createOrder","onApprove","data","actions","onError","err","alert","render","onerror","body","appendChild","el","innerHTML","cartItems"],"sources":["C:/Users/Stefan/Desktop/henkes-stoffzauber/henkes-stoffzauber-projekt/client/src/components/Checkout.js"],"sourcesContent":["// nur die relevante PayPal useEffect\r\nuseEffect(() => {\r\n  if (formData.paymentMethod !== 'paypal') return;\r\n  if (!paypalClientId) return;\r\n  if (!paypalRef.current) return; // frühzeitig exit wenn Ref fehlt\r\n\r\n  const existing = document.getElementById('paypal-sdk');\r\n  if (existing) existing.remove();\r\n\r\n  setLoadingPaypal(true);\r\n  const script = document.createElement('script');\r\n  script.id = 'paypal-sdk';\r\n  script.src = `https://www.paypal.com/sdk/js?client-id=${paypalClientId}&currency=EUR`;\r\n  script.async = true;\r\n\r\n  script.onload = () => {\r\n    setLoadingPaypal(false);\r\n    if (!window.paypal) return console.error('window.paypal not available');\r\n    if (!paypalRef.current) return; // Ref nochmal checken\r\n\r\n    try {\r\n      window.paypal.Buttons({\r\n        style: { layout: 'vertical', color: 'gold', shape: 'pill', label: 'pay' },\r\n        createOrder: async () => { /* dein Code */ },\r\n        onApprove: async (data, actions) => { /* dein Code */ },\r\n        onError: (err) => { console.error('PayPal Buttons error', err); alert('PayPal Zahlung fehlgeschlagen'); }\r\n      }).render(paypalRef.current);\r\n    } catch (err) { console.error('Error rendering PayPal Buttons', err); }\r\n  };\r\n\r\n  script.onerror = () => { setLoadingPaypal(false); console.error('PayPal SDK load error'); };\r\n  document.body.appendChild(script);\r\n\r\n  return () => {\r\n    const el = document.getElementById('paypal-sdk'); if(el) el.remove();\r\n    if(paypalRef.current) paypalRef.current.innerHTML = '';\r\n  };\r\n}, [paypalClientId, formData.paymentMethod, cartItems, paypalRef]);\r\n"],"mappings":"AAAA;AACAA,SAAS,CAAC,MAAM;EACd,IAAIC,QAAQ,CAACC,aAAa,KAAK,QAAQ,EAAE;EACzC,IAAI,CAACC,cAAc,EAAE;EACrB,IAAI,CAACC,SAAS,CAACC,OAAO,EAAE,OAAO,CAAC;;EAEhC,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC;EACtD,IAAIF,QAAQ,EAAEA,QAAQ,CAACG,MAAM,CAAC,CAAC;EAE/BC,gBAAgB,CAAC,IAAI,CAAC;EACtB,MAAMC,MAAM,GAAGJ,QAAQ,CAACK,aAAa,CAAC,QAAQ,CAAC;EAC/CD,MAAM,CAACE,EAAE,GAAG,YAAY;EACxBF,MAAM,CAACG,GAAG,GAAG,2CAA2CX,cAAc,eAAe;EACrFQ,MAAM,CAACI,KAAK,GAAG,IAAI;EAEnBJ,MAAM,CAACK,MAAM,GAAG,MAAM;IACpBN,gBAAgB,CAAC,KAAK,CAAC;IACvB,IAAI,CAACO,MAAM,CAACC,MAAM,EAAE,OAAOC,OAAO,CAACC,KAAK,CAAC,6BAA6B,CAAC;IACvE,IAAI,CAAChB,SAAS,CAACC,OAAO,EAAE,OAAO,CAAC;;IAEhC,IAAI;MACFY,MAAM,CAACC,MAAM,CAACG,OAAO,CAAC;QACpBC,KAAK,EAAE;UAAEC,MAAM,EAAE,UAAU;UAAEC,KAAK,EAAE,MAAM;UAAEC,KAAK,EAAE,MAAM;UAAEC,KAAK,EAAE;QAAM,CAAC;QACzEC,WAAW,EAAE,MAAAA,CAAA,KAAY,CAAE,gBAAiB;QAC5CC,SAAS,EAAE,MAAAA,CAAOC,IAAI,EAAEC,OAAO,KAAK,CAAE,gBAAiB;QACvDC,OAAO,EAAGC,GAAG,IAAK;UAAEb,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEY,GAAG,CAAC;UAAEC,KAAK,CAAC,+BAA+B,CAAC;QAAE;MAC1G,CAAC,CAAC,CAACC,MAAM,CAAC9B,SAAS,CAACC,OAAO,CAAC;IAC9B,CAAC,CAAC,OAAO2B,GAAG,EAAE;MAAEb,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEY,GAAG,CAAC;IAAE;EACxE,CAAC;EAEDrB,MAAM,CAACwB,OAAO,GAAG,MAAM;IAAEzB,gBAAgB,CAAC,KAAK,CAAC;IAAES,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAC;EAAE,CAAC;EAC3Fb,QAAQ,CAAC6B,IAAI,CAACC,WAAW,CAAC1B,MAAM,CAAC;EAEjC,OAAO,MAAM;IACX,MAAM2B,EAAE,GAAG/B,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC;IAAE,IAAG8B,EAAE,EAAEA,EAAE,CAAC7B,MAAM,CAAC,CAAC;IACpE,IAAGL,SAAS,CAACC,OAAO,EAAED,SAAS,CAACC,OAAO,CAACkC,SAAS,GAAG,EAAE;EACxD,CAAC;AACH,CAAC,EAAE,CAACpC,cAAc,EAAEF,QAAQ,CAACC,aAAa,EAAEsC,SAAS,EAAEpC,SAAS,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}