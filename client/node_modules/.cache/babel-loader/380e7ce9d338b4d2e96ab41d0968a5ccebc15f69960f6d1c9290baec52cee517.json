{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan\\\\Desktop\\\\henkes-stoffzauber\\\\henkes-stoffzauber-projekt\\\\client\\\\src\\\\components\\\\Shop.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useCart } from './CartContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3001/api/products';\nconst BACKEND_URL = 'http://localhost:3001';\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/400x400/CCCCCC/333333?text=Stoffmuster\";\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('adminToken');\n  return token ? {\n    Authorization: `Bearer ${token}`\n  } : {};\n};\nconst getImageUrl = imagePath => {\n  if (imagePath && imagePath.startsWith('/uploads/')) return `${BACKEND_URL}${imagePath}`;\n  return imagePath || FALLBACK_IMAGE_URL;\n};\nconst ProductCard = ({\n  product\n}) => {\n  _s();\n  const {\n    addToCart\n  } = useCart();\n  const isInStock = product.stock > 0;\n  const handleAddToCart = e => {\n    e.preventDefault();\n    if (isInStock) addToCart(product, 1);\n  };\n  return /*#__PURE__*/_jsxDEV(Link, {\n    to: `/shop/${product.id}`,\n    style: {\n      textDecoration: 'none',\n      color: 'inherit'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: getImageUrl(product.imageUrl),\n        alt: product.name,\n        onError: e => {\n          e.target.onerror = null;\n          e.target.src = FALLBACK_IMAGE_URL;\n        },\n        className: \"carousel-image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontWeight: 'bold',\n            color: 'var(--farbe-akzent)'\n          },\n          children: [\"\\u20AC \", product.price.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: isInStock ? 'green' : 'red',\n            fontWeight: 'bold'\n          },\n          children: isInStock ? 'Sofort verfügbar' : 'Ausverkauft'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddToCart,\n          disabled: !isInStock,\n          style: {\n            backgroundColor: isInStock ? 'var(--farbe-primär)' : '#aaa'\n          },\n          children: isInStock ? 'In den Warenkorb (1)' : 'Nicht lieferbar'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductCard, \"YPx5musMedcmtt2OkzMtHcKllYw=\", false, function () {\n  return [useCart];\n});\n_c = ProductCard;\nconst Shop = () => {\n  _s2();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const res = await fetch(API_URL, {\n          headers: getAuthHeaders()\n        });\n        if (!res.ok) throw new Error(`Netzwerkfehler: ${res.status}`);\n        const data = await res.json();\n        setProducts(data);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProducts();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      textAlign: 'center',\n      padding: '50px'\n    },\n    children: \"Shop wird geladen...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      textAlign: 'center',\n      color: 'red',\n      padding: '50px',\n      fontWeight: 'bold'\n    },\n    children: [\"Fehler: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: '1200px',\n      margin: '50px auto',\n      padding: '0 20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: 'center',\n        color: 'var(--farbe-primär)',\n        marginBottom: '40px'\n      },\n      children: \"Alle Stoffe & Zubeh\\xF6r\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), products.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        color: '#666',\n        padding: '50px'\n      },\n      children: \"Der Shop ist momentan leer. Bitte f\\xFCgen Sie Produkte \\xFCber das Admin Dashboard hinzu.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-grid\",\n      children: products.map(p => /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: p\n      }, p.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 30\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s2(Shop, \"3+N/VFIgZOBgubN9oS5aTzm2qqY=\");\n_c2 = Shop;\nexport default Shop;\nvar _c, _c2;\n$RefreshReg$(_c, \"ProductCard\");\n$RefreshReg$(_c2, \"Shop\");","map":{"version":3,"names":["React","useState","useEffect","Link","useCart","jsxDEV","_jsxDEV","API_URL","BACKEND_URL","FALLBACK_IMAGE_URL","getAuthHeaders","token","localStorage","getItem","Authorization","getImageUrl","imagePath","startsWith","ProductCard","product","_s","addToCart","isInStock","stock","handleAddToCart","e","preventDefault","to","id","style","textDecoration","color","children","className","src","imageUrl","alt","name","onError","target","onerror","fileName","_jsxFileName","lineNumber","columnNumber","padding","fontWeight","price","toFixed","onClick","disabled","backgroundColor","_c","Shop","_s2","products","setProducts","loading","setLoading","error","setError","fetchProducts","res","fetch","headers","ok","Error","status","data","json","err","message","textAlign","maxWidth","margin","marginBottom","length","map","p","_c2","$RefreshReg$"],"sources":["C:/Users/Stefan/Desktop/henkes-stoffzauber/henkes-stoffzauber-projekt/client/src/components/Shop.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useCart } from './CartContext';\r\n\r\nconst API_URL = 'http://localhost:3001/api/products';\r\nconst BACKEND_URL = 'http://localhost:3001';\r\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/400x400/CCCCCC/333333?text=Stoffmuster\";\r\n\r\nconst getAuthHeaders = () => {\r\n  const token = localStorage.getItem('adminToken');\r\n  return token ? { Authorization: `Bearer ${token}` } : {};\r\n};\r\n\r\nconst getImageUrl = (imagePath) => {\r\n  if (imagePath && imagePath.startsWith('/uploads/')) return `${BACKEND_URL}${imagePath}`;\r\n  return imagePath || FALLBACK_IMAGE_URL;\r\n};\r\n\r\nconst ProductCard = ({ product }) => {\r\n  const { addToCart } = useCart();\r\n  const isInStock = product.stock > 0;\r\n\r\n  const handleAddToCart = e => { e.preventDefault(); if (isInStock) addToCart(product, 1); };\r\n\r\n  return (\r\n    <Link to={`/shop/${product.id}`} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n      <div className=\"product-card\">\r\n        <img src={getImageUrl(product.imageUrl)} alt={product.name} onError={e => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }} className=\"carousel-image\" />\r\n        <div style={{ padding: '15px' }}>\r\n          <h3>{product.name}</h3>\r\n          <p style={{ fontWeight:'bold', color:'var(--farbe-akzent)'}}>€ {product.price.toFixed(2)}</p>\r\n          <p style={{ color: isInStock ? 'green' : 'red', fontWeight:'bold' }}>{isInStock ? 'Sofort verfügbar' : 'Ausverkauft'}</p>\r\n          <button onClick={handleAddToCart} disabled={!isInStock} style={{ backgroundColor: isInStock ? 'var(--farbe-primär)' : '#aaa' }}>\r\n            {isInStock ? 'In den Warenkorb (1)' : 'Nicht lieferbar'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nconst Shop = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const res = await fetch(API_URL, { headers: getAuthHeaders() });\r\n        if (!res.ok) throw new Error(`Netzwerkfehler: ${res.status}`);\r\n        const data = await res.json();\r\n        setProducts(data);\r\n      } catch (err) { setError(err.message); }\r\n      finally { setLoading(false); }\r\n    };\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  if (loading) return <p style={{textAlign:'center',padding:'50px'}}>Shop wird geladen...</p>;\r\n  if (error) return <p style={{textAlign:'center',color:'red',padding:'50px', fontWeight:'bold'}}>Fehler: {error}</p>;\r\n\r\n  return (\r\n    <div style={{ maxWidth:'1200px', margin:'50px auto', padding:'0 20px' }}>\r\n      <h1 style={{ textAlign:'center', color:'var(--farbe-primär)', marginBottom:'40px' }}>Alle Stoffe & Zubehör</h1>\r\n      {products.length === 0 ? (\r\n        <p style={{ textAlign:'center', color:'#666', padding:'50px' }}>Der Shop ist momentan leer. Bitte fügen Sie Produkte über das Admin Dashboard hinzu.</p>\r\n      ) : (\r\n        <div className=\"product-grid\">\r\n          {products.map(p => <ProductCard key={p.id} product={p} />)}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}