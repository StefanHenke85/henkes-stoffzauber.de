{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan\\\\Desktop\\\\henkes-stoffzauber\\\\henkes-stoffzauber-projekt\\\\client\\\\src\\\\AdminDashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// client/src/components/AdminDashboard.js\nimport React, { useState, useEffect, useMemo } from 'react';\n\n// =========================================================================\n// BEGINN: EINGEFÜGTER CODE VON ProductForm.js \n// =========================================================================\n\n// Hilfsfunktion für den initialen Zustand des Produktformulars\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getInitialState = productToEdit => productToEdit || {\n  name: '',\n  description: '',\n  price: 0,\n  stock: 0,\n  isFeatured: false,\n  imageFile: null,\n  imageUrl: '',\n  fabricId: ''\n};\n\n// --- Komponente: Produktformular (ProductForm) ---\nconst ProductForm = ({\n  productToEdit,\n  onSubmit,\n  onCancel,\n  fabrics\n}) => {\n  _s();\n  // FIX: useMemo behebt die ESLint-Warnung\n  const initialState = useMemo(() => getInitialState(productToEdit), [productToEdit]);\n\n  // Zustand für das Formular\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!productToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    // Setzt das Formular zurück, wenn ein neues oder kein Produkt zum Bearbeiten übergeben wird\n    setFormData(initialState);\n    setIsEditing(!!productToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, productToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    setFormData(prev => ({\n      ...prev,\n      imageFile: file,\n      imageUrl: '' // Löscht alte URL, wenn eine neue Datei ausgewählt wird\n    }));\n    if (file) {\n      setPreviewImage(URL.createObjectURL(file));\n    } else {\n      setPreviewImage(formData.imageUrl || null);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!formData.name || formData.price <= 0 || formData.stock < 0) {\n      alert(\"Bitte füllen Sie alle erforderlichen Felder korrekt aus (Name, Preis > 0, Bestand >= 0).\");\n      return;\n    }\n\n    // Ruft die onSubmit-Funktion des AdminDashboard auf\n    onSubmit(formData, isEditing);\n  };\n  const getImageUrl = imagePath => {\n    // Wenn der Pfad mit '/uploads/' beginnt, muss die Basis-URL hinzugefügt werden\n    if (imagePath && imagePath.startsWith('/uploads/')) {\n      return `http://localhost:3001${imagePath}`;\n    }\n    return imagePath;\n  };\n\n  // Fallback-Bild\n  const FALLBACK_IMAGE = \"https://placehold.co/100x100/eee/333?text=Bild\";\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"admin-form-title\",\n      children: isEditing ? `Produkt bearbeiten: ${formData.name}` : 'Neues Produkt hinzufügen'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: \"Produktname:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleChange,\n        placeholder: \"z.B. Gestrickte Beanie-M\\xFCtze\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Beschreibung:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        rows: \"4\",\n        placeholder: \"Eine kuschelige M\\xFCtze aus Bio-Baumwolle...\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          children: \"Preis (\\u20AC):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"price\",\n          name: \"price\",\n          value: formData.price,\n          onChange: handleChange,\n          min: \"0.01\",\n          step: \"0.01\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"stock\",\n          children: \"Bestand:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"stock\",\n          name: \"stock\",\n          value: formData.stock,\n          onChange: handleChange,\n          min: \"0\",\n          step: \"1\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricId\",\n        children: \"Zugeh\\xF6riger Stoff (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"fabricId\",\n        name: \"fabricId\",\n        value: formData.fabricId,\n        onChange: handleChange,\n        disabled: !fabrics || fabrics.length === 0,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Kein Stoff zugeordnet --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this), fabrics && fabrics.map(fabric => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: fabric.id,\n          children: fabric.name\n        }, fabric.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), (!fabrics || fabrics.length === 0) && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#F97316',\n          fontSize: '0.9em',\n          marginTop: '5px'\n        },\n        children: \"Bitte zuerst Stoffe in der Stoffverwaltung anlegen.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      style: {\n        display: 'flex',\n        gap: '20px',\n        alignItems: 'flex-start'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"imageFile\",\n          children: \"Produktbild hochladen:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"imageFile\",\n          name: \"imageFile\",\n          onChange: handleFileChange,\n          accept: \"image/*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), isEditing && formData.imageUrl && !formData.imageFile && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '0.8em',\n            color: '#666',\n            marginTop: '5px'\n          },\n          children: \"Aktuelles Bild wird verwendet. Neues Bild \\xFCberschreibt es.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 0,\n          border: '1px solid #ddd',\n          borderRadius: '8px',\n          padding: '5px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: previewImage ? getImageUrl(previewImage) : FALLBACK_IMAGE,\n          alt: \"Vorschau\",\n          style: {\n            width: '100px',\n            height: '100px',\n            objectFit: 'cover',\n            borderRadius: '4px'\n          },\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = FALLBACK_IMAGE;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }, this), previewImage && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '0.7em',\n            textAlign: 'center',\n            margin: '5px 0 0'\n          },\n          children: \"Vorschau\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"isFeatured\",\n        name: \"isFeatured\",\n        checked: formData.isFeatured,\n        onChange: handleChange,\n        style: {\n          width: '20px',\n          height: '20px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"isFeatured\",\n        style: {\n          margin: 0,\n          fontWeight: 'normal',\n          cursor: 'pointer'\n        },\n        children: \"Als \\\"Featured Product\\\" auf der Startseite anzeigen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        children: isEditing ? 'Änderungen speichern' : 'Produkt erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen (Zur\\xFCck zur Erstellung)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n\n// =========================================================================\n// ENDE: EINGEFÜGTER CODE VON ProductForm.js\n// =========================================================================\n_s(ProductForm, \"mG0AgEOCBf3MhewyjwhcE6TaBHs=\");\n_c = ProductForm;\nconst API_URL = 'http://localhost:3001/api/products';\nconst FABRICS_API_URL = 'http://localhost:3001/api/fabrics';\nconst FALLBACK_IMAGE_PRODUCT = \"https://placehold.co/50x50/eee/333?text=Prod\"; // Fallback für Produkte\nconst FALLBACK_IMAGE_FABRIC = \"https://placehold.co/50x50/F2D7D5/4F3C3C?text=Stoff\"; // NEU: Fallback für Stoffe\n\n// FIX: Diese Funktion stellt sicher, dass /uploads/ Pfade die Server-URL erhalten\nconst getImageUrl = (imagePath, isFabric = false) => {\n  // Fallback-Bild basierend auf dem Typ\n  const fallback = isFabric ? FALLBACK_IMAGE_FABRIC : FALLBACK_IMAGE_PRODUCT;\n\n  // Wenn der Pfad mit '/uploads/' beginnt, muss die Basis-URL hinzugefügt werden\n  if (imagePath && imagePath.startsWith('/uploads/')) {\n    return `http://localhost:3001${imagePath}`;\n  }\n  // Handhabt externe URLs (wie placehold.co) oder defekte Pfade\n  return imagePath || fallback;\n};\n\n// --- Komponente: Produktliste ---\nconst AdminProductList = ({\n  products,\n  onEdit,\n  onDelete,\n  fabrics\n}) => {\n  // Hilfsfunktion, um den Namen des Stoffs anhand der ID zu finden\n  const getFabricName = fabricId => {\n    const fabric = fabrics.find(f => f.id === fabricId);\n    return fabric ? fabric.name : 'Kein Stoff zugeordnet';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-list-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: '1.5em',\n        color: 'var(--farbe-text)',\n        margin: '0 0 20px 0'\n      },\n      children: [\"Alle Produkte im System (\", products.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }, this), products.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: '#666'\n      },\n      children: \"Keine Produkte gefunden. Erstellen Sie das erste Produkt.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"admin-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Bild\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Stoff\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Preis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Bestand\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Aktionen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: products.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: getImageUrl(product.imageUrl),\n              alt: product.name,\n              style: {\n                width: '50px',\n                height: '50px',\n                objectFit: 'cover',\n                borderRadius: '4px'\n              },\n              onError: e => {\n                e.target.onerror = null;\n                e.target.src = FALLBACK_IMAGE_PRODUCT;\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              fontSize: '0.8em',\n              color: '#888'\n            },\n            children: product.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              fontWeight: '600'\n            },\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              fontSize: '0.9em',\n              color: '#0369A1'\n            },\n            children: getFabricName(product.fabricId)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"\\u20AC \", product.price.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: product.stock < 5 ? 'var(--farbe-rot)' : 'var(--farbe-gruen)',\n                fontWeight: 'bold'\n              },\n              children: product.stock\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"admin-button admin-button-edit\",\n              onClick: () => onEdit(product),\n              children: \"Bearbeiten\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"admin-button admin-button-delete\",\n              onClick: () => onDelete(product.id, product.name),\n              children: \"L\\xF6schen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 33\n          }, this)]\n        }, product.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Komponente: Stoff-Formular (FabricForm) ---\n_c2 = AdminProductList;\nconst FabricForm = ({\n  onAdd,\n  onCancel\n}) => {\n  _s2();\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [imageFile, setImageFile] = useState(null); // NEU: Zustand für Datei-Objekt\n  const [previewImage, setPreviewImage] = useState(null); // NEU: Zustand für die Vorschau-URL\n\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    setImageFile(file);\n\n    // Temporäre URL für die Vorschau erstellen\n    if (file) {\n      setPreviewImage(URL.createObjectURL(file));\n    } else {\n      setPreviewImage(null);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!name) {\n      alert(\"Der Stoffname darf nicht leer sein.\");\n      return;\n    }\n\n    // NEU: FormData für den Upload der Datei verwenden\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('description', description);\n    if (imageFile) {\n      formData.append('image', imageFile); // 'image' ist der Feldname für das Backend\n    }\n    onAdd(formData);\n\n    // Formular zurücksetzen\n    setName('');\n    setDescription('');\n    setImageFile(null);\n    setPreviewImage(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"admin-form-title\",\n      children: \"Neuen Stoff hinzuf\\xFCgen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricName\",\n        children: \"Stoffname:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"fabricName\",\n        value: name,\n        onChange: e => setName(e.target.value),\n        placeholder: \"z.B. Bio-Baumwoll-Jersey\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricDescription\",\n        children: \"Beschreibung (Optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"fabricDescription\",\n        value: description,\n        onChange: e => setDescription(e.target.value),\n        rows: \"2\",\n        placeholder: \"z.B. Elastischer, atmungsaktiver Stoff, GOTS-zertifiziert.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      style: {\n        display: 'flex',\n        gap: '20px',\n        alignItems: 'flex-start'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fabricImageFile\",\n          children: \"Stoffbild hochladen (Optional):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"fabricImageFile\",\n          name: \"fabricImageFile\",\n          onChange: handleFileChange,\n          accept: \"image/*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 0,\n          border: '1px solid #ddd',\n          borderRadius: '8px',\n          padding: '5px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: previewImage || FALLBACK_IMAGE_FABRIC,\n          alt: \"Stoff-Vorschau\",\n          style: {\n            width: '100px',\n            height: '100px',\n            objectFit: 'cover',\n            borderRadius: '4px'\n          },\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = FALLBACK_IMAGE_FABRIC;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 21\n        }, this), previewImage && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '0.7em',\n            textAlign: 'center',\n            margin: '5px 0 0'\n          },\n          children: \"Vorschau\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"admin-form-submit-button\",\n      style: {\n        width: 'auto',\n        padding: '10px 20px',\n        marginRight: '10px'\n      },\n      children: \"Stoff speichern\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 378,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Komponente: Stoff-Liste ---\n_s2(FabricForm, \"aCha5cpiokDaDjKVPDJjHjqU73g=\");\n_c3 = FabricForm;\nconst AdminFabricList = ({\n  fabrics,\n  onDelete\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-list-container\",\n    style: {\n      marginTop: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: '1.5em',\n        color: 'var(--farbe-text)',\n        margin: '0 0 20px 0'\n      },\n      children: [\"Verf\\xFCgbare Stoffe (\", fabrics.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 13\n    }, this), fabrics.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: '#666'\n      },\n      children: \"Keine Stoffe definiert.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"admin-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Bild\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 29\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Stoffname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Beschreibung\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Aktionen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: fabrics.map(fabric => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: getImageUrl(fabric.imageUrl, true) // 'true' signalisiert Fabric-Typ für Fallback\n              ,\n              alt: fabric.name,\n              style: {\n                width: '50px',\n                height: '50px',\n                objectFit: 'cover',\n                borderRadius: '4px'\n              },\n              onError: e => {\n                e.target.onerror = null;\n                e.target.src = FALLBACK_IMAGE_FABRIC;\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              fontWeight: '600'\n            },\n            children: fabric.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              fontSize: '0.9em',\n              color: '#555'\n            },\n            children: fabric.description || '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"admin-button admin-button-delete\",\n              onClick: () => onDelete(fabric.id, fabric.name),\n              style: {\n                padding: '5px 10px'\n              },\n              children: \"L\\xF6schen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 33\n          }, this)]\n        }, fabric.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 441,\n    columnNumber: 9\n  }, this);\n};\n\n// --- HAUPTKOMPONENTE: AdminDashboard ---\n_c4 = AdminFabricList;\nconst AdminDashboard = () => {\n  _s3();\n  const [products, setProducts] = useState([]);\n  const [fabrics, setFabrics] = useState([]);\n  const [currentProduct, setCurrentProduct] = useState(null);\n  const [statusMessage, setStatusMessage] = useState({\n    text: '',\n    type: ''\n  });\n\n  // Status-Nachricht anzeigen und verstecken\n  const displayStatus = (text, type = 'success') => {\n    setStatusMessage({\n      text,\n      type\n    });\n    const timer = setTimeout(() => {\n      setStatusMessage({\n        text: '',\n        type: ''\n      });\n    }, 5000);\n    return () => clearTimeout(timer);\n  };\n\n  // 1a. Produkte vom Backend abrufen\n  const fetchProducts = async () => {\n    try {\n      const response = await fetch(API_URL);\n      if (!response.ok) {\n        throw new Error('Netzwerkantwort war nicht erfolgreich');\n      }\n      const data = await response.json();\n      setProducts(data);\n    } catch (error) {\n      console.error('Fehler beim Abrufen der Produkte:', error);\n      displayStatus(`Fehler beim Laden der Produkte: ${error.message}`, 'error');\n    }\n  };\n\n  // 1b. Stoffe vom Backend abrufen\n  const fetchFabrics = async () => {\n    try {\n      const response = await fetch(FABRICS_API_URL);\n      if (!response.ok) {\n        throw new Error('Netzwerkantwort war nicht erfolgreich');\n      }\n      const data = await response.json();\n      setFabrics(data);\n    } catch (error) {\n      console.error('Fehler beim Abrufen der Stoffe:', error);\n      displayStatus(`Fehler beim Laden der Stoffe: ${error.message}`, 'error');\n    }\n  };\n\n  // Beim ersten Rendern Produkte und Stoffe laden\n  useEffect(() => {\n    fetchProducts();\n    fetchFabrics();\n  }, []);\n\n  // 2. Produkt erstellen/aktualisieren (POST/PUT)\n  const handleProductSubmit = async (formData, isEditing) => {\n    const method = isEditing ? 'PUT' : 'POST';\n    const url = isEditing ? `${API_URL}/${formData.id}` : API_URL;\n\n    // Erstellt das FormData-Objekt für den Dateiupload\n    const data = new FormData();\n\n    // Alle Textfelder anhängen\n    for (const key in formData) {\n      if (key !== 'imageFile' && key !== 'imageUrl') {\n        data.append(key, String(formData[key]));\n      }\n    }\n\n    // Bilddatei anhängen, falls vorhanden\n    if (formData.imageFile) {\n      data.append('image', formData.imageFile);\n    }\n    try {\n      const response = await fetch(url, {\n        method: method,\n        // Header NICHT manuell setzen bei FormData\n        body: data\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || `HTTP Fehler: ${response.status}`);\n      }\n      await fetchProducts();\n      setCurrentProduct(null);\n      displayStatus(`Produkt erfolgreich ${isEditing ? 'aktualisiert' : 'erstellt'}!`, 'success');\n    } catch (error) {\n      console.error('Fehler beim Speichern des Produkts:', error);\n      displayStatus(`Fehler beim Speichern: ${error.message}`, 'error');\n    }\n  };\n\n  // 3. Produkt löschen (DELETE) \n  const handleDelete = async (id, name) => {\n    if (window.confirm(`Sind Sie sicher, dass Sie das Produkt \"${name}\" löschen möchten?`)) {\n      try {\n        const response = await fetch(`${API_URL}/${id}`, {\n          method: 'DELETE'\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP Fehler: ${response.status}`);\n        }\n        await fetchProducts();\n        displayStatus(`Produkt \"${name}\" erfolgreich gelöscht.`, 'info');\n        if (currentProduct && currentProduct.id === id) {\n          setCurrentProduct(null);\n        }\n      } catch (error) {\n        console.error('Fehler beim Löschen des Produkts:', error);\n        displayStatus(`Fehler beim Löschen: ${error.message}`, 'error');\n      }\n    }\n  };\n\n  // 4. Produkt zur Bearbeitung auswählen\n  const handleEdit = product => {\n    setCurrentProduct(product);\n    displayStatus(`Produkt: ${product.name} zur Bearbeitung geladen.`, 'info');\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  // Bearbeitungsmodus abbrechen \n  const handleCancelEdit = () => {\n    setCurrentProduct(null);\n    setStatusMessage({\n      text: '',\n      type: ''\n    });\n  };\n\n  // 5. NEU: Stoff hinzufügen (verwendet FormData)\n  const handleAddFabric = async formData => {\n    try {\n      // formData wird direkt gesendet, da es die Datei enthält\n      const response = await fetch(FABRICS_API_URL, {\n        method: 'POST',\n        body: formData // Kein Content-Type Header setzen, wenn FormData verwendet wird\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || `HTTP Fehler: ${response.status}`);\n      }\n\n      // Annahme: Das Backend gibt den erstellten Stoff zurück\n      const newFabric = await response.json();\n      await fetchFabrics(); // Stoffe neu laden\n      displayStatus(`Stoff \"${newFabric.name}\" erfolgreich hinzugefügt!`, 'success');\n    } catch (error) {\n      console.error('Fehler beim Hinzufügen des Stoffs:', error);\n      displayStatus(`Fehler beim Speichern des Stoffs: ${error.message}`, 'error');\n    }\n  };\n\n  // 6. Stoff löschen\n  const handleDeleteFabric = async (id, name) => {\n    if (window.confirm(`Sind Sie sicher, dass Sie den Stoff \"${name}\" löschen möchten?`)) {\n      try {\n        const response = await fetch(`${FABRICS_API_URL}/${id}`, {\n          method: 'DELETE'\n        });\n        if (!response.ok) {\n          const errorData = await response.json();\n          if (response.status === 409) {\n            throw new Error(`Stoff kann nicht gelöscht werden, da er noch in Produkten verwendet wird. (${errorData.message || 'Konflikt'})`);\n          }\n          throw new Error(`HTTP Fehler: ${response.status}`);\n        }\n        await fetchFabrics();\n        displayStatus(`Stoff \"${name}\" erfolgreich gelöscht.`, 'info');\n      } catch (error) {\n        console.error('Fehler beim Löschen des Stoffs:', error);\n        displayStatus(`Fehler beim Löschen: ${error.message}`, 'error');\n      }\n    }\n  };\n\n  // Helferfunktion zur Bestimmung der Status-Klasse\n  const getStatusClass = () => {\n    if (!statusMessage.text) return '';\n    if (statusMessage.type === 'error') return 'status-message-error';\n    if (statusMessage.type === 'success') return 'status-message-success';\n    if (statusMessage.type === 'info') return 'status-message-info';\n    return '';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-dashboard-container\",\n    children: [statusMessage.text && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `status-message ${getStatusClass()}`,\n      children: statusMessage.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-dashboard-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(ProductForm, {\n          productToEdit: currentProduct,\n          onSubmit: handleProductSubmit,\n          onCancel: handleCancelEdit,\n          fabrics: fabrics\n        }, currentProduct ? currentProduct.id : 'new', false, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(AdminProductList, {\n          products: products,\n          onEdit: handleEdit,\n          onDelete: handleDelete,\n          fabrics: fabrics\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 714,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '40px',\n        borderTop: '2px solid var(--farbe-grau)',\n        paddingTop: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'var(--farbe-primär)',\n          marginBottom: '30px',\n          fontSize: '1.8em'\n        },\n        children: \"Stoff-Inventar-Verwaltung\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 731,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FabricForm, {\n        onAdd: handleAddFabric\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 736,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AdminFabricList, {\n        fabrics: fabrics,\n        onDelete: handleDeleteFabric\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 690,\n    columnNumber: 9\n  }, this);\n};\n_s3(AdminDashboard, \"SfOJpeEz90HNaxbmnfkrWrXlRZ0=\");\n_c5 = AdminDashboard;\nexport default AdminDashboard;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"ProductForm\");\n$RefreshReg$(_c2, \"AdminProductList\");\n$RefreshReg$(_c3, \"FabricForm\");\n$RefreshReg$(_c4, \"AdminFabricList\");\n$RefreshReg$(_c5, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","jsxDEV","_jsxDEV","getInitialState","productToEdit","name","description","price","stock","isFeatured","imageFile","imageUrl","fabricId","ProductForm","onSubmit","onCancel","fabrics","_s","initialState","formData","setFormData","isEditing","setIsEditing","previewImage","setPreviewImage","handleChange","e","value","type","checked","target","prev","handleFileChange","file","files","URL","createObjectURL","handleSubmit","preventDefault","alert","getImageUrl","imagePath","startsWith","FALLBACK_IMAGE","className","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","onChange","placeholder","required","rows","style","display","gap","flex","min","step","disabled","length","map","fabric","color","fontSize","marginTop","alignItems","accept","border","borderRadius","padding","src","alt","width","height","objectFit","onError","onerror","textAlign","margin","fontWeight","cursor","paddingTop","borderTop","onClick","backgroundColor","_c","API_URL","FABRICS_API_URL","FALLBACK_IMAGE_PRODUCT","FALLBACK_IMAGE_FABRIC","isFabric","fallback","AdminProductList","products","onEdit","onDelete","getFabricName","find","f","product","toFixed","_c2","FabricForm","onAdd","_s2","setName","setDescription","setImageFile","FormData","append","marginRight","_c3","AdminFabricList","_c4","AdminDashboard","_s3","setProducts","setFabrics","currentProduct","setCurrentProduct","statusMessage","setStatusMessage","text","displayStatus","timer","setTimeout","clearTimeout","fetchProducts","response","fetch","ok","Error","data","json","error","console","message","fetchFabrics","handleProductSubmit","method","url","key","String","body","errorData","status","handleDelete","window","confirm","handleEdit","scrollTo","top","behavior","handleCancelEdit","handleAddFabric","newFabric","handleDeleteFabric","getStatusClass","marginBottom","_c5","$RefreshReg$"],"sources":["C:/Users/Stefan/Desktop/henkes-stoffzauber/henkes-stoffzauber-projekt/client/src/AdminDashboard.js"],"sourcesContent":["// client/src/components/AdminDashboard.js\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\n\r\n// =========================================================================\r\n// BEGINN: EINGEFÜGTER CODE VON ProductForm.js \r\n// =========================================================================\r\n\r\n// Hilfsfunktion für den initialen Zustand des Produktformulars\r\nconst getInitialState = (productToEdit) => productToEdit || {\r\n    name: '',\r\n    description: '',\r\n    price: 0,\r\n    stock: 0,\r\n    isFeatured: false,\r\n    imageFile: null,\r\n    imageUrl: '',\r\n    fabricId: '', \r\n};\r\n\r\n// --- Komponente: Produktformular (ProductForm) ---\r\nconst ProductForm = ({ productToEdit, onSubmit, onCancel, fabrics }) => {\r\n    \r\n    // FIX: useMemo behebt die ESLint-Warnung\r\n    const initialState = useMemo(() => getInitialState(productToEdit), [productToEdit]);\r\n    \r\n    // Zustand für das Formular\r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!productToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n\r\n    useEffect(() => {\r\n        // Setzt das Formular zurück, wenn ein neues oder kein Produkt zum Bearbeiten übergeben wird\r\n        setFormData(initialState);\r\n        setIsEditing(!!productToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, productToEdit]); \r\n    \r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: type === 'checkbox' ? checked : value,\r\n        }));\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            imageFile: file,\r\n            imageUrl: '', // Löscht alte URL, wenn eine neue Datei ausgewählt wird\r\n        }));\r\n        if (file) {\r\n            setPreviewImage(URL.createObjectURL(file));\r\n        } else {\r\n            setPreviewImage(formData.imageUrl || null);\r\n        }\r\n    };\r\n    \r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!formData.name || formData.price <= 0 || formData.stock < 0) {\r\n            alert(\"Bitte füllen Sie alle erforderlichen Felder korrekt aus (Name, Preis > 0, Bestand >= 0).\"); \r\n            return;\r\n        }\r\n\r\n        // Ruft die onSubmit-Funktion des AdminDashboard auf\r\n        onSubmit(formData, isEditing);\r\n    };\r\n\r\n    const getImageUrl = (imagePath) => {\r\n        // Wenn der Pfad mit '/uploads/' beginnt, muss die Basis-URL hinzugefügt werden\r\n        if (imagePath && imagePath.startsWith('/uploads/')) {\r\n            return `http://localhost:3001${imagePath}`;\r\n        }\r\n        return imagePath;\r\n    };\r\n    \r\n    // Fallback-Bild\r\n    const FALLBACK_IMAGE = \"https://placehold.co/100x100/eee/333?text=Bild\";\r\n\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form\">\r\n            <h3 className=\"admin-form-title\">\r\n                {isEditing ? `Produkt bearbeiten: ${formData.name}` : 'Neues Produkt hinzufügen'}\r\n            </h3>\r\n\r\n            {/* Name */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"name\">Produktname:</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    placeholder=\"z.B. Gestrickte Beanie-Mütze\"\r\n                    required\r\n                />\r\n            </div>\r\n            \r\n            {/* Beschreibung */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"description\">Beschreibung:</label>\r\n                <textarea\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    rows=\"4\"\r\n                    placeholder=\"Eine kuschelige Mütze aus Bio-Baumwolle...\"\r\n                    required\r\n                ></textarea>\r\n            </div>\r\n            \r\n            {/* Preis und Bestand (nebeneinander) */}\r\n            <div style={{ display: 'flex', gap: '20px' }}>\r\n                <div className=\"admin-form-group\" style={{ flex: 1 }}>\r\n                    <label htmlFor=\"price\">Preis (€):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"price\"\r\n                        name=\"price\"\r\n                        value={formData.price}\r\n                        onChange={handleChange}\r\n                        min=\"0.01\"\r\n                        step=\"0.01\"\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"admin-form-group\" style={{ flex: 1 }}>\r\n                    <label htmlFor=\"stock\">Bestand:</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"stock\"\r\n                        name=\"stock\"\r\n                        value={formData.stock}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        step=\"1\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Stoffauswahl */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricId\">Zugehöriger Stoff (optional):</label>\r\n                <select\r\n                    id=\"fabricId\"\r\n                    name=\"fabricId\"\r\n                    value={formData.fabricId}\r\n                    onChange={handleChange}\r\n                    disabled={!fabrics || fabrics.length === 0} \r\n                >\r\n                    <option value=\"\">-- Kein Stoff zugeordnet --</option>\r\n                    {fabrics && fabrics.map(fabric => (\r\n                        <option key={fabric.id} value={fabric.id}>\r\n                            {fabric.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n                {(!fabrics || fabrics.length === 0) && (\r\n                    <p style={{ color: '#F97316', fontSize: '0.9em', marginTop: '5px' }}>\r\n                        Bitte zuerst Stoffe in der Stoffverwaltung anlegen.\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Bild-Upload und Vorschau */}\r\n            <div className=\"admin-form-group\" style={{ display: 'flex', gap: '20px', alignItems: 'flex-start' }}>\r\n                <div style={{ flex: 1 }}>\r\n                    <label htmlFor=\"imageFile\">Produktbild hochladen:</label>\r\n                    <input\r\n                        type=\"file\"\r\n                        id=\"imageFile\"\r\n                        name=\"imageFile\"\r\n                        onChange={handleFileChange}\r\n                        accept=\"image/*\"\r\n                    />\r\n                    {(isEditing && formData.imageUrl && !formData.imageFile) && (\r\n                        <p style={{ fontSize: '0.8em', color: '#666', marginTop: '5px' }}>\r\n                            Aktuelles Bild wird verwendet. Neues Bild überschreibt es.\r\n                        </p>\r\n                    )}\r\n                </div>\r\n                <div style={{ flex: 0, border: '1px solid #ddd', borderRadius: '8px', padding: '5px' }}>\r\n                    <img \r\n                        src={previewImage ? getImageUrl(previewImage) : FALLBACK_IMAGE}\r\n                        alt=\"Vorschau\"\r\n                        style={{ width: '100px', height: '100px', objectFit: 'cover', borderRadius: '4px' }}\r\n                        onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE; }}\r\n                    />\r\n                    {previewImage && (\r\n                        <p style={{ fontSize: '0.7em', textAlign: 'center', margin: '5px 0 0' }}>Vorschau</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"admin-form-group\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"isFeatured\"\r\n                    name=\"isFeatured\"\r\n                    checked={formData.isFeatured}\r\n                    onChange={handleChange}\r\n                    style={{ width: '20px', height: '20px' }}\r\n                />\r\n                <label htmlFor=\"isFeatured\" style={{ margin: 0, fontWeight: 'normal', cursor: 'pointer' }}>\r\n                    Als \"Featured Product\" auf der Startseite anzeigen\r\n                </label>\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\">\r\n                    {isEditing ? 'Änderungen speichern' : 'Produkt erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen (Zurück zur Erstellung)\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n\r\n// =========================================================================\r\n// ENDE: EINGEFÜGTER CODE VON ProductForm.js\r\n// =========================================================================\r\n\r\n\r\nconst API_URL = 'http://localhost:3001/api/products';\r\nconst FABRICS_API_URL = 'http://localhost:3001/api/fabrics'; \r\nconst FALLBACK_IMAGE_PRODUCT = \"https://placehold.co/50x50/eee/333?text=Prod\"; // Fallback für Produkte\r\nconst FALLBACK_IMAGE_FABRIC = \"https://placehold.co/50x50/F2D7D5/4F3C3C?text=Stoff\"; // NEU: Fallback für Stoffe\r\n\r\n\r\n// FIX: Diese Funktion stellt sicher, dass /uploads/ Pfade die Server-URL erhalten\r\nconst getImageUrl = (imagePath, isFabric = false) => {\r\n    // Fallback-Bild basierend auf dem Typ\r\n    const fallback = isFabric ? FALLBACK_IMAGE_FABRIC : FALLBACK_IMAGE_PRODUCT;\r\n    \r\n    // Wenn der Pfad mit '/uploads/' beginnt, muss die Basis-URL hinzugefügt werden\r\n    if (imagePath && imagePath.startsWith('/uploads/')) {\r\n        return `http://localhost:3001${imagePath}`;\r\n    }\r\n    // Handhabt externe URLs (wie placehold.co) oder defekte Pfade\r\n    return imagePath || fallback; \r\n};\r\n\r\n\r\n// --- Komponente: Produktliste ---\r\nconst AdminProductList = ({ products, onEdit, onDelete, fabrics }) => {\r\n    \r\n    // Hilfsfunktion, um den Namen des Stoffs anhand der ID zu finden\r\n    const getFabricName = (fabricId) => {\r\n        const fabric = fabrics.find(f => f.id === fabricId);\r\n        return fabric ? fabric.name : 'Kein Stoff zugeordnet';\r\n    };\r\n\r\n    return (\r\n        <div className=\"admin-list-container\">\r\n            <h2 style={{ fontSize: '1.5em', color: 'var(--farbe-text)', margin: '0 0 20px 0' }}>\r\n                Alle Produkte im System ({products.length})\r\n            </h2>\r\n            {products.length === 0 ? (\r\n                <p style={{ color: '#666' }}>Keine Produkte gefunden. Erstellen Sie das erste Produkt.</p>\r\n            ) : (\r\n                <table className=\"admin-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Bild</th>\r\n                            <th>ID</th>\r\n                            <th>Name</th>\r\n                            <th>Stoff</th> \r\n                            <th>Preis</th>\r\n                            <th>Bestand</th>\r\n                            <th>Aktionen</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {products.map((product) => (\r\n                            <tr key={product.id}>\r\n                                <td>\r\n                                    <img \r\n                                        src={getImageUrl(product.imageUrl)} \r\n                                        alt={product.name} \r\n                                        style={{ width: '50px', height: '50px', objectFit: 'cover', borderRadius: '4px' }}\r\n                                        onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_PRODUCT; }}\r\n                                    />\r\n                                </td>\r\n                                <td style={{ fontSize: '0.8em', color: '#888' }}>{product.id}</td>\r\n                                <td style={{ fontWeight: '600' }}>{product.name}</td>\r\n                                <td style={{ fontSize: '0.9em', color: '#0369A1' }}>{getFabricName(product.fabricId)}</td> \r\n                                <td>€ {product.price.toFixed(2)}</td>\r\n                                <td>\r\n                                    <span style={{ color: product.stock < 5 ? 'var(--farbe-rot)' : 'var(--farbe-gruen)', fontWeight: 'bold' }}>\r\n                                        {product.stock}\r\n                                    </span>\r\n                                </td>\r\n                                <td>\r\n                                    <button \r\n                                        className=\"admin-button admin-button-edit\" \r\n                                        onClick={() => onEdit(product)}\r\n                                    >\r\n                                        Bearbeiten\r\n                                    </button>\r\n                                    <button \r\n                                        className=\"admin-button admin-button-delete\" \r\n                                        onClick={() => onDelete(product.id, product.name)}\r\n                                    >\r\n                                        Löschen\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- Komponente: Stoff-Formular (FabricForm) ---\r\nconst FabricForm = ({ onAdd, onCancel }) => {\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [imageFile, setImageFile] = useState(null); // NEU: Zustand für Datei-Objekt\r\n    const [previewImage, setPreviewImage] = useState(null); // NEU: Zustand für die Vorschau-URL\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        setImageFile(file);\r\n        \r\n        // Temporäre URL für die Vorschau erstellen\r\n        if (file) {\r\n            setPreviewImage(URL.createObjectURL(file));\r\n        } else {\r\n            setPreviewImage(null);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!name) {\r\n            alert(\"Der Stoffname darf nicht leer sein.\"); \r\n            return;\r\n        }\r\n        \r\n        // NEU: FormData für den Upload der Datei verwenden\r\n        const formData = new FormData();\r\n        formData.append('name', name);\r\n        formData.append('description', description);\r\n        if (imageFile) {\r\n            formData.append('image', imageFile); // 'image' ist der Feldname für das Backend\r\n        }\r\n        \r\n        onAdd(formData);\r\n\r\n        // Formular zurücksetzen\r\n        setName('');\r\n        setDescription('');\r\n        setImageFile(null);\r\n        setPreviewImage(null);\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form\">\r\n            <h3 className=\"admin-form-title\">Neuen Stoff hinzufügen</h3>\r\n            \r\n            {/* Stoffname */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricName\">Stoffname:</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"fabricName\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    placeholder=\"z.B. Bio-Baumwoll-Jersey\"\r\n                    required\r\n                />\r\n            </div>\r\n            \r\n            {/* Beschreibung */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricDescription\">Beschreibung (Optional):</label>\r\n                <textarea\r\n                    id=\"fabricDescription\"\r\n                    value={description}\r\n                    onChange={(e) => setDescription(e.target.value)}\r\n                    rows=\"2\"\r\n                    placeholder=\"z.B. Elastischer, atmungsaktiver Stoff, GOTS-zertifiziert.\"\r\n                ></textarea>\r\n            </div>\r\n            \r\n            {/* NEU: Bild-Upload und Vorschau */}\r\n            <div className=\"admin-form-group\" style={{ display: 'flex', gap: '20px', alignItems: 'flex-start' }}>\r\n                <div style={{ flex: 1 }}>\r\n                    <label htmlFor=\"fabricImageFile\">Stoffbild hochladen (Optional):</label>\r\n                    <input\r\n                        type=\"file\"\r\n                        id=\"fabricImageFile\"\r\n                        name=\"fabricImageFile\"\r\n                        onChange={handleFileChange}\r\n                        accept=\"image/*\"\r\n                    />\r\n                </div>\r\n                <div style={{ flex: 0, border: '1px solid #ddd', borderRadius: '8px', padding: '5px' }}>\r\n                    <img \r\n                        src={previewImage || FALLBACK_IMAGE_FABRIC}\r\n                        alt=\"Stoff-Vorschau\"\r\n                        style={{ width: '100px', height: '100px', objectFit: 'cover', borderRadius: '4px' }}\r\n                        onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_FABRIC; }}\r\n                    />\r\n                    {previewImage && (\r\n                        <p style={{ fontSize: '0.7em', textAlign: 'center', margin: '5px 0 0' }}>Vorschau</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"admin-form-submit-button\" style={{ width: 'auto', padding: '10px 20px', marginRight: '10px' }}>\r\n                Stoff speichern\r\n            </button>\r\n        </form>\r\n    );\r\n};\r\n\r\n// --- Komponente: Stoff-Liste ---\r\nconst AdminFabricList = ({ fabrics, onDelete }) => {\r\n    return (\r\n        <div className=\"admin-list-container\" style={{ marginTop: '20px' }}>\r\n            <h2 style={{ fontSize: '1.5em', color: 'var(--farbe-text)', margin: '0 0 20px 0' }}>\r\n                Verfügbare Stoffe ({fabrics.length})\r\n            </h2>\r\n            {fabrics.length === 0 ? (\r\n                <p style={{ color: '#666' }}>Keine Stoffe definiert.</p>\r\n            ) : (\r\n                <table className=\"admin-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Bild</th> {/* NEU: Spalte für Bild */}\r\n                            <th>Stoffname</th>\r\n                            <th>Beschreibung</th>\r\n                            <th>Aktionen</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {fabrics.map((fabric) => (\r\n                            <tr key={fabric.id}>\r\n                                <td>\r\n                                    {/* Bildanzeige für den Stoff */}\r\n                                    <img \r\n                                        src={getImageUrl(fabric.imageUrl, true)} // 'true' signalisiert Fabric-Typ für Fallback\r\n                                        alt={fabric.name} \r\n                                        style={{ width: '50px', height: '50px', objectFit: 'cover', borderRadius: '4px' }}\r\n                                        onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_FABRIC; }}\r\n                                    />\r\n                                </td>\r\n                                <td style={{ fontWeight: '600' }}>{fabric.name}</td>\r\n                                <td style={{ fontSize: '0.9em', color: '#555' }}>{fabric.description || '-'}</td>\r\n                                <td>\r\n                                    <button \r\n                                        className=\"admin-button admin-button-delete\" \r\n                                        onClick={() => onDelete(fabric.id, fabric.name)}\r\n                                        style={{ padding: '5px 10px' }}\r\n                                    >\r\n                                        Löschen\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- HAUPTKOMPONENTE: AdminDashboard ---\r\nconst AdminDashboard = () => {\r\n    const [products, setProducts] = useState([]);\r\n    const [fabrics, setFabrics] = useState([]); \r\n    const [currentProduct, setCurrentProduct] = useState(null); \r\n    const [statusMessage, setStatusMessage] = useState({ text: '', type: '' });\r\n    \r\n    // Status-Nachricht anzeigen und verstecken\r\n    const displayStatus = (text, type = 'success') => {\r\n        setStatusMessage({ text, type });\r\n        const timer = setTimeout(() => {\r\n            setStatusMessage({ text: '', type: '' });\r\n        }, 5000); \r\n        return () => clearTimeout(timer); \r\n    };\r\n\r\n\r\n    // 1a. Produkte vom Backend abrufen\r\n    const fetchProducts = async () => {\r\n        try {\r\n            const response = await fetch(API_URL);\r\n            if (!response.ok) {\r\n                throw new Error('Netzwerkantwort war nicht erfolgreich');\r\n            }\r\n            const data = await response.json();\r\n            setProducts(data);\r\n        } catch (error) {\r\n            console.error('Fehler beim Abrufen der Produkte:', error);\r\n            displayStatus(`Fehler beim Laden der Produkte: ${error.message}`, 'error');\r\n        }\r\n    };\r\n    \r\n    // 1b. Stoffe vom Backend abrufen\r\n    const fetchFabrics = async () => {\r\n        try {\r\n            const response = await fetch(FABRICS_API_URL);\r\n            if (!response.ok) {\r\n                throw new Error('Netzwerkantwort war nicht erfolgreich');\r\n            }\r\n            const data = await response.json();\r\n            setFabrics(data);\r\n        } catch (error) {\r\n            console.error('Fehler beim Abrufen der Stoffe:', error);\r\n            displayStatus(`Fehler beim Laden der Stoffe: ${error.message}`, 'error');\r\n        }\r\n    };\r\n    \r\n    // Beim ersten Rendern Produkte und Stoffe laden\r\n    useEffect(() => {\r\n        fetchProducts();\r\n        fetchFabrics(); \r\n    }, []);\r\n\r\n    // 2. Produkt erstellen/aktualisieren (POST/PUT)\r\n    const handleProductSubmit = async (formData, isEditing) => {\r\n        const method = isEditing ? 'PUT' : 'POST';\r\n        const url = isEditing ? `${API_URL}/${formData.id}` : API_URL;\r\n        \r\n        // Erstellt das FormData-Objekt für den Dateiupload\r\n        const data = new FormData();\r\n        \r\n        // Alle Textfelder anhängen\r\n        for (const key in formData) {\r\n            if (key !== 'imageFile' && key !== 'imageUrl') {\r\n                data.append(key, String(formData[key]));\r\n            }\r\n        }\r\n\r\n        // Bilddatei anhängen, falls vorhanden\r\n        if (formData.imageFile) {\r\n            data.append('image', formData.imageFile);\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: method,\r\n                // Header NICHT manuell setzen bei FormData\r\n                body: data, \r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.message || `HTTP Fehler: ${response.status}`);\r\n            }\r\n\r\n            await fetchProducts();\r\n            \r\n            setCurrentProduct(null); \r\n            displayStatus(`Produkt erfolgreich ${isEditing ? 'aktualisiert' : 'erstellt'}!`, 'success');\r\n            \r\n        } catch (error) {\r\n            console.error('Fehler beim Speichern des Produkts:', error);\r\n            displayStatus(`Fehler beim Speichern: ${error.message}`, 'error');\r\n        }\r\n    };\r\n\r\n\r\n    // 3. Produkt löschen (DELETE) \r\n    const handleDelete = async (id, name) => {\r\n        if (window.confirm(`Sind Sie sicher, dass Sie das Produkt \"${name}\" löschen möchten?`)) { \r\n            try {\r\n                const response = await fetch(`${API_URL}/${id}`, {\r\n                    method: 'DELETE',\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP Fehler: ${response.status}`);\r\n                }\r\n\r\n                await fetchProducts();\r\n                displayStatus(`Produkt \"${name}\" erfolgreich gelöscht.`, 'info');\r\n                \r\n                if (currentProduct && currentProduct.id === id) {\r\n                    setCurrentProduct(null);\r\n                }\r\n                \r\n            } catch (error) {\r\n                console.error('Fehler beim Löschen des Produkts:', error);\r\n                displayStatus(`Fehler beim Löschen: ${error.message}`, 'error');\r\n            }\r\n        }\r\n    };\r\n    \r\n    // 4. Produkt zur Bearbeitung auswählen\r\n    const handleEdit = (product) => {\r\n        setCurrentProduct(product);\r\n        displayStatus(`Produkt: ${product.name} zur Bearbeitung geladen.`, 'info');\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    };\r\n    \r\n    // Bearbeitungsmodus abbrechen \r\n    const handleCancelEdit = () => {\r\n        setCurrentProduct(null);\r\n        setStatusMessage({ text: '', type: '' });\r\n    };\r\n\r\n\r\n    // 5. NEU: Stoff hinzufügen (verwendet FormData)\r\n    const handleAddFabric = async (formData) => {\r\n        try {\r\n            // formData wird direkt gesendet, da es die Datei enthält\r\n            const response = await fetch(FABRICS_API_URL, {\r\n                method: 'POST',\r\n                body: formData, // Kein Content-Type Header setzen, wenn FormData verwendet wird\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.message || `HTTP Fehler: ${response.status}`);\r\n            }\r\n            \r\n            // Annahme: Das Backend gibt den erstellten Stoff zurück\r\n            const newFabric = await response.json(); \r\n\r\n            await fetchFabrics(); // Stoffe neu laden\r\n            displayStatus(`Stoff \"${newFabric.name}\" erfolgreich hinzugefügt!`, 'success');\r\n            \r\n        } catch (error) {\r\n            console.error('Fehler beim Hinzufügen des Stoffs:', error);\r\n            displayStatus(`Fehler beim Speichern des Stoffs: ${error.message}`, 'error');\r\n        }\r\n    };\r\n    \r\n    // 6. Stoff löschen\r\n    const handleDeleteFabric = async (id, name) => {\r\n        if (window.confirm(`Sind Sie sicher, dass Sie den Stoff \"${name}\" löschen möchten?`)) {\r\n            try {\r\n                const response = await fetch(`${FABRICS_API_URL}/${id}`, {\r\n                    method: 'DELETE',\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    const errorData = await response.json();\r\n                    if (response.status === 409) { \r\n                         throw new Error(`Stoff kann nicht gelöscht werden, da er noch in Produkten verwendet wird. (${errorData.message || 'Konflikt'})`);\r\n                    }\r\n                    throw new Error(`HTTP Fehler: ${response.status}`);\r\n                }\r\n\r\n                await fetchFabrics();\r\n                displayStatus(`Stoff \"${name}\" erfolgreich gelöscht.`, 'info');\r\n                \r\n            } catch (error) {\r\n                console.error('Fehler beim Löschen des Stoffs:', error);\r\n                displayStatus(`Fehler beim Löschen: ${error.message}`, 'error');\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    // Helferfunktion zur Bestimmung der Status-Klasse\r\n    const getStatusClass = () => {\r\n        if (!statusMessage.text) return '';\r\n        if (statusMessage.type === 'error') return 'status-message-error';\r\n        if (statusMessage.type === 'success') return 'status-message-success';\r\n        if (statusMessage.type === 'info') return 'status-message-info';\r\n        return '';\r\n    };\r\n\r\n    return (\r\n        <div className=\"admin-dashboard-container\">\r\n            \r\n            {/* Status-Nachricht mit dynamischer CSS-Klasse */}\r\n            {statusMessage.text && (\r\n                <div className={`status-message ${getStatusClass()}`}>\r\n                    {statusMessage.text}\r\n                </div>\r\n            )}\r\n            \r\n            {/* 1. Bereich: PRODUKT-VERWALTUNG (Bestehendes Grid) */}\r\n            <div className=\"admin-dashboard-grid\">\r\n                \r\n                {/* 1. Spalte: Produktformular */}\r\n                <div>\r\n                    <ProductForm\r\n                        key={currentProduct ? currentProduct.id : 'new'} \r\n                        productToEdit={currentProduct}\r\n                        onSubmit={handleProductSubmit}\r\n                        onCancel={handleCancelEdit}\r\n                        fabrics={fabrics} \r\n                    />\r\n                </div>\r\n\r\n                {/* 2. Spalte: Produktliste */}\r\n                <div>\r\n                    <AdminProductList \r\n                        products={products}\r\n                        onEdit={handleEdit}\r\n                        onDelete={handleDelete}\r\n                        fabrics={fabrics} \r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            \r\n            {/* 2. Bereich: NEUE STOFF-VERWALTUNG (Unterhalb des Grids) */}\r\n            <div style={{ \r\n                marginTop: '40px', \r\n                borderTop: '2px solid var(--farbe-grau)', \r\n                paddingTop: '30px' \r\n            }}>\r\n                <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                    Stoff-Inventar-Verwaltung\r\n                </h1>\r\n                \r\n                {/* Stoff-Formular */}\r\n                <FabricForm onAdd={handleAddFabric} />\r\n                \r\n                {/* Stoff-Liste */}\r\n                <AdminFabricList fabrics={fabrics} onDelete={handleDeleteFabric} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}