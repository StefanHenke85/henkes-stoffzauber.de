{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan\\\\Desktop\\\\henkes-stoffzauber\\\\henkes-stoffzauber-projekt\\\\client\\\\src\\\\components\\\\ImageCarousel.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3001/api/products/featured';\nconst BACKEND_URL = 'http://localhost:3001';\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/500x500/F2B2B4/4F3C3C?text=Stoffmuster\";\n\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n * Wenn der Pfad mit '/uploads/' beginnt, wird die Backend-URL vorangestellt.\r\n * @param {string} imagePath - Der Pfad aus den Produktdaten.\r\n * @returns {string} Die vollständige URL oder der ursprüngliche Pfad.\r\n */\nconst getImageUrl = imagePath => {\n  if (imagePath && imagePath.startsWith('/uploads/')) {\n    return `${BACKEND_URL}${imagePath}`;\n  }\n  return imagePath;\n};\n\n/**\r\n * ImageCarousel-Komponente, die featured Produkte vom Backend abruft \r\n * und in einem rotierenden Karussell anzeigt.\r\n */\nconst ImageCarousel = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // 1. Datenabruf beim Laden der Komponente\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await fetch(API_URL);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n\n        // Wir speichern nur Produkte, die Bilder haben\n        const featuredProducts = data.filter(p => p.imageUrl);\n        setProducts(featuredProducts);\n      } catch (e) {\n        console.error(\"Fehler beim Abrufen der Featured Products:\", e);\n        setError(\"Fehler beim Laden der Produkte. Bitte stellen Sie sicher, dass der Backend-Server läuft (Port 3001).\");\n        setProducts([]); // Leere Liste bei Fehler\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchProducts();\n  }, []); // Läuft nur einmal beim Mounten\n\n  // 2. Auto-Play-Logik\n  useEffect(() => {\n    if (products.length > 1) {\n      const intervalId = setInterval(() => {\n        setCurrentIndex(prevIndex => (prevIndex + 1) % products.length);\n      }, 4000); // Bildwechsel alle 4 Sekunden (4000ms)\n\n      return () => clearInterval(intervalId); // Cleanup beim Unmounten\n    }\n  }, [products.length]);\n\n  // --- Render-Logik ---\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        padding: '50px'\n      },\n      children: \"\\u2B50 Stoffzauber wird geladen...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 16\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        color: 'var(--farbe-rot)',\n        padding: '50px',\n        fontWeight: 'bold'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 16\n    }, this);\n  }\n  if (products.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        padding: '50px'\n      },\n      children: \"Keine Featured Products mit Bildern gefunden.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }, this);\n  }\n  const currentProduct = products[currentIndex];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"carousel-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      // FIX: getImageUrl wird verwendet, um den vollständigen Pfad zum Backend zu erstellen\n      src: getImageUrl(currentProduct.imageUrl),\n      alt: currentProduct.name,\n      className: \"carousel-image\"\n      // ZUSÄTZLICH: Fehlerbehandlung, falls Bild nicht geladen werden kann\n      ,\n      onError: e => {\n        e.target.onerror = null;\n        e.target.src = FALLBACK_IMAGE_URL;\n        console.error(`Bild für Produkt ${currentProduct.name} konnte nicht geladen werden.`);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        bottom: 50,\n        left: 0,\n        right: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.7)',\n        padding: '10px 20px',\n        textAlign: 'center',\n        color: 'var(--farbe-text)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: 0,\n          fontSize: '1.2em'\n        },\n        children: currentProduct.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: '5px 0 0',\n          fontWeight: 'bold'\n        },\n        children: [\"\\u20AC \", currentProduct.price.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"carousel-dots\",\n      children: products.map((_, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `dot ${index === currentIndex ? 'active' : ''}`,\n        onClick: () => setCurrentIndex(index)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n_s(ImageCarousel, \"DzW8R3ijaOkHuHn8r1XyICJJmYo=\");\n_c = ImageCarousel;\nexport default ImageCarousel;\nvar _c;\n$RefreshReg$(_c, \"ImageCarousel\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","API_URL","BACKEND_URL","FALLBACK_IMAGE_URL","getImageUrl","imagePath","startsWith","ImageCarousel","_s","products","setProducts","currentIndex","setCurrentIndex","isLoading","setIsLoading","error","setError","fetchProducts","response","fetch","ok","Error","status","data","json","featuredProducts","filter","p","imageUrl","e","console","length","intervalId","setInterval","prevIndex","clearInterval","style","textAlign","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","color","fontWeight","currentProduct","className","src","alt","name","onError","target","onerror","position","bottom","left","right","backgroundColor","margin","fontSize","price","toFixed","map","_","index","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Stefan/Desktop/henkes-stoffzauber/henkes-stoffzauber-projekt/client/src/components/ImageCarousel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst API_URL = 'http://localhost:3001/api/products/featured';\r\nconst BACKEND_URL = 'http://localhost:3001';\r\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/500x500/F2B2B4/4F3C3C?text=Stoffmuster\";\r\n\r\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n * Wenn der Pfad mit '/uploads/' beginnt, wird die Backend-URL vorangestellt.\r\n * @param {string} imagePath - Der Pfad aus den Produktdaten.\r\n * @returns {string} Die vollständige URL oder der ursprüngliche Pfad.\r\n */\r\nconst getImageUrl = (imagePath) => {\r\n    if (imagePath && imagePath.startsWith('/uploads/')) {\r\n        return `${BACKEND_URL}${imagePath}`;\r\n    }\r\n    return imagePath;\r\n};\r\n\r\n/**\r\n * ImageCarousel-Komponente, die featured Produkte vom Backend abruft \r\n * und in einem rotierenden Karussell anzeigt.\r\n */\r\nconst ImageCarousel = () => {\r\n    const [products, setProducts] = useState([]);\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    // 1. Datenabruf beim Laden der Komponente\r\n    useEffect(() => {\r\n        const fetchProducts = async () => {\r\n            try {\r\n                const response = await fetch(API_URL);\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                \r\n                // Wir speichern nur Produkte, die Bilder haben\r\n                const featuredProducts = data.filter(p => p.imageUrl);\r\n                setProducts(featuredProducts);\r\n                \r\n            } catch (e) {\r\n                console.error(\"Fehler beim Abrufen der Featured Products:\", e);\r\n                setError(\"Fehler beim Laden der Produkte. Bitte stellen Sie sicher, dass der Backend-Server läuft (Port 3001).\");\r\n                setProducts([]); // Leere Liste bei Fehler\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchProducts();\r\n    }, []); // Läuft nur einmal beim Mounten\r\n\r\n    // 2. Auto-Play-Logik\r\n    useEffect(() => {\r\n        if (products.length > 1) {\r\n            const intervalId = setInterval(() => {\r\n                setCurrentIndex(prevIndex => \r\n                    (prevIndex + 1) % products.length\r\n                );\r\n            }, 4000); // Bildwechsel alle 4 Sekunden (4000ms)\r\n\r\n            return () => clearInterval(intervalId); // Cleanup beim Unmounten\r\n        }\r\n    }, [products.length]);\r\n\r\n    // --- Render-Logik ---\r\n\r\n    if (isLoading) {\r\n        return <p style={{ textAlign: 'center', padding: '50px' }}>⭐ Stoffzauber wird geladen...</p>;\r\n    }\r\n\r\n    if (error) {\r\n        return <p style={{ textAlign: 'center', color: 'var(--farbe-rot)', padding: '50px', fontWeight: 'bold' }}>{error}</p>;\r\n    }\r\n\r\n    if (products.length === 0) {\r\n        return <p style={{ textAlign: 'center', padding: '50px' }}>Keine Featured Products mit Bildern gefunden.</p>;\r\n    }\r\n\r\n    const currentProduct = products[currentIndex];\r\n\r\n    return (\r\n        <div className=\"carousel-container\">\r\n            {/* Bild des aktuellen Produkts */}\r\n            <img \r\n                // FIX: getImageUrl wird verwendet, um den vollständigen Pfad zum Backend zu erstellen\r\n                src={getImageUrl(currentProduct.imageUrl)} \r\n                alt={currentProduct.name} \r\n                className=\"carousel-image\" \r\n                // ZUSÄTZLICH: Fehlerbehandlung, falls Bild nicht geladen werden kann\r\n                onError={(e) => { \r\n                    e.target.onerror = null; \r\n                    e.target.src = FALLBACK_IMAGE_URL; \r\n                    console.error(`Bild für Produkt ${currentProduct.name} konnte nicht geladen werden.`);\r\n                }}\r\n            />\r\n            \r\n            {/* Beschriftung des Produkts */}\r\n            <div style={{\r\n                position: 'absolute',\r\n                bottom: 50,\r\n                left: 0,\r\n                right: 0,\r\n                backgroundColor: 'rgba(255, 255, 255, 0.7)',\r\n                padding: '10px 20px',\r\n                textAlign: 'center',\r\n                color: 'var(--farbe-text)'\r\n            }}>\r\n                <h3 style={{ margin: 0, fontSize: '1.2em' }}>{currentProduct.name}</h3>\r\n                <p style={{ margin: '5px 0 0', fontWeight: 'bold' }}>€ {currentProduct.price.toFixed(2)}</p>\r\n            </div>\r\n\r\n\r\n            {/* Navigationspunkte (Dots) */}\r\n            <div className=\"carousel-dots\">\r\n                {products.map((_, index) => (\r\n                    <div\r\n                        key={index}\r\n                        className={`dot ${index === currentIndex ? 'active' : ''}`}\r\n                        onClick={() => setCurrentIndex(index)}\r\n                    />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImageCarousel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}