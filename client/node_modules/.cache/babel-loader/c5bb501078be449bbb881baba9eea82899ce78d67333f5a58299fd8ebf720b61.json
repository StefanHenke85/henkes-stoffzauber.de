{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan\\\\Desktop\\\\henkes-stoffzauber\\\\henkes-stoffzauber-projekt\\\\client\\\\src\\\\AdminDashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// client/src/components/AdminDashboard.js\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { LogOut, Edit, Trash2, PlusCircle, CheckCircle, XCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3001/api';\nconst BACKEND_URL = 'http://localhost:3001';\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/100x100/CCCCCC/333333?text=N/A\";\n\n// --- Hilfsfunktionen für Admin-Operationen ---\n\n/**\r\n * Ruft den Admin-Authentifizierungstoken aus dem localStorage ab.\r\n * @returns {string | null} Den Token oder null.\r\n */\nconst getAuthHeaders = () => {\n  const adminToken = localStorage.getItem('adminToken');\n  if (!adminToken) {\n    // Obwohl der AdminProtectedRoute dies verhindern sollte, ist dies eine zusätzliche Absicherung\n    return {\n      error: 'Admin-Sitzung abgelaufen oder nicht gefunden.'\n    };\n  }\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${adminToken}`\n  };\n};\n\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n */\nconst getImageUrl = imagePath => {\n  if (imagePath && imagePath.startsWith('/uploads/')) {\n    return `${BACKEND_URL}${imagePath}`;\n  }\n  return imagePath || FALLBACK_IMAGE_URL;\n};\n\n// =========================================================================\n// BEGINN: EINGEBETTETE HILFSKOMPONENTEN\n// =========================================================================\n\n// =========================================================================\n// BEGINN: Produktformular (ProductForm) - Mit Korrekturen für Initialisierung\n// =========================================================================\n\n// Hilfsfunktion für den initialen Zustand des Produktformulars\nconst getInitialState = productToEdit => productToEdit || {\n  name: '',\n  description: '',\n  price: 0,\n  stock: 0,\n  // KORRIGIERT: Fügen Sie alle Formularfelder mit definierten Werten hinzu,\n  // um den \"uncontrolled to controlled\" Fehler zu vermeiden.\n  availableHeight: 0,\n  availableWidth: 0,\n  isFeatured: false,\n  imageFile: null,\n  imageUrl: '',\n  fabricId: ''\n};\n\n// --- Komponente: Produktformular (ProductForm) ---\nconst ProductForm = ({\n  productToEdit,\n  onSubmit,\n  onCancel,\n  fabrics\n}) => {\n  _s();\n  // useMemo stellt sicher, dass initialState nur neu berechnet wird, wenn sich productToEdit ändert\n  const initialState = useMemo(() => getInitialState(productToEdit), [productToEdit]);\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!productToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    // Setzt das Formular zurück, wenn ein neues Produkt geladen wird\n    setFormData(initialState);\n    setIsEditing(!!productToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, productToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    if (name === 'imageFile') {\n      const file = e.target.files[0];\n      setFormData(prev => ({\n        ...prev,\n        [name]: file\n      }));\n      setPreviewImage(file ? URL.createObjectURL(file) : formData.imageUrl || null);\n    } else if (type === 'checkbox') {\n      setFormData(prev => ({\n        ...prev,\n        [name]: checked\n      }));\n    } else if (type === 'number') {\n      // Stellt sicher, dass numerische Felder immer Zahlen sind, auch wenn das Feld leer ist (dann 0)\n      setFormData(prev => ({\n        ...prev,\n        [name]: parseFloat(value) || 0\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    // Das Formular-Objekt enthält jetzt alle Daten (inkl. imageFile)\n    onSubmit(formData);\n  };\n  const getFinalPreviewUrl = () => {\n    if (formData.imageFile) {\n      return previewImage; // Ist ein Blob-URL\n    }\n    return getImageUrl(formData.imageUrl); // Ist eine Backend-URL oder Fallback\n  };\n  const formTitle = isEditing ? `Produkt bearbeiten: ${productToEdit === null || productToEdit === void 0 ? void 0 : productToEdit.name}` : 'Neues Produkt erstellen';\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      style: {\n        color: 'var(--farbe-primär)'\n      },\n      children: formTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: \"Name des Produkts:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Beschreibung:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        rows: \"4\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricId\",\n        children: \"Zugeh\\xF6riger Stoff (Optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"fabricId\",\n        name: \"fabricId\",\n        value: formData.fabricId || '',\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Kein Stoff zugeordnet --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), fabrics.map(f => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: f.id,\n          children: [f.name, \" (\", f.fabricType, \")\"]\n        }, f.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gap: '15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          children: \"Preis pro Einheit (\\u20AC):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"price\",\n          name: \"price\",\n          value: formData.price,\n          onChange: handleChange,\n          min: \"0.01\",\n          step: \"0.01\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"stock\",\n          children: \"Lagerbestand (Einheiten):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"stock\",\n          name: \"stock\",\n          value: formData.stock,\n          onChange: handleChange,\n          min: \"0\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gap: '15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"availableWidth\",\n          children: \"Verf\\xFCgbare Breite (cm, optional):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"availableWidth\",\n          name: \"availableWidth\",\n          value: formData.availableWidth // KORREKT: Ist immer 0 oder eine Zahl\n          ,\n          onChange: handleChange,\n          min: \"0\",\n          step: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"availableHeight\",\n          children: \"Verf\\xFCgbare H\\xF6he (cm, optional):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"availableHeight\",\n          name: \"availableHeight\",\n          value: formData.availableHeight // KORREKT: Ist immer 0 oder eine Zahl\n          ,\n          onChange: handleChange,\n          min: \"0\",\n          step: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageFile\",\n        children: \"Produktbild:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"imageFile\",\n        name: \"imageFile\",\n        accept: \"image/*\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), getFinalPreviewUrl() && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getFinalPreviewUrl(),\n          alt: \"Vorschau\",\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = FALLBACK_IMAGE_URL;\n          },\n          style: {\n            maxWidth: '100px',\n            maxHeight: '100px',\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"isFeatured\",\n        name: \"isFeatured\",\n        checked: formData.isFeatured,\n        onChange: handleChange,\n        style: {\n          width: '20px',\n          height: '20px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"isFeatured\",\n        style: {\n          margin: 0,\n          fontWeight: 'normal',\n          cursor: 'pointer'\n        },\n        children: \"Als \\\"Featured Product\\\" auf der Startseite anzeigen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        children: isEditing ? 'Änderungen speichern' : 'Produkt erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen (Zur\\xFCck zur Erstellung)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n};\n// =========================================================================\n// ENDE: Produktformular (ProductForm)\n// =========================================================================\n\n// =========================================================================\n// BEGINN: Produktliste (AdminProductList) - Mit Korrekturen für Whitespace\n// =========================================================================\n\n// --- Komponente: Produktliste (AdminProductList) ---\n_s(ProductForm, \"mG0AgEOCBf3MhewyjwhcE6TaBHs=\");\n_c = ProductForm;\nconst AdminProductList = ({\n  products,\n  onEdit,\n  onDelete,\n  fabrics\n}) => {\n  // Hilfsfunktion, um den Stoffnamen zu finden\n  const getFabricName = fabricId => {\n    const fabric = fabrics.find(f => f.id === fabricId);\n    return fabric ? fabric.name : 'Nicht zugeordnet';\n  };\n\n  // KORREKTUR: Kompaktes JSX im thead, um Whitespace-Textknoten-Fehler zu vermeiden\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-list-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      style: {\n        color: 'var(--farbe-primär)'\n      },\n      children: [\"Existierende Produkte (\", products.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        width: \"100%\",\n        borderCollapse: 'collapse'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          style: {\n            backgroundColor: 'var(--farbe-grau-hell)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Bild\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Stoff\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Preis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Bestand\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'center'\n            },\n            children: \"Aktionen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: products.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n          style: {\n            borderBottom: '1px solid #eee'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: getImageUrl(product.imageUrl),\n              alt: product.name,\n              onError: e => {\n                e.target.onerror = null;\n                e.target.src = FALLBACK_IMAGE_URL;\n              },\n              style: {\n                width: '50px',\n                height: '50px',\n                objectFit: 'cover',\n                borderRadius: '4px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px',\n              fontWeight: product.isFeatured ? 'bold' : 'normal'\n            },\n            children: [product.name, product.isFeatured && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'var(--farbe-akzent)',\n                marginLeft: '5px'\n              },\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 56\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px',\n              fontSize: '0.9em'\n            },\n            children: getFabricName(product.fabricId)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px'\n            },\n            children: [product.price.toFixed(2), \" \\u20AC\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px',\n              color: product.stock < 10 ? 'red' : 'green'\n            },\n            children: product.stock\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onEdit(product),\n              style: {\n                color: 'var(--farbe-primär-dunkel)',\n                marginRight: '10px',\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer'\n              },\n              title: \"Bearbeiten\",\n              children: /*#__PURE__*/_jsxDEV(Edit, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onDelete(product.id),\n              style: {\n                color: '#ff4d4f',\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer'\n              },\n              title: \"L\\xF6schen\",\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 29\n          }, this)]\n        }, product.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }, this), products.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        padding: '20px',\n        color: '#666'\n      },\n      children: \"Keine Produkte vorhanden.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 9\n  }, this);\n};\n// =========================================================================\n// ENDE: Produktliste (AdminProductList)\n// =========================================================================\n\n// =========================================================================\n// BEGINN: Stoff-Formular (FabricForm)\n// =========================================================================\n_c2 = AdminProductList;\nconst USAGE_OPTIONS = ['Mütze (Außen)', 'Mütze (Innen)', 'Bündchen', 'Bekleidung (Oberteil)', 'Bekleidung (Hose)', 'Babybekleidung', 'Deko', 'Taschen', 'Accessoires'];\nconst FABRIC_TYPES = ['Jersey', 'French Terry (Sommersweat)', 'Sweat', 'Bündchenstoff', 'Musselin', 'Webware Baumwolle', 'Cord', 'Fleece', 'Softshell', 'Leder (Imitat/Echt)'];\nconst FABRIC_FALLBACK_IMAGE = \"https://placehold.co/100x100/D9E3F0/333?text=Stoffmuster\";\n\n// Hilfsfunktion für den initialen Zustand des Stoff-Formulars\nconst getInitialFabricState = fabricToEdit => fabricToEdit || {\n  name: '',\n  description: '',\n  fabricType: '',\n  suitableFor: [],\n  stock: 0,\n  imageUrl: '',\n  imageFile: null\n};\nconst FabricForm = ({\n  fabricToEdit,\n  onAdd,\n  onCancel\n}) => {\n  _s2();\n  const initialState = useMemo(() => getInitialFabricState(fabricToEdit), [fabricToEdit]);\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!fabricToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    setFormData(initialState);\n    setIsEditing(!!fabricToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, fabricToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    if (name === 'imageFile') {\n      const file = e.target.files[0];\n      setFormData(prev => ({\n        ...prev,\n        [name]: file\n      }));\n      setPreviewImage(file ? URL.createObjectURL(file) : formData.imageUrl || null);\n    } else if (name === 'suitableFor') {\n      const currentUsages = formData.suitableFor || [];\n      if (checked) {\n        setFormData(prev => ({\n          ...prev,\n          suitableFor: [...currentUsages, value]\n        }));\n      } else {\n        setFormData(prev => ({\n          ...prev,\n          suitableFor: currentUsages.filter(u => u !== value)\n        }));\n      }\n    } else if (type === 'number') {\n      setFormData(prev => ({\n        ...prev,\n        [name]: parseFloat(value) || 0\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onAdd(formData); // Übergibt das gesamte Datenobjekt, inklusive File\n  };\n  const getFinalPreviewUrl = () => {\n    if (formData.imageFile) {\n      return previewImage;\n    }\n    return getImageUrl(formData.imageUrl);\n  };\n  const formTitle = isEditing ? `Stoff bearbeiten: ${fabricToEdit === null || fabricToEdit === void 0 ? void 0 : fabricToEdit.name}` : 'Neuen Stoff erstellen/hinzufügen';\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      style: {\n        color: 'var(--farbe-primär)'\n      },\n      children: formTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gap: '15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: \"Stoffname/Titel:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          name: \"name\",\n          value: formData.name,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fabricType\",\n          children: \"Stoffart:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"fabricType\",\n          name: \"fabricType\",\n          value: formData.fabricType,\n          onChange: handleChange,\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Stoffart w\\xE4hlen --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 25\n          }, this), FABRIC_TYPES.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: type,\n            children: type\n          }, type, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '3fr 1fr',\n        gap: '15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"description\",\n          children: \"Beschreibung:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"description\",\n          name: \"description\",\n          value: formData.description,\n          onChange: handleChange,\n          rows: \"4\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"stock\",\n          children: \"Lagerbestand (Meter):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"stock\",\n          name: \"stock\",\n          value: formData.stock,\n          onChange: handleChange,\n          min: \"0\",\n          step: \"0.1\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Geeignet f\\xFCr:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexWrap: 'wrap',\n          gap: '10px'\n        },\n        children: USAGE_OPTIONS.map(usage => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: `usage-${usage}`,\n            name: \"suitableFor\",\n            value: usage,\n            checked: (formData.suitableFor || []).includes(usage),\n            onChange: handleChange,\n            style: {\n              width: '15px',\n              height: '15px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `usage-${usage}`,\n            style: {\n              margin: 0,\n              fontWeight: 'normal'\n            },\n            children: usage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 29\n          }, this)]\n        }, usage, true, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageFile\",\n        children: \"Stoffmuster Bild (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"imageFile\",\n        name: \"imageFile\",\n        accept: \"image/*\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getFinalPreviewUrl(),\n          alt: \"Vorschau\",\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = FABRIC_FALLBACK_IMAGE;\n          },\n          style: {\n            maxWidth: '100px',\n            maxHeight: '100px',\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        children: isEditing ? 'Änderungen speichern' : 'Stoff erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen (Zur\\xFCck zur Erstellung)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 436,\n    columnNumber: 9\n  }, this);\n};\n// =========================================================================\n// ENDE: Stoff-Formular (FabricForm)\n// =========================================================================\n\n// =========================================================================\n// BEGINN: Stoff-Liste (AdminFabricList)\n// =========================================================================\n_s2(FabricForm, \"XnEyzwmxES3TpGb7/UCnjdAIVdA=\");\n_c3 = FabricForm;\nconst AdminFabricList = ({\n  fabrics,\n  onDelete\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-list-container\",\n    style: {\n      marginTop: '30px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      style: {\n        color: 'var(--farbe-primär)'\n      },\n      children: [\"Existierende Stoffe (\", fabrics.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        width: \"100%\",\n        borderCollapse: 'collapse'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          style: {\n            backgroundColor: 'var(--farbe-grau-hell)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Bild\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Art\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'left'\n            },\n            children: \"Bestand (m)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            style: {\n              padding: '12px',\n              textAlign: 'center'\n            },\n            children: \"Aktionen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: fabrics.map(fabric => /*#__PURE__*/_jsxDEV(\"tr\", {\n          style: {\n            borderBottom: '1px solid #eee'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: getImageUrl(fabric.imageUrl),\n              alt: fabric.name,\n              onError: e => {\n                e.target.onerror = null;\n                e.target.src = FALLBACK_IMAGE_URL;\n              },\n              style: {\n                width: '50px',\n                height: '50px',\n                objectFit: 'cover',\n                borderRadius: '4px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px',\n              fontSize: '0.9em'\n            },\n            children: fabric.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px',\n              fontSize: '0.9em'\n            },\n            children: fabric.fabricType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px',\n              color: fabric.stock < 5 ? 'red' : 'green'\n            },\n            children: fabric.stock.toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              padding: '12px',\n              textAlign: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onDelete(fabric.id),\n              style: {\n                color: '#ff4d4f',\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer'\n              },\n              title: \"L\\xF6schen\",\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 615,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 29\n          }, this)]\n        }, fabric.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 13\n    }, this), fabrics.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        padding: '20px',\n        color: '#666'\n      },\n      children: \"Keine Stoffe im Inventar.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 568,\n    columnNumber: 9\n  }, this);\n};\n// =========================================================================\n// ENDE: Stoff-Liste (AdminFabricList)\n// =========================================================================\n\n// =========================================================================\n// BEGINN: MODAL-Komponente für Alerts (ersetzt window.alert/confirm)\n// =========================================================================\n_c4 = AdminFabricList;\nconst Modal = ({\n  isOpen,\n  title,\n  message,\n  onConfirm,\n  onCancel,\n  type = 'alert'\n}) => {\n  if (!isOpen) return null;\n  const isConfirm = type === 'confirm';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-xl w-96\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-start\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold\",\n          style: {\n            color: type === 'error' ? '#D9534F' : 'var(--farbe-primär)'\n          },\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onCancel || onConfirm,\n          className: \"text-gray-400 hover:text-gray-600\",\n          children: /*#__PURE__*/_jsxDEV(XCircle, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-gray-700\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex justify-end space-x-3\",\n        children: [isConfirm && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onCancel,\n          className: \"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\",\n          children: \"Abbrechen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onConfirm,\n          style: {\n            backgroundColor: type === 'error' ? '#D9534F' : 'var(--farbe-akzent)'\n          },\n          className: \"px-4 py-2 text-white font-bold rounded-lg hover:opacity-90 transition\",\n          children: isConfirm ? 'Bestätigen' : 'OK'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 644,\n    columnNumber: 9\n  }, this);\n};\n// =========================================================================\n// ENDE: MODAL-Komponente\n// =========================================================================\n\n// =========================================================================\n// BEGINN: HAUPTKOMPONENTE AdminDashboard\n// =========================================================================\n_c5 = Modal;\nconst AdminDashboard = () => {\n  _s3();\n  const navigate = useNavigate();\n\n  // Produkte und Stoffe\n  const [products, setProducts] = useState([]);\n  const [fabrics, setFabrics] = useState([]);\n\n  // Produkt-Bearbeitung\n  const [currentProduct, setCurrentProduct] = useState(null);\n\n  // Zustand für Modals (Alerts/Confirms)\n  const [modal, setModal] = useState({\n    isOpen: false,\n    title: '',\n    message: '',\n    onConfirm: () => {},\n    type: 'alert'\n  });\n\n  // Lade- und Fehlerzustände\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // --- Datenabruf: Produkte und Stoffe ---\n\n  const fetchAllData = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      // Stoffe zuerst abrufen, da sie für Produkte benötigt werden\n      const fabricsRes = await fetch(`${API_URL}/fabrics`);\n      if (!fabricsRes.ok) throw new Error('Fehler beim Abrufen der Stoffe.');\n      const fetchedFabrics = await fabricsRes.json();\n      setFabrics(fetchedFabrics);\n\n      // Dann Produkte abrufen\n      const productsRes = await fetch(`${API_URL}/products`);\n      if (!productsRes.ok) throw new Error('Fehler beim Abrufen der Produkte.');\n      const fetchedProducts = await productsRes.json();\n      setProducts(fetchedProducts);\n    } catch (err) {\n      setError(err.message);\n      setModal({\n        isOpen: true,\n        title: 'Daten-Fehler',\n        message: `Es gab ein Problem beim Laden der Daten: ${err.message}`,\n        onConfirm: () => setModal(prev => ({\n          ...prev,\n          isOpen: false\n        })),\n        type: 'error'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    fetchAllData();\n  }, [fetchAllData]);\n\n  // --- Produkt-Management Handler ---\n\n  const handleProductSubmit = useCallback(async productData => {\n    const adminHeaders = getAuthHeaders();\n    if (adminHeaders.error) {\n      setModal({\n        isOpen: true,\n        title: 'Authentifizierungsfehler',\n        message: adminHeaders.error,\n        onConfirm: () => setModal(prev => ({\n          ...prev,\n          isOpen: false\n        })),\n        type: 'error'\n      });\n      return;\n    }\n    const method = productData.id ? 'PUT' : 'POST';\n    const url = productData.id ? `${API_URL}/products/${productData.id}` : `${API_URL}/products`;\n    try {\n      const formData = new FormData();\n      // Daten an FormData anhängen\n      for (const key in productData) {\n        if (key === 'imageFile' && productData[key]) {\n          formData.append(key, productData[key]);\n        } else if (key !== 'imageFile') {\n          // Alle anderen Nicht-Datei-Daten als JSON String anhängen\n          formData.append(key, JSON.stringify(productData[key]));\n        }\n      }\n      const response = await fetch(url, {\n        method: method,\n        // ACHTUNG: 'Content-Type': 'multipart/form-data' nicht setzen, \n        // da der Browser dies mit FormData automatisch und korrekt macht.\n        headers: {\n          'Authorization': adminHeaders.Authorization\n        },\n        body: formData\n      });\n      if (response.status === 401) {\n        const errorBody = await response.json();\n        throw new Error(`Serverfehler: 401 - Unauthorized: ${errorBody.message}`);\n      }\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Fehler bei der Übermittlung: ${errorText}`);\n      }\n      await fetchAllData(); // Daten aktualisieren\n      setCurrentProduct(null); // Bearbeitungsmodus beenden\n\n      setModal({\n        isOpen: true,\n        title: 'Erfolg',\n        message: productData.id ? 'Produkt erfolgreich aktualisiert.' : 'Produkt erfolgreich erstellt.',\n        onConfirm: () => setModal(prev => ({\n          ...prev,\n          isOpen: false\n        })),\n        type: 'alert'\n      });\n    } catch (err) {\n      console.error('Fehler bei der Übermittlung:', err);\n      setModal({\n        isOpen: true,\n        title: 'Fehler',\n        message: `Fehler bei der Übermittlung: ${err.message}`,\n        onConfirm: () => setModal(prev => ({\n          ...prev,\n          isOpen: false\n        })),\n        type: 'error'\n      });\n    }\n  }, [fetchAllData]);\n  const handleEdit = useCallback(product => {\n    setCurrentProduct(product);\n  }, []);\n  const handleCancelEdit = useCallback(() => {\n    setCurrentProduct(null);\n  }, []);\n  const handleDelete = useCallback(productId => {\n    const productToDelete = products.find(p => p.id === productId);\n    setModal({\n      isOpen: true,\n      title: 'Produkt löschen',\n      message: `Sind Sie sicher, dass Sie das Produkt \"${productToDelete.name}\" endgültig löschen möchten?`,\n      type: 'confirm',\n      onConfirm: async () => {\n        const adminHeaders = getAuthHeaders();\n        setModal(prev => ({\n          ...prev,\n          isOpen: false\n        })); // Modal schließen, bevor Fetch beginnt\n\n        if (adminHeaders.error) {\n          setModal({\n            isOpen: true,\n            title: 'Authentifizierungsfehler',\n            message: adminHeaders.error,\n            onConfirm: () => setModal(prev => ({\n              ...prev,\n              isOpen: false\n            })),\n            type: 'error'\n          });\n          return;\n        }\n        try {\n          const response = await fetch(`${API_URL}/products/${productId}`, {\n            method: 'DELETE',\n            headers: adminHeaders // KORRIGIERT: Authorization Header wird gesendet\n          });\n          if (response.status === 401) {\n            const errorBody = await response.json();\n            throw new Error(`Serverfehler: 401 - Unauthorized: ${errorBody.message}`);\n          }\n          if (!response.ok) {\n            throw new Error('Fehler beim Löschen des Produkts.');\n          }\n          await fetchAllData(); // Daten aktualisieren\n        } catch (err) {\n          console.error('Fehler beim Löschen des Produkts:', err);\n          setModal({\n            isOpen: true,\n            title: 'Fehler',\n            message: `Fehler beim Löschen des Produkts: ${err.message}`,\n            onConfirm: () => setModal(prev => ({\n              ...prev,\n              isOpen: false\n            })),\n            type: 'error'\n          });\n        }\n      },\n      onCancel: () => setModal(prev => ({\n        ...prev,\n        isOpen: false\n      }))\n    });\n  }, [products, fetchAllData]);\n\n  // --- Stoff-Management Handler ---\n\n  const handleAddFabric = useCallback(async fabricData => {\n    const adminHeaders = getAuthHeaders();\n    if (adminHeaders.error) {\n      setModal({\n        isOpen: true,\n        title: 'Authentifizierungsfehler',\n        message: adminHeaders.error,\n        onConfirm: () => setModal(prev => ({\n          ...prev,\n          isOpen: false\n        })),\n        type: 'error'\n      });\n      return;\n    }\n    const method = fabricData.id ? 'PUT' : 'POST';\n    const url = fabricData.id ? `${API_URL}/fabrics/${fabricData.id}` : `${API_URL}/fabrics`;\n    try {\n      const formData = new FormData();\n      for (const key in fabricData) {\n        if (key === 'imageFile' && fabricData[key]) {\n          formData.append(key, fabricData[key]);\n        } else if (key !== 'imageFile') {\n          // Alle anderen Nicht-Datei-Daten als JSON String anhängen\n          formData.append(key, JSON.stringify(fabricData[key]));\n        }\n      }\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          'Authorization': adminHeaders.Authorization // KORRIGIERT: Authorization Header wird gesendet\n        },\n        body: formData\n      });\n      if (response.status === 401) {\n        const errorBody = await response.json();\n        throw new Error(`Serverfehler: 401 - Unauthorized: ${errorBody.message}`);\n      }\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Fehler beim Speichern des Stoffes: ${errorText}`);\n      }\n      await fetchAllData(); // Daten aktualisieren\n      setModal({\n        isOpen: true,\n        title: 'Erfolg',\n        message: fabricData.id ? 'Stoff erfolgreich aktualisiert.' : 'Stoff erfolgreich hinzugefügt.',\n        onConfirm: () => setModal(prev => ({\n          ...prev,\n          isOpen: false\n        })),\n        type: 'alert'\n      });\n    } catch (err) {\n      console.error('Fehler beim Hinzufügen des Stoffes:', err);\n      setModal({\n        isOpen: true,\n        title: 'Fehler',\n        message: `Fehler beim Speichern des Stoffes: ${err.message}`,\n        onConfirm: () => setModal(prev => ({\n          ...prev,\n          isOpen: false\n        })),\n        type: 'error'\n      });\n    }\n  }, [fetchAllData]);\n  const handleDeleteFabric = useCallback(fabricId => {\n    const fabricToDelete = fabrics.find(f => f.id === fabricId);\n    const associatedProducts = products.filter(p => p.fabricId === fabricId);\n    let message = `Sind Sie sicher, dass Sie den Stoff \"${fabricToDelete.name}\" endgültig löschen möchten?`;\n    if (associatedProducts.length > 0) {\n      message += ` ACHTUNG: ${associatedProducts.length} Produkt(e) sind diesem Stoff zugeordnet und werden nach dem Löschen als \"Nicht zugeordnet\" angezeigt.`;\n    }\n    setModal({\n      isOpen: true,\n      title: 'Stoff löschen',\n      message: message,\n      type: 'confirm',\n      onConfirm: async () => {\n        const adminHeaders = getAuthHeaders();\n        setModal(prev => ({\n          ...prev,\n          isOpen: false\n        }));\n        if (adminHeaders.error) {\n          setModal({\n            isOpen: true,\n            title: 'Authentifizierungsfehler',\n            message: adminHeaders.error,\n            onConfirm: () => setModal(prev => ({\n              ...prev,\n              isOpen: false\n            })),\n            type: 'error'\n          });\n          return;\n        }\n        try {\n          const response = await fetch(`${API_URL}/fabrics/${fabricId}`, {\n            method: 'DELETE',\n            headers: adminHeaders // KORRIGIERT: Authorization Header wird gesendet\n          });\n          if (response.status === 401) {\n            const errorBody = await response.json();\n            throw new Error(`Serverfehler: 401 - Unauthorized: ${errorBody.message}`);\n          }\n          if (!response.ok) {\n            throw new Error('Fehler beim Löschen des Stoffes.');\n          }\n          await fetchAllData(); // Daten aktualisieren\n        } catch (err) {\n          console.error('Fehler beim Löschen des Stoffes:', err);\n          setModal({\n            isOpen: true,\n            title: 'Fehler',\n            message: `Fehler beim Löschen des Stoffes: ${err.message}`,\n            onConfirm: () => setModal(prev => ({\n              ...prev,\n              isOpen: false\n            })),\n            type: 'error'\n          });\n        }\n      },\n      onCancel: () => setModal(prev => ({\n        ...prev,\n        isOpen: false\n      }))\n    });\n  }, [fabrics, products, fetchAllData]);\n  const handleLogout = () => {\n    localStorage.removeItem('adminLoggedIn');\n    localStorage.removeItem('adminToken');\n    navigate('/admin'); // Leitet zur Admin-Login-Seite weiter\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '50px',\n        textAlign: 'center',\n        color: 'var(--farbe-primär)'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Daten werden geladen...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1012,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1011,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-dash-container\",\n    style: {\n      maxWidth: '1400px',\n      margin: '50px auto',\n      padding: '20px',\n      backgroundColor: 'var(--farbe-hell)',\n      borderRadius: '16px',\n      boxShadow: '0 8px 30px rgba(0, 0, 0, 0.1)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      ...modal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1027,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6 border-b pb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'var(--farbe-primär)',\n          fontSize: '2.5em',\n          fontWeight: '800'\n        },\n        children: \"Admin Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1030,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"flex items-center space-x-2 px-4 py-2 text-white font-semibold rounded-lg shadow-md transition\",\n        style: {\n          backgroundColor: '#DC3545',\n          hover: {\n            backgroundColor: '#C82333'\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(LogOut, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1038,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1039,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1033,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1029,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: 'var(--farbe-primär)',\n        marginBottom: '30px',\n        fontSize: '1.8em'\n      },\n      children: \"Produkt-Verwaltung\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1044,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-grid-layout\",\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 2fr',\n        gap: '30px',\n        // Responsive Anpassung\n        '@media (max-width: 1024px)': {\n          gridTemplateColumns: '1fr'\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          paddingRight: '20px',\n          borderRight: currentProduct ? '2px solid var(--farbe-akzent)' : 'none'\n        },\n        children: /*#__PURE__*/_jsxDEV(ProductForm, {\n          productToEdit: currentProduct,\n          onSubmit: handleProductSubmit,\n          onCancel: handleCancelEdit,\n          fabrics: fabrics\n        }, currentProduct ? currentProduct.id : 'new', false, {\n          fileName: _jsxFileName,\n          lineNumber: 1059,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1058,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(AdminProductList, {\n          products: products,\n          onEdit: handleEdit,\n          onDelete: handleDelete,\n          fabrics: fabrics\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1070,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1069,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1048,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '40px',\n        borderTop: '2px solid var(--farbe-grau)',\n        paddingTop: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'var(--farbe-primär)',\n          marginBottom: '30px',\n          fontSize: '1.8em'\n        },\n        children: \"Stoff-Inventar-Verwaltung\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1086,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FabricForm, {\n        onAdd: handleAddFabric\n        // Fügen Sie Logik zur Bearbeitung hinzu, falls implementiert (derzeit nur hinzufügen/löschen)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1091,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AdminFabricList, {\n        fabrics: fabrics,\n        onDelete: handleDeleteFabric\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1097,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1081,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1018,\n    columnNumber: 9\n  }, this);\n};\n_s3(AdminDashboard, \"5dUESV4GnTVDpBkJyQVnDf1tk9k=\", false, function () {\n  return [useNavigate];\n});\n_c6 = AdminDashboard;\nexport default AdminDashboard;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"ProductForm\");\n$RefreshReg$(_c2, \"AdminProductList\");\n$RefreshReg$(_c3, \"FabricForm\");\n$RefreshReg$(_c4, \"AdminFabricList\");\n$RefreshReg$(_c5, \"Modal\");\n$RefreshReg$(_c6, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","useNavigate","LogOut","Edit","Trash2","PlusCircle","CheckCircle","XCircle","jsxDEV","_jsxDEV","API_URL","BACKEND_URL","FALLBACK_IMAGE_URL","getAuthHeaders","adminToken","localStorage","getItem","error","getImageUrl","imagePath","startsWith","getInitialState","productToEdit","name","description","price","stock","availableHeight","availableWidth","isFeatured","imageFile","imageUrl","fabricId","ProductForm","onSubmit","onCancel","fabrics","_s","initialState","formData","setFormData","isEditing","setIsEditing","previewImage","setPreviewImage","handleChange","e","value","type","checked","target","file","files","prev","URL","createObjectURL","parseFloat","handleSubmit","preventDefault","getFinalPreviewUrl","formTitle","className","children","style","color","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","onChange","required","rows","map","f","fabricType","display","gridTemplateColumns","gap","min","step","accept","marginTop","src","alt","onError","onerror","maxWidth","maxHeight","borderRadius","border","alignItems","width","height","margin","fontWeight","cursor","paddingTop","borderTop","onClick","backgroundColor","_c","AdminProductList","products","onEdit","onDelete","getFabricName","fabric","find","length","borderCollapse","padding","textAlign","product","borderBottom","objectFit","marginLeft","fontSize","toFixed","marginRight","background","title","size","_c2","USAGE_OPTIONS","FABRIC_TYPES","FABRIC_FALLBACK_IMAGE","getInitialFabricState","fabricToEdit","suitableFor","FabricForm","onAdd","_s2","currentUsages","filter","u","flexWrap","usage","includes","_c3","AdminFabricList","_c4","Modal","isOpen","message","onConfirm","isConfirm","_c5","AdminDashboard","_s3","navigate","setProducts","setFabrics","currentProduct","setCurrentProduct","modal","setModal","isLoading","setIsLoading","setError","fetchAllData","fabricsRes","fetch","ok","Error","fetchedFabrics","json","productsRes","fetchedProducts","err","handleProductSubmit","productData","adminHeaders","method","url","FormData","key","append","JSON","stringify","response","headers","Authorization","body","status","errorBody","errorText","text","console","handleEdit","handleCancelEdit","handleDelete","productId","productToDelete","p","handleAddFabric","fabricData","handleDeleteFabric","fabricToDelete","associatedProducts","handleLogout","removeItem","boxShadow","hover","marginBottom","paddingRight","borderRight","_c6","$RefreshReg$"],"sources":["C:/Users/Stefan/Desktop/henkes-stoffzauber/henkes-stoffzauber-projekt/client/src/AdminDashboard.js"],"sourcesContent":["// client/src/components/AdminDashboard.js\r\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { LogOut, Edit, Trash2, PlusCircle, CheckCircle, XCircle } from 'lucide-react';\r\n\r\nconst API_URL = 'http://localhost:3001/api';\r\nconst BACKEND_URL = 'http://localhost:3001';\r\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/100x100/CCCCCC/333333?text=N/A\";\r\n\r\n// --- Hilfsfunktionen für Admin-Operationen ---\r\n\r\n/**\r\n * Ruft den Admin-Authentifizierungstoken aus dem localStorage ab.\r\n * @returns {string | null} Den Token oder null.\r\n */\r\nconst getAuthHeaders = () => {\r\n    const adminToken = localStorage.getItem('adminToken');\r\n    if (!adminToken) {\r\n        // Obwohl der AdminProtectedRoute dies verhindern sollte, ist dies eine zusätzliche Absicherung\r\n        return { error: 'Admin-Sitzung abgelaufen oder nicht gefunden.' };\r\n    }\r\n    return { \r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${adminToken}`,\r\n    };\r\n};\r\n\r\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n */\r\nconst getImageUrl = (imagePath) => {\r\n    if (imagePath && imagePath.startsWith('/uploads/')) {\r\n        return `${BACKEND_URL}${imagePath}`;\r\n    }\r\n    return imagePath || FALLBACK_IMAGE_URL;\r\n};\r\n\r\n// =========================================================================\r\n// BEGINN: EINGEBETTETE HILFSKOMPONENTEN\r\n// =========================================================================\r\n\r\n// =========================================================================\r\n// BEGINN: Produktformular (ProductForm) - Mit Korrekturen für Initialisierung\r\n// =========================================================================\r\n\r\n// Hilfsfunktion für den initialen Zustand des Produktformulars\r\nconst getInitialState = (productToEdit) => productToEdit || {\r\n    name: '',\r\n    description: '',\r\n    price: 0,\r\n    stock: 0,\r\n    // KORRIGIERT: Fügen Sie alle Formularfelder mit definierten Werten hinzu,\r\n    // um den \"uncontrolled to controlled\" Fehler zu vermeiden.\r\n    availableHeight: 0, \r\n    availableWidth: 0,\r\n    isFeatured: false,\r\n    imageFile: null,\r\n    imageUrl: '',\r\n    fabricId: '', \r\n};\r\n\r\n// --- Komponente: Produktformular (ProductForm) ---\r\nconst ProductForm = ({ productToEdit, onSubmit, onCancel, fabrics }) => {\r\n    \r\n    // useMemo stellt sicher, dass initialState nur neu berechnet wird, wenn sich productToEdit ändert\r\n    const initialState = useMemo(() => getInitialState(productToEdit), [productToEdit]);\r\n    \r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!productToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n\r\n    useEffect(() => {\r\n        // Setzt das Formular zurück, wenn ein neues Produkt geladen wird\r\n        setFormData(initialState);\r\n        setIsEditing(!!productToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, productToEdit]); \r\n    \r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        \r\n        if (name === 'imageFile') {\r\n            const file = e.target.files[0];\r\n            setFormData(prev => ({ ...prev, [name]: file }));\r\n            setPreviewImage(file ? URL.createObjectURL(file) : (formData.imageUrl || null));\r\n        } else if (type === 'checkbox') {\r\n            setFormData(prev => ({ ...prev, [name]: checked }));\r\n        } else if (type === 'number') {\r\n             // Stellt sicher, dass numerische Felder immer Zahlen sind, auch wenn das Feld leer ist (dann 0)\r\n            setFormData(prev => ({ ...prev, [name]: parseFloat(value) || 0 }));\r\n        } else {\r\n            setFormData(prev => ({ ...prev, [name]: value }));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // Das Formular-Objekt enthält jetzt alle Daten (inkl. imageFile)\r\n        onSubmit(formData);\r\n    };\r\n\r\n    const getFinalPreviewUrl = () => {\r\n        if (formData.imageFile) {\r\n            return previewImage; // Ist ein Blob-URL\r\n        }\r\n        return getImageUrl(formData.imageUrl); // Ist eine Backend-URL oder Fallback\r\n    }\r\n\r\n    const formTitle = isEditing ? `Produkt bearbeiten: ${productToEdit?.name}` : 'Neues Produkt erstellen';\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form-container\">\r\n            <h2 className=\"text-xl font-bold mb-4\" style={{ color: 'var(--farbe-primär)' }}>\r\n                {formTitle}\r\n            </h2>\r\n\r\n            {/* 1. Name */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"name\">Name des Produkts:</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            {/* 2. Beschreibung */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"description\">Beschreibung:</label>\r\n                <textarea\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    rows=\"4\"\r\n                    required\r\n                />\r\n            </div>\r\n            \r\n            {/* 3. Stoff-Zugehörigkeit (NEU) */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricId\">Zugehöriger Stoff (Optional):</label>\r\n                <select\r\n                    id=\"fabricId\"\r\n                    name=\"fabricId\"\r\n                    value={formData.fabricId || ''}\r\n                    onChange={handleChange}\r\n                >\r\n                    <option value=\"\">-- Kein Stoff zugeordnet --</option>\r\n                    {fabrics.map(f => (\r\n                        <option key={f.id} value={f.id}>{f.name} ({f.fabricType})</option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            {/* 4. Numerische Felder (Preis, Lagerbestand) */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"price\">Preis pro Einheit (€):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"price\"\r\n                        name=\"price\"\r\n                        value={formData.price}\r\n                        onChange={handleChange}\r\n                        min=\"0.01\"\r\n                        step=\"0.01\"\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"stock\">Lagerbestand (Einheiten):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"stock\"\r\n                        name=\"stock\"\r\n                        value={formData.stock}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            {/* 5. Abmessungen (NEU) */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"availableWidth\">Verfügbare Breite (cm, optional):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"availableWidth\"\r\n                        name=\"availableWidth\"\r\n                        value={formData.availableWidth} // KORREKT: Ist immer 0 oder eine Zahl\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        step=\"1\"\r\n                    />\r\n                </div>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"availableHeight\">Verfügbare Höhe (cm, optional):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"availableHeight\"\r\n                        name=\"availableHeight\"\r\n                        value={formData.availableHeight} // KORREKT: Ist immer 0 oder eine Zahl\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        step=\"1\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* 6. Bild-Upload */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"imageFile\">Produktbild:</label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    name=\"imageFile\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleChange}\r\n                />\r\n                \r\n                {getFinalPreviewUrl() && (\r\n                    <div style={{ marginTop: '15px' }}>\r\n                        <img\r\n                            src={getFinalPreviewUrl()}\r\n                            alt=\"Vorschau\"\r\n                            onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                            style={{ maxWidth: '100px', maxHeight: '100px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n            \r\n            <div className=\"admin-form-group\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"isFeatured\"\r\n                    name=\"isFeatured\"\r\n                    checked={formData.isFeatured}\r\n                    onChange={handleChange}\r\n                    style={{ width: '20px', height: '20px' }}\r\n                />\r\n                <label htmlFor=\"isFeatured\" style={{ margin: 0, fontWeight: 'normal', cursor: 'pointer' }}>\r\n                    Als \"Featured Product\" auf der Startseite anzeigen\r\n                </label>\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\">\r\n                    {isEditing ? 'Änderungen speichern' : 'Produkt erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen (Zurück zur Erstellung)\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n// =========================================================================\r\n// ENDE: Produktformular (ProductForm)\r\n// =========================================================================\r\n\r\n\r\n// =========================================================================\r\n// BEGINN: Produktliste (AdminProductList) - Mit Korrekturen für Whitespace\r\n// =========================================================================\r\n\r\n// --- Komponente: Produktliste (AdminProductList) ---\r\nconst AdminProductList = ({ products, onEdit, onDelete, fabrics }) => {\r\n    \r\n    // Hilfsfunktion, um den Stoffnamen zu finden\r\n    const getFabricName = (fabricId) => {\r\n        const fabric = fabrics.find(f => f.id === fabricId);\r\n        return fabric ? fabric.name : 'Nicht zugeordnet';\r\n    };\r\n\r\n    // KORREKTUR: Kompaktes JSX im thead, um Whitespace-Textknoten-Fehler zu vermeiden\r\n    return (\r\n        <div className=\"admin-list-container\">\r\n            <h2 className=\"text-xl font-bold mb-4\" style={{ color: 'var(--farbe-primär)' }}>\r\n                Existierende Produkte ({products.length})\r\n            </h2>\r\n            <table style={{ width: \"100%\", borderCollapse: 'collapse' }}>\r\n                <thead>\r\n                    <tr style={{ backgroundColor: 'var(--farbe-grau-hell)' }}>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Bild</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Name</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Stoff</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Preis</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Bestand</th>\r\n                        <th style={{ padding: '12px', textAlign: 'center' }}>Aktionen</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {products.map((product) => (\r\n                        <tr key={product.id} style={{ borderBottom: '1px solid #eee' }}>\r\n                            <td style={{ padding: '12px' }}>\r\n                                <img \r\n                                    src={getImageUrl(product.imageUrl)} \r\n                                    alt={product.name} \r\n                                    onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                                    style={{ width: '50px', height: '50px', objectFit: 'cover', borderRadius: '4px' }}\r\n                                />\r\n                            </td>\r\n                            <td style={{ padding: '12px', fontWeight: product.isFeatured ? 'bold' : 'normal' }}>\r\n                                {product.name}\r\n                                {product.isFeatured && <span style={{ color: 'var(--farbe-akzent)', marginLeft: '5px' }}>*</span>}\r\n                            </td>\r\n                            <td style={{ padding: '12px', fontSize: '0.9em' }}>\r\n                                {getFabricName(product.fabricId)}\r\n                            </td>\r\n                            <td style={{ padding: '12px' }}>{product.price.toFixed(2)} €</td>\r\n                            <td style={{ padding: '12px', color: product.stock < 10 ? 'red' : 'green' }}>{product.stock}</td>\r\n                            <td style={{ padding: '12px', textAlign: 'center' }}>\r\n                                <button \r\n                                    onClick={() => onEdit(product)} \r\n                                    style={{ color: 'var(--farbe-primär-dunkel)', marginRight: '10px', background: 'none', border: 'none', cursor: 'pointer' }}\r\n                                    title=\"Bearbeiten\"\r\n                                >\r\n                                    <Edit size={18} />\r\n                                </button>\r\n                                <button \r\n                                    onClick={() => onDelete(product.id)}\r\n                                    style={{ color: '#ff4d4f', background: 'none', border: 'none', cursor: 'pointer' }}\r\n                                    title=\"Löschen\"\r\n                                >\r\n                                    <Trash2 size={18} />\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n            {products.length === 0 && (\r\n                <p style={{ textAlign: 'center', padding: '20px', color: '#666' }}>\r\n                    Keine Produkte vorhanden.\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n// =========================================================================\r\n// ENDE: Produktliste (AdminProductList)\r\n// =========================================================================\r\n\r\n\r\n// =========================================================================\r\n// BEGINN: Stoff-Formular (FabricForm)\r\n// =========================================================================\r\nconst USAGE_OPTIONS = [\r\n    'Mütze (Außen)', 'Mütze (Innen)', 'Bündchen', 'Bekleidung (Oberteil)', \r\n    'Bekleidung (Hose)', 'Babybekleidung', 'Deko', 'Taschen', 'Accessoires'\r\n];\r\nconst FABRIC_TYPES = [\r\n    'Jersey', 'French Terry (Sommersweat)', 'Sweat', 'Bündchenstoff', 'Musselin', \r\n    'Webware Baumwolle', 'Cord', 'Fleece', 'Softshell', 'Leder (Imitat/Echt)'\r\n];\r\nconst FABRIC_FALLBACK_IMAGE = \"https://placehold.co/100x100/D9E3F0/333?text=Stoffmuster\";\r\n\r\n// Hilfsfunktion für den initialen Zustand des Stoff-Formulars\r\nconst getInitialFabricState = (fabricToEdit) => fabricToEdit || {\r\n    name: '',\r\n    description: '',\r\n    fabricType: '',\r\n    suitableFor: [],\r\n    stock: 0,\r\n    imageUrl: '',\r\n    imageFile: null,\r\n};\r\n\r\n\r\nconst FabricForm = ({ fabricToEdit, onAdd, onCancel }) => {\r\n    \r\n    const initialState = useMemo(() => getInitialFabricState(fabricToEdit), [fabricToEdit]);\r\n    \r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!fabricToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n\r\n    useEffect(() => {\r\n        setFormData(initialState);\r\n        setIsEditing(!!fabricToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, fabricToEdit]); \r\n    \r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        \r\n        if (name === 'imageFile') {\r\n            const file = e.target.files[0];\r\n            setFormData(prev => ({ ...prev, [name]: file }));\r\n            setPreviewImage(file ? URL.createObjectURL(file) : (formData.imageUrl || null));\r\n        } else if (name === 'suitableFor') {\r\n            const currentUsages = formData.suitableFor || [];\r\n            if (checked) {\r\n                setFormData(prev => ({ ...prev, suitableFor: [...currentUsages, value] }));\r\n            } else {\r\n                setFormData(prev => ({ ...prev, suitableFor: currentUsages.filter(u => u !== value) }));\r\n            }\r\n        } else if (type === 'number') {\r\n            setFormData(prev => ({ ...prev, [name]: parseFloat(value) || 0 }));\r\n        } else {\r\n            setFormData(prev => ({ ...prev, [name]: value }));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onAdd(formData); // Übergibt das gesamte Datenobjekt, inklusive File\r\n    };\r\n\r\n    const getFinalPreviewUrl = () => {\r\n        if (formData.imageFile) {\r\n            return previewImage;\r\n        }\r\n        return getImageUrl(formData.imageUrl);\r\n    }\r\n\r\n    const formTitle = isEditing ? `Stoff bearbeiten: ${fabricToEdit?.name}` : 'Neuen Stoff erstellen/hinzufügen';\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form-container\">\r\n            <h2 className=\"text-xl font-bold mb-4\" style={{ color: 'var(--farbe-primär)' }}>\r\n                {formTitle}\r\n            </h2>\r\n\r\n            {/* 1. Name & Stoffart */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"name\">Stoffname/Titel:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"name\"\r\n                        name=\"name\"\r\n                        value={formData.name}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"fabricType\">Stoffart:</label>\r\n                    <select\r\n                        id=\"fabricType\"\r\n                        name=\"fabricType\"\r\n                        value={formData.fabricType}\r\n                        onChange={handleChange}\r\n                        required\r\n                    >\r\n                        <option value=\"\">-- Stoffart wählen --</option>\r\n                        {FABRIC_TYPES.map(type => (\r\n                            <option key={type} value={type}>{type}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 2. Beschreibung & Bestand */}\r\n            <div style={{ display: 'grid', gridTemplateColumns: '3fr 1fr', gap: '15px' }}>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"description\">Beschreibung:</label>\r\n                    <textarea\r\n                        id=\"description\"\r\n                        name=\"description\"\r\n                        value={formData.description}\r\n                        onChange={handleChange}\r\n                        rows=\"4\"\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"stock\">Lagerbestand (Meter):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"stock\"\r\n                        name=\"stock\"\r\n                        value={formData.stock}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        step=\"0.1\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            {/* 3. Verwendungszwecke */}\r\n            <div className=\"admin-form-group\">\r\n                <label>Geeignet für:</label>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '10px' }}>\r\n                    {USAGE_OPTIONS.map(usage => (\r\n                        <div key={usage} style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                id={`usage-${usage}`}\r\n                                name=\"suitableFor\"\r\n                                value={usage}\r\n                                checked={(formData.suitableFor || []).includes(usage)}\r\n                                onChange={handleChange}\r\n                                style={{ width: '15px', height: '15px' }}\r\n                            />\r\n                            <label htmlFor={`usage-${usage}`} style={{ margin: 0, fontWeight: 'normal' }}>{usage}</label>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* 4. Bild-Upload */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"imageFile\">Stoffmuster Bild (optional):</label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    name=\"imageFile\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleChange}\r\n                />\r\n                \r\n                <div style={{ marginTop: '15px' }}>\r\n                    <img\r\n                        src={getFinalPreviewUrl()}\r\n                        alt=\"Vorschau\"\r\n                        onError={(e) => { e.target.onerror = null; e.target.src = FABRIC_FALLBACK_IMAGE; }}\r\n                        style={{ maxWidth: '100px', maxHeight: '100px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* 5. Aktionen */}\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\">\r\n                    {isEditing ? 'Änderungen speichern' : 'Stoff erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen (Zurück zur Erstellung)\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n// =========================================================================\r\n// ENDE: Stoff-Formular (FabricForm)\r\n// =========================================================================\r\n\r\n// =========================================================================\r\n// BEGINN: Stoff-Liste (AdminFabricList)\r\n// =========================================================================\r\n\r\nconst AdminFabricList = ({ fabrics, onDelete }) => {\r\n    return (\r\n        <div className=\"admin-list-container\" style={{ marginTop: '30px' }}>\r\n            <h2 className=\"text-xl font-bold mb-4\" style={{ color: 'var(--farbe-primär)' }}>\r\n                Existierende Stoffe ({fabrics.length})\r\n            </h2>\r\n            <table style={{ width: \"100%\", borderCollapse: 'collapse' }}>\r\n                <thead>\r\n                    <tr style={{ backgroundColor: 'var(--farbe-grau-hell)' }}>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Bild</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Name</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Art</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left' }}>Bestand (m)</th>\r\n                        <th style={{ padding: '12px', textAlign: 'center' }}>Aktionen</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {fabrics.map((fabric) => (\r\n                        <tr key={fabric.id} style={{ borderBottom: '1px solid #eee' }}>\r\n                            <td style={{ padding: '12px' }}>\r\n                                <img \r\n                                    src={getImageUrl(fabric.imageUrl)} \r\n                                    alt={fabric.name} \r\n                                    onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                                    style={{ width: '50px', height: '50px', objectFit: 'cover', borderRadius: '4px' }}\r\n                                />\r\n                            </td>\r\n                            <td style={{ padding: '12px', fontSize: '0.9em' }}>\r\n                                {fabric.name}\r\n                            </td>\r\n                            <td style={{ padding: '12px', fontSize: '0.9em' }}>\r\n                                {fabric.fabricType}\r\n                            </td>\r\n                            <td style={{ padding: '12px', color: fabric.stock < 5 ? 'red' : 'green' }}>\r\n                                {fabric.stock.toFixed(1)}\r\n                            </td>\r\n                            <td style={{ padding: '12px', textAlign: 'center' }}>\r\n                                {/* <button \r\n                                    onClick={() => onEdit(fabric)} // Optional: Bearbeitungs-Logik\r\n                                    style={{ color: 'var(--farbe-primär-dunkel)', marginRight: '10px', background: 'none', border: 'none', cursor: 'pointer' }}\r\n                                    title=\"Bearbeiten\"\r\n                                >\r\n                                    <Edit size={18} />\r\n                                </button> */}\r\n                                <button \r\n                                    onClick={() => onDelete(fabric.id)}\r\n                                    style={{ color: '#ff4d4f', background: 'none', border: 'none', cursor: 'pointer' }}\r\n                                    title=\"Löschen\"\r\n                                >\r\n                                    <Trash2 size={18} />\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n            {fabrics.length === 0 && (\r\n                <p style={{ textAlign: 'center', padding: '20px', color: '#666' }}>\r\n                    Keine Stoffe im Inventar.\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n// =========================================================================\r\n// ENDE: Stoff-Liste (AdminFabricList)\r\n// =========================================================================\r\n\r\n// =========================================================================\r\n// BEGINN: MODAL-Komponente für Alerts (ersetzt window.alert/confirm)\r\n// =========================================================================\r\n\r\nconst Modal = ({ isOpen, title, message, onConfirm, onCancel, type = 'alert' }) => {\r\n    if (!isOpen) return null;\r\n\r\n    const isConfirm = type === 'confirm';\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50\">\r\n            <div className=\"bg-white p-6 rounded-lg shadow-xl w-96\">\r\n                <div className=\"flex justify-between items-start\">\r\n                    <h3 className=\"text-lg font-bold\" style={{ color: type === 'error' ? '#D9534F' : 'var(--farbe-primär)' }}>\r\n                        {title}\r\n                    </h3>\r\n                    <button onClick={onCancel || onConfirm} className=\"text-gray-400 hover:text-gray-600\">\r\n                        <XCircle size={20} />\r\n                    </button>\r\n                </div>\r\n                <p className=\"mt-4 text-gray-700\">{message}</p>\r\n                <div className=\"mt-6 flex justify-end space-x-3\">\r\n                    {isConfirm && (\r\n                        <button \r\n                            onClick={onCancel} \r\n                            className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\"\r\n                        >\r\n                            Abbrechen\r\n                        </button>\r\n                    )}\r\n                    <button \r\n                        onClick={onConfirm} \r\n                        style={{ backgroundColor: type === 'error' ? '#D9534F' : 'var(--farbe-akzent)' }}\r\n                        className=\"px-4 py-2 text-white font-bold rounded-lg hover:opacity-90 transition\"\r\n                    >\r\n                        {isConfirm ? 'Bestätigen' : 'OK'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n// =========================================================================\r\n// ENDE: MODAL-Komponente\r\n// =========================================================================\r\n\r\n\r\n// =========================================================================\r\n// BEGINN: HAUPTKOMPONENTE AdminDashboard\r\n// =========================================================================\r\n\r\nconst AdminDashboard = () => {\r\n    const navigate = useNavigate();\r\n    \r\n    // Produkte und Stoffe\r\n    const [products, setProducts] = useState([]);\r\n    const [fabrics, setFabrics] = useState([]);\r\n    \r\n    // Produkt-Bearbeitung\r\n    const [currentProduct, setCurrentProduct] = useState(null); \r\n\r\n    // Zustand für Modals (Alerts/Confirms)\r\n    const [modal, setModal] = useState({ isOpen: false, title: '', message: '', onConfirm: () => {}, type: 'alert' });\r\n\r\n    // Lade- und Fehlerzustände\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n\r\n    // --- Datenabruf: Produkte und Stoffe ---\r\n\r\n    const fetchAllData = useCallback(async () => {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        try {\r\n            // Stoffe zuerst abrufen, da sie für Produkte benötigt werden\r\n            const fabricsRes = await fetch(`${API_URL}/fabrics`);\r\n            if (!fabricsRes.ok) throw new Error('Fehler beim Abrufen der Stoffe.');\r\n            const fetchedFabrics = await fabricsRes.json();\r\n            setFabrics(fetchedFabrics);\r\n\r\n            // Dann Produkte abrufen\r\n            const productsRes = await fetch(`${API_URL}/products`);\r\n            if (!productsRes.ok) throw new Error('Fehler beim Abrufen der Produkte.');\r\n            const fetchedProducts = await productsRes.json();\r\n            setProducts(fetchedProducts);\r\n            \r\n        } catch (err) {\r\n            setError(err.message);\r\n            setModal({\r\n                isOpen: true,\r\n                title: 'Daten-Fehler',\r\n                message: `Es gab ein Problem beim Laden der Daten: ${err.message}`,\r\n                onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                type: 'error'\r\n            });\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchAllData();\r\n    }, [fetchAllData]);\r\n\r\n\r\n    // --- Produkt-Management Handler ---\r\n\r\n    const handleProductSubmit = useCallback(async (productData) => {\r\n        const adminHeaders = getAuthHeaders();\r\n        if (adminHeaders.error) {\r\n            setModal({\r\n                isOpen: true,\r\n                title: 'Authentifizierungsfehler',\r\n                message: adminHeaders.error,\r\n                onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                type: 'error'\r\n            });\r\n            return;\r\n        }\r\n\r\n        const method = productData.id ? 'PUT' : 'POST';\r\n        const url = productData.id ? `${API_URL}/products/${productData.id}` : `${API_URL}/products`;\r\n        \r\n        try {\r\n            const formData = new FormData();\r\n            // Daten an FormData anhängen\r\n            for (const key in productData) {\r\n                if (key === 'imageFile' && productData[key]) {\r\n                    formData.append(key, productData[key]);\r\n                } else if (key !== 'imageFile') {\r\n                    // Alle anderen Nicht-Datei-Daten als JSON String anhängen\r\n                    formData.append(key, JSON.stringify(productData[key]));\r\n                }\r\n            }\r\n\r\n            const response = await fetch(url, {\r\n                method: method,\r\n                // ACHTUNG: 'Content-Type': 'multipart/form-data' nicht setzen, \r\n                // da der Browser dies mit FormData automatisch und korrekt macht.\r\n                headers: {\r\n                    'Authorization': adminHeaders.Authorization,\r\n                },\r\n                body: formData,\r\n            });\r\n\r\n            if (response.status === 401) {\r\n                const errorBody = await response.json();\r\n                throw new Error(`Serverfehler: 401 - Unauthorized: ${errorBody.message}`);\r\n            }\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                throw new Error(`Fehler bei der Übermittlung: ${errorText}`);\r\n            }\r\n\r\n            await fetchAllData(); // Daten aktualisieren\r\n            setCurrentProduct(null); // Bearbeitungsmodus beenden\r\n\r\n            setModal({\r\n                isOpen: true,\r\n                title: 'Erfolg',\r\n                message: productData.id ? 'Produkt erfolgreich aktualisiert.' : 'Produkt erfolgreich erstellt.',\r\n                onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                type: 'alert'\r\n            });\r\n\r\n        } catch (err) {\r\n            console.error('Fehler bei der Übermittlung:', err);\r\n            setModal({\r\n                isOpen: true,\r\n                title: 'Fehler',\r\n                message: `Fehler bei der Übermittlung: ${err.message}`,\r\n                onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                type: 'error'\r\n            });\r\n        }\r\n    }, [fetchAllData]);\r\n\r\n    const handleEdit = useCallback((product) => {\r\n        setCurrentProduct(product);\r\n    }, []);\r\n\r\n    const handleCancelEdit = useCallback(() => {\r\n        setCurrentProduct(null);\r\n    }, []);\r\n\r\n    const handleDelete = useCallback((productId) => {\r\n        const productToDelete = products.find(p => p.id === productId);\r\n\r\n        setModal({\r\n            isOpen: true,\r\n            title: 'Produkt löschen',\r\n            message: `Sind Sie sicher, dass Sie das Produkt \"${productToDelete.name}\" endgültig löschen möchten?`,\r\n            type: 'confirm',\r\n            onConfirm: async () => {\r\n                const adminHeaders = getAuthHeaders();\r\n                setModal(prev => ({ ...prev, isOpen: false })); // Modal schließen, bevor Fetch beginnt\r\n\r\n                if (adminHeaders.error) {\r\n                    setModal({\r\n                        isOpen: true,\r\n                        title: 'Authentifizierungsfehler',\r\n                        message: adminHeaders.error,\r\n                        onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                        type: 'error'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    const response = await fetch(`${API_URL}/products/${productId}`, {\r\n                        method: 'DELETE',\r\n                        headers: adminHeaders, // KORRIGIERT: Authorization Header wird gesendet\r\n                    });\r\n\r\n                    if (response.status === 401) {\r\n                         const errorBody = await response.json();\r\n                         throw new Error(`Serverfehler: 401 - Unauthorized: ${errorBody.message}`);\r\n                    }\r\n                    if (!response.ok) {\r\n                        throw new Error('Fehler beim Löschen des Produkts.');\r\n                    }\r\n                    \r\n                    await fetchAllData(); // Daten aktualisieren\r\n\r\n                } catch (err) {\r\n                    console.error('Fehler beim Löschen des Produkts:', err);\r\n                    setModal({\r\n                        isOpen: true,\r\n                        title: 'Fehler',\r\n                        message: `Fehler beim Löschen des Produkts: ${err.message}`,\r\n                        onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                        type: 'error'\r\n                    });\r\n                }\r\n            },\r\n            onCancel: () => setModal(prev => ({ ...prev, isOpen: false }))\r\n        });\r\n    }, [products, fetchAllData]);\r\n\r\n\r\n    // --- Stoff-Management Handler ---\r\n\r\n    const handleAddFabric = useCallback(async (fabricData) => {\r\n        const adminHeaders = getAuthHeaders();\r\n        if (adminHeaders.error) {\r\n            setModal({\r\n                isOpen: true,\r\n                title: 'Authentifizierungsfehler',\r\n                message: adminHeaders.error,\r\n                onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                type: 'error'\r\n            });\r\n            return;\r\n        }\r\n\r\n        const method = fabricData.id ? 'PUT' : 'POST';\r\n        const url = fabricData.id ? `${API_URL}/fabrics/${fabricData.id}` : `${API_URL}/fabrics`;\r\n        \r\n        try {\r\n            const formData = new FormData();\r\n            \r\n            for (const key in fabricData) {\r\n                if (key === 'imageFile' && fabricData[key]) {\r\n                    formData.append(key, fabricData[key]);\r\n                } else if (key !== 'imageFile') {\r\n                    // Alle anderen Nicht-Datei-Daten als JSON String anhängen\r\n                    formData.append(key, JSON.stringify(fabricData[key]));\r\n                }\r\n            }\r\n\r\n            const response = await fetch(url, {\r\n                method: method,\r\n                headers: {\r\n                    'Authorization': adminHeaders.Authorization, // KORRIGIERT: Authorization Header wird gesendet\r\n                },\r\n                body: formData,\r\n            });\r\n\r\n            if (response.status === 401) {\r\n                const errorBody = await response.json();\r\n                throw new Error(`Serverfehler: 401 - Unauthorized: ${errorBody.message}`);\r\n            }\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                throw new Error(`Fehler beim Speichern des Stoffes: ${errorText}`);\r\n            }\r\n\r\n            await fetchAllData(); // Daten aktualisieren\r\n            setModal({\r\n                isOpen: true,\r\n                title: 'Erfolg',\r\n                message: fabricData.id ? 'Stoff erfolgreich aktualisiert.' : 'Stoff erfolgreich hinzugefügt.',\r\n                onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                type: 'alert'\r\n            });\r\n        } catch (err) {\r\n            console.error('Fehler beim Hinzufügen des Stoffes:', err);\r\n            setModal({\r\n                isOpen: true,\r\n                title: 'Fehler',\r\n                message: `Fehler beim Speichern des Stoffes: ${err.message}`,\r\n                onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                type: 'error'\r\n            });\r\n        }\r\n    }, [fetchAllData]);\r\n\r\n    const handleDeleteFabric = useCallback((fabricId) => {\r\n         const fabricToDelete = fabrics.find(f => f.id === fabricId);\r\n         const associatedProducts = products.filter(p => p.fabricId === fabricId);\r\n         let message = `Sind Sie sicher, dass Sie den Stoff \"${fabricToDelete.name}\" endgültig löschen möchten?`;\r\n\r\n         if (associatedProducts.length > 0) {\r\n             message += ` ACHTUNG: ${associatedProducts.length} Produkt(e) sind diesem Stoff zugeordnet und werden nach dem Löschen als \"Nicht zugeordnet\" angezeigt.`;\r\n         }\r\n\r\n        setModal({\r\n            isOpen: true,\r\n            title: 'Stoff löschen',\r\n            message: message,\r\n            type: 'confirm',\r\n            onConfirm: async () => {\r\n                const adminHeaders = getAuthHeaders();\r\n                setModal(prev => ({ ...prev, isOpen: false })); \r\n\r\n                if (adminHeaders.error) {\r\n                    setModal({\r\n                        isOpen: true,\r\n                        title: 'Authentifizierungsfehler',\r\n                        message: adminHeaders.error,\r\n                        onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                        type: 'error'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    const response = await fetch(`${API_URL}/fabrics/${fabricId}`, {\r\n                        method: 'DELETE',\r\n                        headers: adminHeaders, // KORRIGIERT: Authorization Header wird gesendet\r\n                    });\r\n\r\n                    if (response.status === 401) {\r\n                        const errorBody = await response.json();\r\n                        throw new Error(`Serverfehler: 401 - Unauthorized: ${errorBody.message}`);\r\n                    }\r\n                    if (!response.ok) {\r\n                        throw new Error('Fehler beim Löschen des Stoffes.');\r\n                    }\r\n                    \r\n                    await fetchAllData(); // Daten aktualisieren\r\n\r\n                } catch (err) {\r\n                    console.error('Fehler beim Löschen des Stoffes:', err);\r\n                    setModal({\r\n                        isOpen: true,\r\n                        title: 'Fehler',\r\n                        message: `Fehler beim Löschen des Stoffes: ${err.message}`,\r\n                        onConfirm: () => setModal(prev => ({ ...prev, isOpen: false })),\r\n                        type: 'error'\r\n                    });\r\n                }\r\n            },\r\n            onCancel: () => setModal(prev => ({ ...prev, isOpen: false }))\r\n        });\r\n    }, [fabrics, products, fetchAllData]);\r\n\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('adminLoggedIn');\r\n        localStorage.removeItem('adminToken');\r\n        navigate('/admin'); // Leitet zur Admin-Login-Seite weiter\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div style={{ padding: '50px', textAlign: 'center', color: 'var(--farbe-primär)' }}>\r\n                <p>Daten werden geladen...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-dash-container\" style={{ \r\n            maxWidth: '1400px', \r\n            margin: '50px auto', \r\n            padding: '20px', \r\n            backgroundColor: 'var(--farbe-hell)',\r\n            borderRadius: '16px',\r\n            boxShadow: '0 8px 30px rgba(0, 0, 0, 0.1)'\r\n        }}>\r\n            {/* Modal für Bestätigungen und Fehler */}\r\n            <Modal {...modal} />\r\n\r\n            <div className=\"flex justify-between items-center mb-6 border-b pb-4\">\r\n                <h1 style={{ color: 'var(--farbe-primär)', fontSize: '2.5em', fontWeight: '800' }}>\r\n                    Admin Dashboard\r\n                </h1>\r\n                <button \r\n                    onClick={handleLogout}\r\n                    className=\"flex items-center space-x-2 px-4 py-2 text-white font-semibold rounded-lg shadow-md transition\"\r\n                    style={{ backgroundColor: '#DC3545', hover: { backgroundColor: '#C82333' } }}\r\n                >\r\n                    <LogOut size={20} />\r\n                    <span>Logout</span>\r\n                </button>\r\n            </div>\r\n            \r\n            {/* 1. Bereich: Produkt-Verwaltung */}\r\n            <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                Produkt-Verwaltung\r\n            </h1>\r\n            \r\n            <div className=\"admin-grid-layout\" style={{ \r\n                display: 'grid', \r\n                gridTemplateColumns: '1fr 2fr', \r\n                gap: '30px',\r\n                // Responsive Anpassung\r\n                '@media (max-width: 1024px)': {\r\n                    gridTemplateColumns: '1fr',\r\n                }\r\n            }}>\r\n                {/* 1. Spalte: Produkt-Formular */}\r\n                <div style={{ paddingRight: '20px', borderRight: currentProduct ? '2px solid var(--farbe-akzent)' : 'none' }}>\r\n                    <ProductForm\r\n                        key={currentProduct ? currentProduct.id : 'new'} \r\n                        productToEdit={currentProduct}\r\n                        onSubmit={handleProductSubmit}\r\n                        onCancel={handleCancelEdit}\r\n                        fabrics={fabrics} \r\n                    />\r\n                </div>\r\n\r\n                {/* 2. Spalte: Produktliste */}\r\n                <div>\r\n                    <AdminProductList \r\n                        products={products}\r\n                        onEdit={handleEdit}\r\n                        onDelete={handleDelete}\r\n                        fabrics={fabrics} \r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            \r\n            {/* 2. Bereich: STOFF-VERWALTUNG (Unterhalb des Grids) */}\r\n            <div style={{ \r\n                marginTop: '40px', \r\n                borderTop: '2px solid var(--farbe-grau)', \r\n                paddingTop: '30px' \r\n            }}>\r\n                <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                    Stoff-Inventar-Verwaltung\r\n                </h1>\r\n                \r\n                {/* Stoff-Formular */}\r\n                <FabricForm \r\n                    onAdd={handleAddFabric} \r\n                    // Fügen Sie Logik zur Bearbeitung hinzu, falls implementiert (derzeit nur hinzufügen/löschen)\r\n                />\r\n                \r\n                {/* Stoff-Liste */}\r\n                <AdminFabricList fabrics={fabrics} onDelete={handleDeleteFabric} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":";;;;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAEC,WAAW,QAAQ,OAAO;AACxE,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,MAAM,EAAEC,IAAI,EAAEC,MAAM,EAAEC,UAAU,EAAEC,WAAW,EAAEC,OAAO,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtF,MAAMC,OAAO,GAAG,2BAA2B;AAC3C,MAAMC,WAAW,GAAG,uBAAuB;AAC3C,MAAMC,kBAAkB,GAAG,qDAAqD;;AAEhF;;AAEA;AACA;AACA;AACA;AACA,MAAMC,cAAc,GAAGA,CAAA,KAAM;EACzB,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;EACrD,IAAI,CAACF,UAAU,EAAE;IACb;IACA,OAAO;MAAEG,KAAK,EAAE;IAAgD,CAAC;EACrE;EACA,OAAO;IACH,cAAc,EAAE,kBAAkB;IAClC,eAAe,EAAE,UAAUH,UAAU;EACzC,CAAC;AACL,CAAC;;AAED;AACA;AACA;AACA,MAAMI,WAAW,GAAIC,SAAS,IAAK;EAC/B,IAAIA,SAAS,IAAIA,SAAS,CAACC,UAAU,CAAC,WAAW,CAAC,EAAE;IAChD,OAAO,GAAGT,WAAW,GAAGQ,SAAS,EAAE;EACvC;EACA,OAAOA,SAAS,IAAIP,kBAAkB;AAC1C,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAMS,eAAe,GAAIC,aAAa,IAAKA,aAAa,IAAI;EACxDC,IAAI,EAAE,EAAE;EACRC,WAAW,EAAE,EAAE;EACfC,KAAK,EAAE,CAAC;EACRC,KAAK,EAAE,CAAC;EACR;EACA;EACAC,eAAe,EAAE,CAAC;EAClBC,cAAc,EAAE,CAAC;EACjBC,UAAU,EAAE,KAAK;EACjBC,SAAS,EAAE,IAAI;EACfC,QAAQ,EAAE,EAAE;EACZC,QAAQ,EAAE;AACd,CAAC;;AAED;AACA,MAAMC,WAAW,GAAGA,CAAC;EAAEX,aAAa;EAAEY,QAAQ;EAAEC,QAAQ;EAAEC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EAEpE;EACA,MAAMC,YAAY,GAAGvC,OAAO,CAAC,MAAMsB,eAAe,CAACC,aAAa,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnF,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAG3C,QAAQ,CAACyC,YAAY,CAAC;EACtD,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAG7C,QAAQ,CAAC,CAAC,CAACyB,aAAa,CAAC;EAC3D,MAAM,CAACqB,YAAY,EAAEC,eAAe,CAAC,GAAG/C,QAAQ,CAAC0C,QAAQ,CAACR,QAAQ,IAAI,IAAI,CAAC;EAG3EjC,SAAS,CAAC,MAAM;IACZ;IACA0C,WAAW,CAACF,YAAY,CAAC;IACzBI,YAAY,CAAC,CAAC,CAACpB,aAAa,CAAC;IAC7BsB,eAAe,CAACN,YAAY,CAACP,QAAQ,IAAI,IAAI,CAAC;EAClD,CAAC,EAAE,CAACO,YAAY,EAAEhB,aAAa,CAAC,CAAC;EAGjC,MAAMuB,YAAY,GAAIC,CAAC,IAAK;IACxB,MAAM;MAAEvB,IAAI;MAAEwB,KAAK;MAAEC,IAAI;MAAEC;IAAQ,CAAC,GAAGH,CAAC,CAACI,MAAM;IAE/C,IAAI3B,IAAI,KAAK,WAAW,EAAE;MACtB,MAAM4B,IAAI,GAAGL,CAAC,CAACI,MAAM,CAACE,KAAK,CAAC,CAAC,CAAC;MAC9BZ,WAAW,CAACa,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAAC9B,IAAI,GAAG4B;MAAK,CAAC,CAAC,CAAC;MAChDP,eAAe,CAACO,IAAI,GAAGG,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,GAAIZ,QAAQ,CAACR,QAAQ,IAAI,IAAK,CAAC;IACnF,CAAC,MAAM,IAAIiB,IAAI,KAAK,UAAU,EAAE;MAC5BR,WAAW,CAACa,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAAC9B,IAAI,GAAG0B;MAAQ,CAAC,CAAC,CAAC;IACvD,CAAC,MAAM,IAAID,IAAI,KAAK,QAAQ,EAAE;MACzB;MACDR,WAAW,CAACa,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAAC9B,IAAI,GAAGiC,UAAU,CAACT,KAAK,CAAC,IAAI;MAAE,CAAC,CAAC,CAAC;IACtE,CAAC,MAAM;MACHP,WAAW,CAACa,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAAC9B,IAAI,GAAGwB;MAAM,CAAC,CAAC,CAAC;IACrD;EACJ,CAAC;EAED,MAAMU,YAAY,GAAIX,CAAC,IAAK;IACxBA,CAAC,CAACY,cAAc,CAAC,CAAC;IAClB;IACAxB,QAAQ,CAACK,QAAQ,CAAC;EACtB,CAAC;EAED,MAAMoB,kBAAkB,GAAGA,CAAA,KAAM;IAC7B,IAAIpB,QAAQ,CAACT,SAAS,EAAE;MACpB,OAAOa,YAAY,CAAC,CAAC;IACzB;IACA,OAAOzB,WAAW,CAACqB,QAAQ,CAACR,QAAQ,CAAC,CAAC,CAAC;EAC3C,CAAC;EAED,MAAM6B,SAAS,GAAGnB,SAAS,GAAG,uBAAuBnB,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEC,IAAI,EAAE,GAAG,yBAAyB;EAEtG,oBACId,OAAA;IAAMyB,QAAQ,EAAEuB,YAAa;IAACI,SAAS,EAAC,sBAAsB;IAAAC,QAAA,gBAC1DrD,OAAA;MAAIoD,SAAS,EAAC,wBAAwB;MAACE,KAAK,EAAE;QAAEC,KAAK,EAAE;MAAsB,CAAE;MAAAF,QAAA,EAC1EF;IAAS;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eAGL3D,OAAA;MAAKoD,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC7BrD,OAAA;QAAO4D,OAAO,EAAC,MAAM;QAAAP,QAAA,EAAC;MAAkB;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAChD3D,OAAA;QACIuC,IAAI,EAAC,MAAM;QACXsB,EAAE,EAAC,MAAM;QACT/C,IAAI,EAAC,MAAM;QACXwB,KAAK,EAAER,QAAQ,CAAChB,IAAK;QACrBgD,QAAQ,EAAE1B,YAAa;QACvB2B,QAAQ;MAAA;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,eAGN3D,OAAA;MAAKoD,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC7BrD,OAAA;QAAO4D,OAAO,EAAC,aAAa;QAAAP,QAAA,EAAC;MAAa;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAClD3D,OAAA;QACI6D,EAAE,EAAC,aAAa;QAChB/C,IAAI,EAAC,aAAa;QAClBwB,KAAK,EAAER,QAAQ,CAACf,WAAY;QAC5B+C,QAAQ,EAAE1B,YAAa;QACvB4B,IAAI,EAAC,GAAG;QACRD,QAAQ;MAAA;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,eAGN3D,OAAA;MAAKoD,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC7BrD,OAAA;QAAO4D,OAAO,EAAC,UAAU;QAAAP,QAAA,EAAC;MAA6B;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC/D3D,OAAA;QACI6D,EAAE,EAAC,UAAU;QACb/C,IAAI,EAAC,UAAU;QACfwB,KAAK,EAAER,QAAQ,CAACP,QAAQ,IAAI,EAAG;QAC/BuC,QAAQ,EAAE1B,YAAa;QAAAiB,QAAA,gBAEvBrD,OAAA;UAAQsC,KAAK,EAAC,EAAE;UAAAe,QAAA,EAAC;QAA2B;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EACpDhC,OAAO,CAACsC,GAAG,CAACC,CAAC,iBACVlE,OAAA;UAAmBsC,KAAK,EAAE4B,CAAC,CAACL,EAAG;UAAAR,QAAA,GAAEa,CAAC,CAACpD,IAAI,EAAC,IAAE,EAACoD,CAAC,CAACC,UAAU,EAAC,GAAC;QAAA,GAA5CD,CAAC,CAACL,EAAE;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAgD,CACpE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,eAGN3D,OAAA;MAAKsD,KAAK,EAAE;QAAEc,OAAO,EAAE,MAAM;QAAEC,mBAAmB,EAAE,SAAS;QAAEC,GAAG,EAAE;MAAO,CAAE;MAAAjB,QAAA,gBACzErD,OAAA;QAAKoD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7BrD,OAAA;UAAO4D,OAAO,EAAC,OAAO;UAAAP,QAAA,EAAC;QAAsB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACrD3D,OAAA;UACIuC,IAAI,EAAC,QAAQ;UACbsB,EAAE,EAAC,OAAO;UACV/C,IAAI,EAAC,OAAO;UACZwB,KAAK,EAAER,QAAQ,CAACd,KAAM;UACtB8C,QAAQ,EAAE1B,YAAa;UACvBmC,GAAG,EAAC,MAAM;UACVC,IAAI,EAAC,MAAM;UACXT,QAAQ;QAAA;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACN3D,OAAA;QAAKoD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7BrD,OAAA;UAAO4D,OAAO,EAAC,OAAO;UAAAP,QAAA,EAAC;QAAyB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACxD3D,OAAA;UACIuC,IAAI,EAAC,QAAQ;UACbsB,EAAE,EAAC,OAAO;UACV/C,IAAI,EAAC,OAAO;UACZwB,KAAK,EAAER,QAAQ,CAACb,KAAM;UACtB6C,QAAQ,EAAE1B,YAAa;UACvBmC,GAAG,EAAC,GAAG;UACPR,QAAQ;QAAA;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGN3D,OAAA;MAAKsD,KAAK,EAAE;QAAEc,OAAO,EAAE,MAAM;QAAEC,mBAAmB,EAAE,SAAS;QAAEC,GAAG,EAAE;MAAO,CAAE;MAAAjB,QAAA,gBACzErD,OAAA;QAAKoD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7BrD,OAAA;UAAO4D,OAAO,EAAC,gBAAgB;UAAAP,QAAA,EAAC;QAAiC;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACzE3D,OAAA;UACIuC,IAAI,EAAC,QAAQ;UACbsB,EAAE,EAAC,gBAAgB;UACnB/C,IAAI,EAAC,gBAAgB;UACrBwB,KAAK,EAAER,QAAQ,CAACX,cAAe,CAAC;UAAA;UAChC2C,QAAQ,EAAE1B,YAAa;UACvBmC,GAAG,EAAC,GAAG;UACPC,IAAI,EAAC;QAAG;UAAAhB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACN3D,OAAA;QAAKoD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7BrD,OAAA;UAAO4D,OAAO,EAAC,iBAAiB;UAAAP,QAAA,EAAC;QAA+B;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACxE3D,OAAA;UACIuC,IAAI,EAAC,QAAQ;UACbsB,EAAE,EAAC,iBAAiB;UACpB/C,IAAI,EAAC,iBAAiB;UACtBwB,KAAK,EAAER,QAAQ,CAACZ,eAAgB,CAAC;UAAA;UACjC4C,QAAQ,EAAE1B,YAAa;UACvBmC,GAAG,EAAC,GAAG;UACPC,IAAI,EAAC;QAAG;UAAAhB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGN3D,OAAA;MAAKoD,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC7BrD,OAAA;QAAO4D,OAAO,EAAC,WAAW;QAAAP,QAAA,EAAC;MAAY;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC/C3D,OAAA;QACIuC,IAAI,EAAC,MAAM;QACXsB,EAAE,EAAC,WAAW;QACd/C,IAAI,EAAC,WAAW;QAChB2D,MAAM,EAAC,SAAS;QAChBX,QAAQ,EAAE1B;MAAa;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC,EAEDT,kBAAkB,CAAC,CAAC,iBACjBlD,OAAA;QAAKsD,KAAK,EAAE;UAAEoB,SAAS,EAAE;QAAO,CAAE;QAAArB,QAAA,eAC9BrD,OAAA;UACI2E,GAAG,EAAEzB,kBAAkB,CAAC,CAAE;UAC1B0B,GAAG,EAAC,UAAU;UACdC,OAAO,EAAGxC,CAAC,IAAK;YAAEA,CAAC,CAACI,MAAM,CAACqC,OAAO,GAAG,IAAI;YAAEzC,CAAC,CAACI,MAAM,CAACkC,GAAG,GAAGxE,kBAAkB;UAAE,CAAE;UAChFmD,KAAK,EAAE;YAAEyB,QAAQ,EAAE,OAAO;YAAEC,SAAS,EAAE,OAAO;YAAEC,YAAY,EAAE,KAAK;YAAEC,MAAM,EAAE;UAAiB;QAAE;UAAA1B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAEN3D,OAAA;MAAKoD,SAAS,EAAC,kBAAkB;MAACE,KAAK,EAAE;QAAEc,OAAO,EAAE,MAAM;QAAEe,UAAU,EAAE,QAAQ;QAAEb,GAAG,EAAE;MAAO,CAAE;MAAAjB,QAAA,gBAC5FrD,OAAA;QACIuC,IAAI,EAAC,UAAU;QACfsB,EAAE,EAAC,YAAY;QACf/C,IAAI,EAAC,YAAY;QACjB0B,OAAO,EAAEV,QAAQ,CAACV,UAAW;QAC7B0C,QAAQ,EAAE1B,YAAa;QACvBkB,KAAK,EAAE;UAAE8B,KAAK,EAAE,MAAM;UAAEC,MAAM,EAAE;QAAO;MAAE;QAAA7B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5C,CAAC,eACF3D,OAAA;QAAO4D,OAAO,EAAC,YAAY;QAACN,KAAK,EAAE;UAAEgC,MAAM,EAAE,CAAC;UAAEC,UAAU,EAAE,QAAQ;UAAEC,MAAM,EAAE;QAAU,CAAE;QAAAnC,QAAA,EAAC;MAE3F;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC,eAEN3D,OAAA;MAAKsD,KAAK,EAAE;QAAEc,OAAO,EAAE,MAAM;QAAEE,GAAG,EAAE,MAAM;QAAEI,SAAS,EAAE;MAAO,CAAE;MAAArB,QAAA,eAC5DrD,OAAA;QAAQuC,IAAI,EAAC,QAAQ;QAACa,SAAS,EAAC,0BAA0B;QAAAC,QAAA,EACrDrB,SAAS,GAAG,sBAAsB,GAAG;MAAmB;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,EAEL3B,SAAS,iBACNhC,OAAA;MAAKsD,KAAK,EAAE;QAAEoB,SAAS,EAAE,MAAM;QAAEe,UAAU,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAiB,CAAE;MAAArC,QAAA,eAC/ErD,OAAA;QAAQuC,IAAI,EAAC,QAAQ;QAACoD,OAAO,EAAEjE,QAAS;QAAC0B,SAAS,EAAC,0BAA0B;QAACE,KAAK,EAAE;UAACsC,eAAe,EAAE;QAAM,CAAE;QAAAvC,QAAA,EAAC;MAEhH;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEf,CAAC;AACD;AACA;AACA;;AAGA;AACA;AACA;;AAEA;AAAA/B,EAAA,CAzNMJ,WAAW;AAAAqE,EAAA,GAAXrE,WAAW;AA0NjB,MAAMsE,gBAAgB,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,MAAM;EAAEC,QAAQ;EAAEtE;AAAQ,CAAC,KAAK;EAElE;EACA,MAAMuE,aAAa,GAAI3E,QAAQ,IAAK;IAChC,MAAM4E,MAAM,GAAGxE,OAAO,CAACyE,IAAI,CAAClC,CAAC,IAAIA,CAAC,CAACL,EAAE,KAAKtC,QAAQ,CAAC;IACnD,OAAO4E,MAAM,GAAGA,MAAM,CAACrF,IAAI,GAAG,kBAAkB;EACpD,CAAC;;EAED;EACA,oBACId,OAAA;IAAKoD,SAAS,EAAC,sBAAsB;IAAAC,QAAA,gBACjCrD,OAAA;MAAIoD,SAAS,EAAC,wBAAwB;MAACE,KAAK,EAAE;QAAEC,KAAK,EAAE;MAAsB,CAAE;MAAAF,QAAA,GAAC,yBACrD,EAAC0C,QAAQ,CAACM,MAAM,EAAC,GAC5C;IAAA;MAAA7C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACL3D,OAAA;MAAOsD,KAAK,EAAE;QAAE8B,KAAK,EAAE,MAAM;QAAEkB,cAAc,EAAE;MAAW,CAAE;MAAAjD,QAAA,gBACxDrD,OAAA;QAAAqD,QAAA,eACIrD,OAAA;UAAIsD,KAAK,EAAE;YAAEsC,eAAe,EAAE;UAAyB,CAAE;UAAAvC,QAAA,gBACrDrD,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAI;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC5D3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAI;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC5D3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAK;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC7D3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAK;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC7D3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAO;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC/D3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAS,CAAE;YAAAnD,QAAA,EAAC;UAAQ;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eACR3D,OAAA;QAAAqD,QAAA,EACK0C,QAAQ,CAAC9B,GAAG,CAAEwC,OAAO,iBAClBzG,OAAA;UAAqBsD,KAAK,EAAE;YAAEoD,YAAY,EAAE;UAAiB,CAAE;UAAArD,QAAA,gBAC3DrD,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE;YAAO,CAAE;YAAAlD,QAAA,eAC3BrD,OAAA;cACI2E,GAAG,EAAElE,WAAW,CAACgG,OAAO,CAACnF,QAAQ,CAAE;cACnCsD,GAAG,EAAE6B,OAAO,CAAC3F,IAAK;cAClB+D,OAAO,EAAGxC,CAAC,IAAK;gBAAEA,CAAC,CAACI,MAAM,CAACqC,OAAO,GAAG,IAAI;gBAAEzC,CAAC,CAACI,MAAM,CAACkC,GAAG,GAAGxE,kBAAkB;cAAE,CAAE;cAChFmD,KAAK,EAAE;gBAAE8B,KAAK,EAAE,MAAM;gBAAEC,MAAM,EAAE,MAAM;gBAAEsB,SAAS,EAAE,OAAO;gBAAE1B,YAAY,EAAE;cAAM;YAAE;cAAAzB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrF;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,eACL3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEhB,UAAU,EAAEkB,OAAO,CAACrF,UAAU,GAAG,MAAM,GAAG;YAAS,CAAE;YAAAiC,QAAA,GAC9EoD,OAAO,CAAC3F,IAAI,EACZ2F,OAAO,CAACrF,UAAU,iBAAIpB,OAAA;cAAMsD,KAAK,EAAE;gBAAEC,KAAK,EAAE,qBAAqB;gBAAEqD,UAAU,EAAE;cAAM,CAAE;cAAAvD,QAAA,EAAC;YAAC;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjG,CAAC,eACL3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEM,QAAQ,EAAE;YAAQ,CAAE;YAAAxD,QAAA,EAC7C6C,aAAa,CAACO,OAAO,CAAClF,QAAQ;UAAC;YAAAiC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC,eACL3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE;YAAO,CAAE;YAAAlD,QAAA,GAAEoD,OAAO,CAACzF,KAAK,CAAC8F,OAAO,CAAC,CAAC,CAAC,EAAC,SAAE;UAAA;YAAAtD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACjE3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEhD,KAAK,EAAEkD,OAAO,CAACxF,KAAK,GAAG,EAAE,GAAG,KAAK,GAAG;YAAQ,CAAE;YAAAoC,QAAA,EAAEoD,OAAO,CAACxF;UAAK;YAAAuC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACjG3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAS,CAAE;YAAAnD,QAAA,gBAChDrD,OAAA;cACI2F,OAAO,EAAEA,CAAA,KAAMK,MAAM,CAACS,OAAO,CAAE;cAC/BnD,KAAK,EAAE;gBAAEC,KAAK,EAAE,4BAA4B;gBAAEwD,WAAW,EAAE,MAAM;gBAAEC,UAAU,EAAE,MAAM;gBAAE9B,MAAM,EAAE,MAAM;gBAAEM,MAAM,EAAE;cAAU,CAAE;cAC3HyB,KAAK,EAAC,YAAY;cAAA5D,QAAA,eAElBrD,OAAA,CAACN,IAAI;gBAACwH,IAAI,EAAE;cAAG;gBAAA1D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACd,CAAC,eACT3D,OAAA;cACI2F,OAAO,EAAEA,CAAA,KAAMM,QAAQ,CAACQ,OAAO,CAAC5C,EAAE,CAAE;cACpCP,KAAK,EAAE;gBAAEC,KAAK,EAAE,SAAS;gBAAEyD,UAAU,EAAE,MAAM;gBAAE9B,MAAM,EAAE,MAAM;gBAAEM,MAAM,EAAE;cAAU,CAAE;cACnFyB,KAAK,EAAC,YAAS;cAAA5D,QAAA,eAEfrD,OAAA,CAACL,MAAM;gBAACuH,IAAI,EAAE;cAAG;gBAAA1D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA,GAjCA8C,OAAO,CAAC5C,EAAE;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAkCf,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,EACPoC,QAAQ,CAACM,MAAM,KAAK,CAAC,iBAClBrG,OAAA;MAAGsD,KAAK,EAAE;QAAEkD,SAAS,EAAE,QAAQ;QAAED,OAAO,EAAE,MAAM;QAAEhD,KAAK,EAAE;MAAO,CAAE;MAAAF,QAAA,EAAC;IAEnE;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AACD;AACA;AACA;;AAGA;AACA;AACA;AAAAwD,GAAA,GAhFMrB,gBAAgB;AAiFtB,MAAMsB,aAAa,GAAG,CAClB,eAAe,EAAE,eAAe,EAAE,UAAU,EAAE,uBAAuB,EACrE,mBAAmB,EAAE,gBAAgB,EAAE,MAAM,EAAE,SAAS,EAAE,aAAa,CAC1E;AACD,MAAMC,YAAY,GAAG,CACjB,QAAQ,EAAE,4BAA4B,EAAE,OAAO,EAAE,eAAe,EAAE,UAAU,EAC5E,mBAAmB,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,qBAAqB,CAC5E;AACD,MAAMC,qBAAqB,GAAG,0DAA0D;;AAExF;AACA,MAAMC,qBAAqB,GAAIC,YAAY,IAAKA,YAAY,IAAI;EAC5D1G,IAAI,EAAE,EAAE;EACRC,WAAW,EAAE,EAAE;EACfoD,UAAU,EAAE,EAAE;EACdsD,WAAW,EAAE,EAAE;EACfxG,KAAK,EAAE,CAAC;EACRK,QAAQ,EAAE,EAAE;EACZD,SAAS,EAAE;AACf,CAAC;AAGD,MAAMqG,UAAU,GAAGA,CAAC;EAAEF,YAAY;EAAEG,KAAK;EAAEjG;AAAS,CAAC,KAAK;EAAAkG,GAAA;EAEtD,MAAM/F,YAAY,GAAGvC,OAAO,CAAC,MAAMiI,qBAAqB,CAACC,YAAY,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAEvF,MAAM,CAAC1F,QAAQ,EAAEC,WAAW,CAAC,GAAG3C,QAAQ,CAACyC,YAAY,CAAC;EACtD,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAG7C,QAAQ,CAAC,CAAC,CAACoI,YAAY,CAAC;EAC1D,MAAM,CAACtF,YAAY,EAAEC,eAAe,CAAC,GAAG/C,QAAQ,CAAC0C,QAAQ,CAACR,QAAQ,IAAI,IAAI,CAAC;EAG3EjC,SAAS,CAAC,MAAM;IACZ0C,WAAW,CAACF,YAAY,CAAC;IACzBI,YAAY,CAAC,CAAC,CAACuF,YAAY,CAAC;IAC5BrF,eAAe,CAACN,YAAY,CAACP,QAAQ,IAAI,IAAI,CAAC;EAClD,CAAC,EAAE,CAACO,YAAY,EAAE2F,YAAY,CAAC,CAAC;EAGhC,MAAMpF,YAAY,GAAIC,CAAC,IAAK;IACxB,MAAM;MAAEvB,IAAI;MAAEwB,KAAK;MAAEC,IAAI;MAAEC;IAAQ,CAAC,GAAGH,CAAC,CAACI,MAAM;IAE/C,IAAI3B,IAAI,KAAK,WAAW,EAAE;MACtB,MAAM4B,IAAI,GAAGL,CAAC,CAACI,MAAM,CAACE,KAAK,CAAC,CAAC,CAAC;MAC9BZ,WAAW,CAACa,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAAC9B,IAAI,GAAG4B;MAAK,CAAC,CAAC,CAAC;MAChDP,eAAe,CAACO,IAAI,GAAGG,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,GAAIZ,QAAQ,CAACR,QAAQ,IAAI,IAAK,CAAC;IACnF,CAAC,MAAM,IAAIR,IAAI,KAAK,aAAa,EAAE;MAC/B,MAAM+G,aAAa,GAAG/F,QAAQ,CAAC2F,WAAW,IAAI,EAAE;MAChD,IAAIjF,OAAO,EAAE;QACTT,WAAW,CAACa,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE6E,WAAW,EAAE,CAAC,GAAGI,aAAa,EAAEvF,KAAK;QAAE,CAAC,CAAC,CAAC;MAC9E,CAAC,MAAM;QACHP,WAAW,CAACa,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE6E,WAAW,EAAEI,aAAa,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKzF,KAAK;QAAE,CAAC,CAAC,CAAC;MAC3F;IACJ,CAAC,MAAM,IAAIC,IAAI,KAAK,QAAQ,EAAE;MAC1BR,WAAW,CAACa,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAAC9B,IAAI,GAAGiC,UAAU,CAACT,KAAK,CAAC,IAAI;MAAE,CAAC,CAAC,CAAC;IACtE,CAAC,MAAM;MACHP,WAAW,CAACa,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAAC9B,IAAI,GAAGwB;MAAM,CAAC,CAAC,CAAC;IACrD;EACJ,CAAC;EAED,MAAMU,YAAY,GAAIX,CAAC,IAAK;IACxBA,CAAC,CAACY,cAAc,CAAC,CAAC;IAClB0E,KAAK,CAAC7F,QAAQ,CAAC,CAAC,CAAC;EACrB,CAAC;EAED,MAAMoB,kBAAkB,GAAGA,CAAA,KAAM;IAC7B,IAAIpB,QAAQ,CAACT,SAAS,EAAE;MACpB,OAAOa,YAAY;IACvB;IACA,OAAOzB,WAAW,CAACqB,QAAQ,CAACR,QAAQ,CAAC;EACzC,CAAC;EAED,MAAM6B,SAAS,GAAGnB,SAAS,GAAG,qBAAqBwF,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAE1G,IAAI,EAAE,GAAG,kCAAkC;EAE5G,oBACId,OAAA;IAAMyB,QAAQ,EAAEuB,YAAa;IAACI,SAAS,EAAC,sBAAsB;IAAAC,QAAA,gBAC1DrD,OAAA;MAAIoD,SAAS,EAAC,wBAAwB;MAACE,KAAK,EAAE;QAAEC,KAAK,EAAE;MAAsB,CAAE;MAAAF,QAAA,EAC1EF;IAAS;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eAGL3D,OAAA;MAAKsD,KAAK,EAAE;QAAEc,OAAO,EAAE,MAAM;QAAEC,mBAAmB,EAAE,SAAS;QAAEC,GAAG,EAAE;MAAO,CAAE;MAAAjB,QAAA,gBACzErD,OAAA;QAAKoD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7BrD,OAAA;UAAO4D,OAAO,EAAC,MAAM;UAAAP,QAAA,EAAC;QAAgB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC9C3D,OAAA;UACIuC,IAAI,EAAC,MAAM;UACXsB,EAAE,EAAC,MAAM;UACT/C,IAAI,EAAC,MAAM;UACXwB,KAAK,EAAER,QAAQ,CAAChB,IAAK;UACrBgD,QAAQ,EAAE1B,YAAa;UACvB2B,QAAQ;QAAA;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACN3D,OAAA;QAAKoD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7BrD,OAAA;UAAO4D,OAAO,EAAC,YAAY;UAAAP,QAAA,EAAC;QAAS;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC7C3D,OAAA;UACI6D,EAAE,EAAC,YAAY;UACf/C,IAAI,EAAC,YAAY;UACjBwB,KAAK,EAAER,QAAQ,CAACqC,UAAW;UAC3BL,QAAQ,EAAE1B,YAAa;UACvB2B,QAAQ;UAAAV,QAAA,gBAERrD,OAAA;YAAQsC,KAAK,EAAC,EAAE;YAAAe,QAAA,EAAC;UAAqB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,EAC9C0D,YAAY,CAACpD,GAAG,CAAC1B,IAAI,iBAClBvC,OAAA;YAAmBsC,KAAK,EAAEC,IAAK;YAAAc,QAAA,EAAEd;UAAI,GAAxBA,IAAI;YAAAiB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAA6B,CACjD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGN3D,OAAA;MAAKsD,KAAK,EAAE;QAAEc,OAAO,EAAE,MAAM;QAAEC,mBAAmB,EAAE,SAAS;QAAEC,GAAG,EAAE;MAAO,CAAE;MAAAjB,QAAA,gBACzErD,OAAA;QAAKoD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7BrD,OAAA;UAAO4D,OAAO,EAAC,aAAa;UAAAP,QAAA,EAAC;QAAa;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAClD3D,OAAA;UACI6D,EAAE,EAAC,aAAa;UAChB/C,IAAI,EAAC,aAAa;UAClBwB,KAAK,EAAER,QAAQ,CAACf,WAAY;UAC5B+C,QAAQ,EAAE1B,YAAa;UACvB4B,IAAI,EAAC,GAAG;UACRD,QAAQ;QAAA;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACN3D,OAAA;QAAKoD,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7BrD,OAAA;UAAO4D,OAAO,EAAC,OAAO;UAAAP,QAAA,EAAC;QAAqB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACpD3D,OAAA;UACIuC,IAAI,EAAC,QAAQ;UACbsB,EAAE,EAAC,OAAO;UACV/C,IAAI,EAAC,OAAO;UACZwB,KAAK,EAAER,QAAQ,CAACb,KAAM;UACtB6C,QAAQ,EAAE1B,YAAa;UACvBmC,GAAG,EAAC,GAAG;UACPC,IAAI,EAAC,KAAK;UACVT,QAAQ;QAAA;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGN3D,OAAA;MAAKoD,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC7BrD,OAAA;QAAAqD,QAAA,EAAO;MAAa;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC5B3D,OAAA;QAAKsD,KAAK,EAAE;UAAEc,OAAO,EAAE,MAAM;UAAE4D,QAAQ,EAAE,MAAM;UAAE1D,GAAG,EAAE;QAAO,CAAE;QAAAjB,QAAA,EAC1D+D,aAAa,CAACnD,GAAG,CAACgE,KAAK,iBACpBjI,OAAA;UAAiBsD,KAAK,EAAE;YAAEc,OAAO,EAAE,MAAM;YAAEe,UAAU,EAAE,QAAQ;YAAEb,GAAG,EAAE;UAAM,CAAE;UAAAjB,QAAA,gBAC1ErD,OAAA;YACIuC,IAAI,EAAC,UAAU;YACfsB,EAAE,EAAE,SAASoE,KAAK,EAAG;YACrBnH,IAAI,EAAC,aAAa;YAClBwB,KAAK,EAAE2F,KAAM;YACbzF,OAAO,EAAE,CAACV,QAAQ,CAAC2F,WAAW,IAAI,EAAE,EAAES,QAAQ,CAACD,KAAK,CAAE;YACtDnE,QAAQ,EAAE1B,YAAa;YACvBkB,KAAK,EAAE;cAAE8B,KAAK,EAAE,MAAM;cAAEC,MAAM,EAAE;YAAO;UAAE;YAAA7B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C,CAAC,eACF3D,OAAA;YAAO4D,OAAO,EAAE,SAASqE,KAAK,EAAG;YAAC3E,KAAK,EAAE;cAAEgC,MAAM,EAAE,CAAC;cAAEC,UAAU,EAAE;YAAS,CAAE;YAAAlC,QAAA,EAAE4E;UAAK;YAAAzE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,GAVvFsE,KAAK;UAAAzE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAWV,CACR;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGN3D,OAAA;MAAKoD,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC7BrD,OAAA;QAAO4D,OAAO,EAAC,WAAW;QAAAP,QAAA,EAAC;MAA4B;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC/D3D,OAAA;QACIuC,IAAI,EAAC,MAAM;QACXsB,EAAE,EAAC,WAAW;QACd/C,IAAI,EAAC,WAAW;QAChB2D,MAAM,EAAC,SAAS;QAChBX,QAAQ,EAAE1B;MAAa;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC,eAEF3D,OAAA;QAAKsD,KAAK,EAAE;UAAEoB,SAAS,EAAE;QAAO,CAAE;QAAArB,QAAA,eAC9BrD,OAAA;UACI2E,GAAG,EAAEzB,kBAAkB,CAAC,CAAE;UAC1B0B,GAAG,EAAC,UAAU;UACdC,OAAO,EAAGxC,CAAC,IAAK;YAAEA,CAAC,CAACI,MAAM,CAACqC,OAAO,GAAG,IAAI;YAAEzC,CAAC,CAACI,MAAM,CAACkC,GAAG,GAAG2C,qBAAqB;UAAE,CAAE;UACnFhE,KAAK,EAAE;YAAEyB,QAAQ,EAAE,OAAO;YAAEC,SAAS,EAAE,OAAO;YAAEC,YAAY,EAAE,KAAK;YAAEC,MAAM,EAAE;UAAiB;QAAE;UAAA1B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGN3D,OAAA;MAAKsD,KAAK,EAAE;QAAEc,OAAO,EAAE,MAAM;QAAEE,GAAG,EAAE,MAAM;QAAEI,SAAS,EAAE;MAAO,CAAE;MAAArB,QAAA,eAC5DrD,OAAA;QAAQuC,IAAI,EAAC,QAAQ;QAACa,SAAS,EAAC,0BAA0B;QAAAC,QAAA,EACrDrB,SAAS,GAAG,sBAAsB,GAAG;MAAiB;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,EAEL3B,SAAS,iBACNhC,OAAA;MAAKsD,KAAK,EAAE;QAAEoB,SAAS,EAAE,MAAM;QAAEe,UAAU,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAiB,CAAE;MAAArC,QAAA,eAC/ErD,OAAA;QAAQuC,IAAI,EAAC,QAAQ;QAACoD,OAAO,EAAEjE,QAAS;QAAC0B,SAAS,EAAC,0BAA0B;QAACE,KAAK,EAAE;UAACsC,eAAe,EAAE;QAAM,CAAE;QAAAvC,QAAA,EAAC;MAEhH;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEf,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AAAAiE,GAAA,CApLMF,UAAU;AAAAS,GAAA,GAAVT,UAAU;AAsLhB,MAAMU,eAAe,GAAGA,CAAC;EAAEzG,OAAO;EAAEsE;AAAS,CAAC,KAAK;EAC/C,oBACIjG,OAAA;IAAKoD,SAAS,EAAC,sBAAsB;IAACE,KAAK,EAAE;MAAEoB,SAAS,EAAE;IAAO,CAAE;IAAArB,QAAA,gBAC/DrD,OAAA;MAAIoD,SAAS,EAAC,wBAAwB;MAACE,KAAK,EAAE;QAAEC,KAAK,EAAE;MAAsB,CAAE;MAAAF,QAAA,GAAC,uBACvD,EAAC1B,OAAO,CAAC0E,MAAM,EAAC,GACzC;IAAA;MAAA7C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACL3D,OAAA;MAAOsD,KAAK,EAAE;QAAE8B,KAAK,EAAE,MAAM;QAAEkB,cAAc,EAAE;MAAW,CAAE;MAAAjD,QAAA,gBACxDrD,OAAA;QAAAqD,QAAA,eACIrD,OAAA;UAAIsD,KAAK,EAAE;YAAEsC,eAAe,EAAE;UAAyB,CAAE;UAAAvC,QAAA,gBACrDrD,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAI;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC5D3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAI;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC5D3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAG;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC3D3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAAnD,QAAA,EAAC;UAAW;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACnE3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAS,CAAE;YAAAnD,QAAA,EAAC;UAAQ;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eACR3D,OAAA;QAAAqD,QAAA,EACK1B,OAAO,CAACsC,GAAG,CAAEkC,MAAM,iBAChBnG,OAAA;UAAoBsD,KAAK,EAAE;YAAEoD,YAAY,EAAE;UAAiB,CAAE;UAAArD,QAAA,gBAC1DrD,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE;YAAO,CAAE;YAAAlD,QAAA,eAC3BrD,OAAA;cACI2E,GAAG,EAAElE,WAAW,CAAC0F,MAAM,CAAC7E,QAAQ,CAAE;cAClCsD,GAAG,EAAEuB,MAAM,CAACrF,IAAK;cACjB+D,OAAO,EAAGxC,CAAC,IAAK;gBAAEA,CAAC,CAACI,MAAM,CAACqC,OAAO,GAAG,IAAI;gBAAEzC,CAAC,CAACI,MAAM,CAACkC,GAAG,GAAGxE,kBAAkB;cAAE,CAAE;cAChFmD,KAAK,EAAE;gBAAE8B,KAAK,EAAE,MAAM;gBAAEC,MAAM,EAAE,MAAM;gBAAEsB,SAAS,EAAE,OAAO;gBAAE1B,YAAY,EAAE;cAAM;YAAE;cAAAzB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrF;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,eACL3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEM,QAAQ,EAAE;YAAQ,CAAE;YAAAxD,QAAA,EAC7C8C,MAAM,CAACrF;UAAI;YAAA0C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACZ,CAAC,eACL3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEM,QAAQ,EAAE;YAAQ,CAAE;YAAAxD,QAAA,EAC7C8C,MAAM,CAAChC;UAAU;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClB,CAAC,eACL3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEhD,KAAK,EAAE4C,MAAM,CAAClF,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG;YAAQ,CAAE;YAAAoC,QAAA,EACrE8C,MAAM,CAAClF,KAAK,CAAC6F,OAAO,CAAC,CAAC;UAAC;YAAAtD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC,eACL3D,OAAA;YAAIsD,KAAK,EAAE;cAAEiD,OAAO,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAS,CAAE;YAAAnD,QAAA,eAQhDrD,OAAA;cACI2F,OAAO,EAAEA,CAAA,KAAMM,QAAQ,CAACE,MAAM,CAACtC,EAAE,CAAE;cACnCP,KAAK,EAAE;gBAAEC,KAAK,EAAE,SAAS;gBAAEyD,UAAU,EAAE,MAAM;gBAAE9B,MAAM,EAAE,MAAM;gBAAEM,MAAM,EAAE;cAAU,CAAE;cACnFyB,KAAK,EAAC,YAAS;cAAA5D,QAAA,eAEfrD,OAAA,CAACL,MAAM;gBAACuH,IAAI,EAAE;cAAG;gBAAA1D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA,GAjCAwC,MAAM,CAACtC,EAAE;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAkCd,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,EACPhC,OAAO,CAAC0E,MAAM,KAAK,CAAC,iBACjBrG,OAAA;MAAGsD,KAAK,EAAE;QAAEkD,SAAS,EAAE,QAAQ;QAAED,OAAO,EAAE,MAAM;QAAEhD,KAAK,EAAE;MAAO,CAAE;MAAAF,QAAA,EAAC;IAEnE;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AAAA0E,GAAA,GAtEMD,eAAe;AAwErB,MAAME,KAAK,GAAGA,CAAC;EAAEC,MAAM;EAAEtB,KAAK;EAAEuB,OAAO;EAAEC,SAAS;EAAE/G,QAAQ;EAAEa,IAAI,GAAG;AAAQ,CAAC,KAAK;EAC/E,IAAI,CAACgG,MAAM,EAAE,OAAO,IAAI;EAExB,MAAMG,SAAS,GAAGnG,IAAI,KAAK,SAAS;EAEpC,oBACIvC,OAAA;IAAKoD,SAAS,EAAC,6GAA6G;IAAAC,QAAA,eACxHrD,OAAA;MAAKoD,SAAS,EAAC,wCAAwC;MAAAC,QAAA,gBACnDrD,OAAA;QAAKoD,SAAS,EAAC,kCAAkC;QAAAC,QAAA,gBAC7CrD,OAAA;UAAIoD,SAAS,EAAC,mBAAmB;UAACE,KAAK,EAAE;YAAEC,KAAK,EAAEhB,IAAI,KAAK,OAAO,GAAG,SAAS,GAAG;UAAsB,CAAE;UAAAc,QAAA,EACpG4D;QAAK;UAAAzD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACL3D,OAAA;UAAQ2F,OAAO,EAAEjE,QAAQ,IAAI+G,SAAU;UAACrF,SAAS,EAAC,mCAAmC;UAAAC,QAAA,eACjFrD,OAAA,CAACF,OAAO;YAACoH,IAAI,EAAE;UAAG;YAAA1D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eACN3D,OAAA;QAAGoD,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAEmF;MAAO;QAAAhF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC/C3D,OAAA;QAAKoD,SAAS,EAAC,iCAAiC;QAAAC,QAAA,GAC3CqF,SAAS,iBACN1I,OAAA;UACI2F,OAAO,EAAEjE,QAAS;UAClB0B,SAAS,EAAC,6EAA6E;UAAAC,QAAA,EAC1F;QAED;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CACX,eACD3D,OAAA;UACI2F,OAAO,EAAE8C,SAAU;UACnBnF,KAAK,EAAE;YAAEsC,eAAe,EAAErD,IAAI,KAAK,OAAO,GAAG,SAAS,GAAG;UAAsB,CAAE;UACjFa,SAAS,EAAC,uEAAuE;UAAAC,QAAA,EAEhFqF,SAAS,GAAG,YAAY,GAAG;QAAI;UAAAlF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AACD;AACA;AACA;;AAGA;AACA;AACA;AAAAgF,GAAA,GA7CML,KAAK;AA+CX,MAAMM,cAAc,GAAGA,CAAA,KAAM;EAAAC,GAAA;EACzB,MAAMC,QAAQ,GAAGtJ,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAM,CAACuG,QAAQ,EAAEgD,WAAW,CAAC,GAAG3J,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACuC,OAAO,EAAEqH,UAAU,CAAC,GAAG5J,QAAQ,CAAC,EAAE,CAAC;;EAE1C;EACA,MAAM,CAAC6J,cAAc,EAAEC,iBAAiB,CAAC,GAAG9J,QAAQ,CAAC,IAAI,CAAC;;EAE1D;EACA,MAAM,CAAC+J,KAAK,EAAEC,QAAQ,CAAC,GAAGhK,QAAQ,CAAC;IAAEmJ,MAAM,EAAE,KAAK;IAAEtB,KAAK,EAAE,EAAE;IAAEuB,OAAO,EAAE,EAAE;IAAEC,SAAS,EAAEA,CAAA,KAAM,CAAC,CAAC;IAAElG,IAAI,EAAE;EAAQ,CAAC,CAAC;;EAEjH;EACA,MAAM,CAAC8G,SAAS,EAAEC,YAAY,CAAC,GAAGlK,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACoB,KAAK,EAAE+I,QAAQ,CAAC,GAAGnK,QAAQ,CAAC,IAAI,CAAC;;EAGxC;;EAEA,MAAMoK,YAAY,GAAGjK,WAAW,CAAC,YAAY;IACzC+J,YAAY,CAAC,IAAI,CAAC;IAClBC,QAAQ,CAAC,IAAI,CAAC;IACd,IAAI;MACA;MACA,MAAME,UAAU,GAAG,MAAMC,KAAK,CAAC,GAAGzJ,OAAO,UAAU,CAAC;MACpD,IAAI,CAACwJ,UAAU,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;MACtE,MAAMC,cAAc,GAAG,MAAMJ,UAAU,CAACK,IAAI,CAAC,CAAC;MAC9Cd,UAAU,CAACa,cAAc,CAAC;;MAE1B;MACA,MAAME,WAAW,GAAG,MAAML,KAAK,CAAC,GAAGzJ,OAAO,WAAW,CAAC;MACtD,IAAI,CAAC8J,WAAW,CAACJ,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;MACzE,MAAMI,eAAe,GAAG,MAAMD,WAAW,CAACD,IAAI,CAAC,CAAC;MAChDf,WAAW,CAACiB,eAAe,CAAC;IAEhC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACVV,QAAQ,CAACU,GAAG,CAACzB,OAAO,CAAC;MACrBY,QAAQ,CAAC;QACLb,MAAM,EAAE,IAAI;QACZtB,KAAK,EAAE,cAAc;QACrBuB,OAAO,EAAE,4CAA4CyB,GAAG,CAACzB,OAAO,EAAE;QAClEC,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC;QAC/DhG,IAAI,EAAE;MACV,CAAC,CAAC;IACN,CAAC,SAAS;MACN+G,YAAY,CAAC,KAAK,CAAC;IACvB;EACJ,CAAC,EAAE,EAAE,CAAC;EAENjK,SAAS,CAAC,MAAM;IACZmK,YAAY,CAAC,CAAC;EAClB,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;;EAGlB;;EAEA,MAAMU,mBAAmB,GAAG3K,WAAW,CAAC,MAAO4K,WAAW,IAAK;IAC3D,MAAMC,YAAY,GAAGhK,cAAc,CAAC,CAAC;IACrC,IAAIgK,YAAY,CAAC5J,KAAK,EAAE;MACpB4I,QAAQ,CAAC;QACLb,MAAM,EAAE,IAAI;QACZtB,KAAK,EAAE,0BAA0B;QACjCuB,OAAO,EAAE4B,YAAY,CAAC5J,KAAK;QAC3BiI,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC;QAC/DhG,IAAI,EAAE;MACV,CAAC,CAAC;MACF;IACJ;IAEA,MAAM8H,MAAM,GAAGF,WAAW,CAACtG,EAAE,GAAG,KAAK,GAAG,MAAM;IAC9C,MAAMyG,GAAG,GAAGH,WAAW,CAACtG,EAAE,GAAG,GAAG5D,OAAO,aAAakK,WAAW,CAACtG,EAAE,EAAE,GAAG,GAAG5D,OAAO,WAAW;IAE5F,IAAI;MACA,MAAM6B,QAAQ,GAAG,IAAIyI,QAAQ,CAAC,CAAC;MAC/B;MACA,KAAK,MAAMC,GAAG,IAAIL,WAAW,EAAE;QAC3B,IAAIK,GAAG,KAAK,WAAW,IAAIL,WAAW,CAACK,GAAG,CAAC,EAAE;UACzC1I,QAAQ,CAAC2I,MAAM,CAACD,GAAG,EAAEL,WAAW,CAACK,GAAG,CAAC,CAAC;QAC1C,CAAC,MAAM,IAAIA,GAAG,KAAK,WAAW,EAAE;UAC5B;UACA1I,QAAQ,CAAC2I,MAAM,CAACD,GAAG,EAAEE,IAAI,CAACC,SAAS,CAACR,WAAW,CAACK,GAAG,CAAC,CAAC,CAAC;QAC1D;MACJ;MAEA,MAAMI,QAAQ,GAAG,MAAMlB,KAAK,CAACY,GAAG,EAAE;QAC9BD,MAAM,EAAEA,MAAM;QACd;QACA;QACAQ,OAAO,EAAE;UACL,eAAe,EAAET,YAAY,CAACU;QAClC,CAAC;QACDC,IAAI,EAAEjJ;MACV,CAAC,CAAC;MAEF,IAAI8I,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QACzB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACd,IAAI,CAAC,CAAC;QACvC,MAAM,IAAIF,KAAK,CAAC,qCAAqCqB,SAAS,CAACzC,OAAO,EAAE,CAAC;MAC7E;MACA,IAAI,CAACoC,QAAQ,CAACjB,EAAE,EAAE;QACd,MAAMuB,SAAS,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;QACvC,MAAM,IAAIvB,KAAK,CAAC,gCAAgCsB,SAAS,EAAE,CAAC;MAChE;MAEA,MAAM1B,YAAY,CAAC,CAAC,CAAC,CAAC;MACtBN,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;;MAEzBE,QAAQ,CAAC;QACLb,MAAM,EAAE,IAAI;QACZtB,KAAK,EAAE,QAAQ;QACfuB,OAAO,EAAE2B,WAAW,CAACtG,EAAE,GAAG,mCAAmC,GAAG,+BAA+B;QAC/F4E,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC;QAC/DhG,IAAI,EAAE;MACV,CAAC,CAAC;IAEN,CAAC,CAAC,OAAO0H,GAAG,EAAE;MACVmB,OAAO,CAAC5K,KAAK,CAAC,8BAA8B,EAAEyJ,GAAG,CAAC;MAClDb,QAAQ,CAAC;QACLb,MAAM,EAAE,IAAI;QACZtB,KAAK,EAAE,QAAQ;QACfuB,OAAO,EAAE,gCAAgCyB,GAAG,CAACzB,OAAO,EAAE;QACtDC,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC;QAC/DhG,IAAI,EAAE;MACV,CAAC,CAAC;IACN;EACJ,CAAC,EAAE,CAACiH,YAAY,CAAC,CAAC;EAElB,MAAM6B,UAAU,GAAG9L,WAAW,CAAEkH,OAAO,IAAK;IACxCyC,iBAAiB,CAACzC,OAAO,CAAC;EAC9B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM6E,gBAAgB,GAAG/L,WAAW,CAAC,MAAM;IACvC2J,iBAAiB,CAAC,IAAI,CAAC;EAC3B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMqC,YAAY,GAAGhM,WAAW,CAAEiM,SAAS,IAAK;IAC5C,MAAMC,eAAe,GAAG1F,QAAQ,CAACK,IAAI,CAACsF,CAAC,IAAIA,CAAC,CAAC7H,EAAE,KAAK2H,SAAS,CAAC;IAE9DpC,QAAQ,CAAC;MACLb,MAAM,EAAE,IAAI;MACZtB,KAAK,EAAE,iBAAiB;MACxBuB,OAAO,EAAE,0CAA0CiD,eAAe,CAAC3K,IAAI,8BAA8B;MACrGyB,IAAI,EAAE,SAAS;MACfkG,SAAS,EAAE,MAAAA,CAAA,KAAY;QACnB,MAAM2B,YAAY,GAAGhK,cAAc,CAAC,CAAC;QACrCgJ,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEhD,IAAI6B,YAAY,CAAC5J,KAAK,EAAE;UACpB4I,QAAQ,CAAC;YACLb,MAAM,EAAE,IAAI;YACZtB,KAAK,EAAE,0BAA0B;YACjCuB,OAAO,EAAE4B,YAAY,CAAC5J,KAAK;YAC3BiI,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;cAAE,GAAGA,IAAI;cAAE2F,MAAM,EAAE;YAAM,CAAC,CAAC,CAAC;YAC/DhG,IAAI,EAAE;UACV,CAAC,CAAC;UACF;QACJ;QAEA,IAAI;UACA,MAAMqI,QAAQ,GAAG,MAAMlB,KAAK,CAAC,GAAGzJ,OAAO,aAAauL,SAAS,EAAE,EAAE;YAC7DnB,MAAM,EAAE,QAAQ;YAChBQ,OAAO,EAAET,YAAY,CAAE;UAC3B,CAAC,CAAC;UAEF,IAAIQ,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;YACxB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACd,IAAI,CAAC,CAAC;YACvC,MAAM,IAAIF,KAAK,CAAC,qCAAqCqB,SAAS,CAACzC,OAAO,EAAE,CAAC;UAC9E;UACA,IAAI,CAACoC,QAAQ,CAACjB,EAAE,EAAE;YACd,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;UACxD;UAEA,MAAMJ,YAAY,CAAC,CAAC,CAAC,CAAC;QAE1B,CAAC,CAAC,OAAOS,GAAG,EAAE;UACVmB,OAAO,CAAC5K,KAAK,CAAC,mCAAmC,EAAEyJ,GAAG,CAAC;UACvDb,QAAQ,CAAC;YACLb,MAAM,EAAE,IAAI;YACZtB,KAAK,EAAE,QAAQ;YACfuB,OAAO,EAAE,qCAAqCyB,GAAG,CAACzB,OAAO,EAAE;YAC3DC,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;cAAE,GAAGA,IAAI;cAAE2F,MAAM,EAAE;YAAM,CAAC,CAAC,CAAC;YAC/DhG,IAAI,EAAE;UACV,CAAC,CAAC;QACN;MACJ,CAAC;MACDb,QAAQ,EAAEA,CAAA,KAAM0H,QAAQ,CAACxG,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE2F,MAAM,EAAE;MAAM,CAAC,CAAC;IACjE,CAAC,CAAC;EACN,CAAC,EAAE,CAACxC,QAAQ,EAAEyD,YAAY,CAAC,CAAC;;EAG5B;;EAEA,MAAMmC,eAAe,GAAGpM,WAAW,CAAC,MAAOqM,UAAU,IAAK;IACtD,MAAMxB,YAAY,GAAGhK,cAAc,CAAC,CAAC;IACrC,IAAIgK,YAAY,CAAC5J,KAAK,EAAE;MACpB4I,QAAQ,CAAC;QACLb,MAAM,EAAE,IAAI;QACZtB,KAAK,EAAE,0BAA0B;QACjCuB,OAAO,EAAE4B,YAAY,CAAC5J,KAAK;QAC3BiI,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC;QAC/DhG,IAAI,EAAE;MACV,CAAC,CAAC;MACF;IACJ;IAEA,MAAM8H,MAAM,GAAGuB,UAAU,CAAC/H,EAAE,GAAG,KAAK,GAAG,MAAM;IAC7C,MAAMyG,GAAG,GAAGsB,UAAU,CAAC/H,EAAE,GAAG,GAAG5D,OAAO,YAAY2L,UAAU,CAAC/H,EAAE,EAAE,GAAG,GAAG5D,OAAO,UAAU;IAExF,IAAI;MACA,MAAM6B,QAAQ,GAAG,IAAIyI,QAAQ,CAAC,CAAC;MAE/B,KAAK,MAAMC,GAAG,IAAIoB,UAAU,EAAE;QAC1B,IAAIpB,GAAG,KAAK,WAAW,IAAIoB,UAAU,CAACpB,GAAG,CAAC,EAAE;UACxC1I,QAAQ,CAAC2I,MAAM,CAACD,GAAG,EAAEoB,UAAU,CAACpB,GAAG,CAAC,CAAC;QACzC,CAAC,MAAM,IAAIA,GAAG,KAAK,WAAW,EAAE;UAC5B;UACA1I,QAAQ,CAAC2I,MAAM,CAACD,GAAG,EAAEE,IAAI,CAACC,SAAS,CAACiB,UAAU,CAACpB,GAAG,CAAC,CAAC,CAAC;QACzD;MACJ;MAEA,MAAMI,QAAQ,GAAG,MAAMlB,KAAK,CAACY,GAAG,EAAE;QAC9BD,MAAM,EAAEA,MAAM;QACdQ,OAAO,EAAE;UACL,eAAe,EAAET,YAAY,CAACU,aAAa,CAAE;QACjD,CAAC;QACDC,IAAI,EAAEjJ;MACV,CAAC,CAAC;MAEF,IAAI8I,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QACzB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACd,IAAI,CAAC,CAAC;QACvC,MAAM,IAAIF,KAAK,CAAC,qCAAqCqB,SAAS,CAACzC,OAAO,EAAE,CAAC;MAC7E;MACA,IAAI,CAACoC,QAAQ,CAACjB,EAAE,EAAE;QACd,MAAMuB,SAAS,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;QACvC,MAAM,IAAIvB,KAAK,CAAC,sCAAsCsB,SAAS,EAAE,CAAC;MACtE;MAEA,MAAM1B,YAAY,CAAC,CAAC,CAAC,CAAC;MACtBJ,QAAQ,CAAC;QACLb,MAAM,EAAE,IAAI;QACZtB,KAAK,EAAE,QAAQ;QACfuB,OAAO,EAAEoD,UAAU,CAAC/H,EAAE,GAAG,iCAAiC,GAAG,gCAAgC;QAC7F4E,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC;QAC/DhG,IAAI,EAAE;MACV,CAAC,CAAC;IACN,CAAC,CAAC,OAAO0H,GAAG,EAAE;MACVmB,OAAO,CAAC5K,KAAK,CAAC,qCAAqC,EAAEyJ,GAAG,CAAC;MACzDb,QAAQ,CAAC;QACLb,MAAM,EAAE,IAAI;QACZtB,KAAK,EAAE,QAAQ;QACfuB,OAAO,EAAE,sCAAsCyB,GAAG,CAACzB,OAAO,EAAE;QAC5DC,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC;QAC/DhG,IAAI,EAAE;MACV,CAAC,CAAC;IACN;EACJ,CAAC,EAAE,CAACiH,YAAY,CAAC,CAAC;EAElB,MAAMqC,kBAAkB,GAAGtM,WAAW,CAAEgC,QAAQ,IAAK;IAChD,MAAMuK,cAAc,GAAGnK,OAAO,CAACyE,IAAI,CAAClC,CAAC,IAAIA,CAAC,CAACL,EAAE,KAAKtC,QAAQ,CAAC;IAC3D,MAAMwK,kBAAkB,GAAGhG,QAAQ,CAAC+B,MAAM,CAAC4D,CAAC,IAAIA,CAAC,CAACnK,QAAQ,KAAKA,QAAQ,CAAC;IACxE,IAAIiH,OAAO,GAAG,wCAAwCsD,cAAc,CAAChL,IAAI,8BAA8B;IAEvG,IAAIiL,kBAAkB,CAAC1F,MAAM,GAAG,CAAC,EAAE;MAC/BmC,OAAO,IAAI,aAAauD,kBAAkB,CAAC1F,MAAM,wGAAwG;IAC7J;IAED+C,QAAQ,CAAC;MACLb,MAAM,EAAE,IAAI;MACZtB,KAAK,EAAE,eAAe;MACtBuB,OAAO,EAAEA,OAAO;MAChBjG,IAAI,EAAE,SAAS;MACfkG,SAAS,EAAE,MAAAA,CAAA,KAAY;QACnB,MAAM2B,YAAY,GAAGhK,cAAc,CAAC,CAAC;QACrCgJ,QAAQ,CAACxG,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE2F,MAAM,EAAE;QAAM,CAAC,CAAC,CAAC;QAE9C,IAAI6B,YAAY,CAAC5J,KAAK,EAAE;UACpB4I,QAAQ,CAAC;YACLb,MAAM,EAAE,IAAI;YACZtB,KAAK,EAAE,0BAA0B;YACjCuB,OAAO,EAAE4B,YAAY,CAAC5J,KAAK;YAC3BiI,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;cAAE,GAAGA,IAAI;cAAE2F,MAAM,EAAE;YAAM,CAAC,CAAC,CAAC;YAC/DhG,IAAI,EAAE;UACV,CAAC,CAAC;UACF;QACJ;QAEA,IAAI;UACA,MAAMqI,QAAQ,GAAG,MAAMlB,KAAK,CAAC,GAAGzJ,OAAO,YAAYsB,QAAQ,EAAE,EAAE;YAC3D8I,MAAM,EAAE,QAAQ;YAChBQ,OAAO,EAAET,YAAY,CAAE;UAC3B,CAAC,CAAC;UAEF,IAAIQ,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;YACzB,MAAMC,SAAS,GAAG,MAAML,QAAQ,CAACd,IAAI,CAAC,CAAC;YACvC,MAAM,IAAIF,KAAK,CAAC,qCAAqCqB,SAAS,CAACzC,OAAO,EAAE,CAAC;UAC7E;UACA,IAAI,CAACoC,QAAQ,CAACjB,EAAE,EAAE;YACd,MAAM,IAAIC,KAAK,CAAC,kCAAkC,CAAC;UACvD;UAEA,MAAMJ,YAAY,CAAC,CAAC,CAAC,CAAC;QAE1B,CAAC,CAAC,OAAOS,GAAG,EAAE;UACVmB,OAAO,CAAC5K,KAAK,CAAC,kCAAkC,EAAEyJ,GAAG,CAAC;UACtDb,QAAQ,CAAC;YACLb,MAAM,EAAE,IAAI;YACZtB,KAAK,EAAE,QAAQ;YACfuB,OAAO,EAAE,oCAAoCyB,GAAG,CAACzB,OAAO,EAAE;YAC1DC,SAAS,EAAEA,CAAA,KAAMW,QAAQ,CAACxG,IAAI,KAAK;cAAE,GAAGA,IAAI;cAAE2F,MAAM,EAAE;YAAM,CAAC,CAAC,CAAC;YAC/DhG,IAAI,EAAE;UACV,CAAC,CAAC;QACN;MACJ,CAAC;MACDb,QAAQ,EAAEA,CAAA,KAAM0H,QAAQ,CAACxG,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE2F,MAAM,EAAE;MAAM,CAAC,CAAC;IACjE,CAAC,CAAC;EACN,CAAC,EAAE,CAAC5G,OAAO,EAAEoE,QAAQ,EAAEyD,YAAY,CAAC,CAAC;EAGrC,MAAMwC,YAAY,GAAGA,CAAA,KAAM;IACvB1L,YAAY,CAAC2L,UAAU,CAAC,eAAe,CAAC;IACxC3L,YAAY,CAAC2L,UAAU,CAAC,YAAY,CAAC;IACrCnD,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;EACxB,CAAC;EAED,IAAIO,SAAS,EAAE;IACX,oBACIrJ,OAAA;MAAKsD,KAAK,EAAE;QAAEiD,OAAO,EAAE,MAAM;QAAEC,SAAS,EAAE,QAAQ;QAAEjD,KAAK,EAAE;MAAsB,CAAE;MAAAF,QAAA,eAC/ErD,OAAA;QAAAqD,QAAA,EAAG;MAAuB;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7B,CAAC;EAEd;EAEA,oBACI3D,OAAA;IAAKoD,SAAS,EAAC,sBAAsB;IAACE,KAAK,EAAE;MACzCyB,QAAQ,EAAE,QAAQ;MAClBO,MAAM,EAAE,WAAW;MACnBiB,OAAO,EAAE,MAAM;MACfX,eAAe,EAAE,mBAAmB;MACpCX,YAAY,EAAE,MAAM;MACpBiH,SAAS,EAAE;IACf,CAAE;IAAA7I,QAAA,gBAEErD,OAAA,CAACsI,KAAK;MAAA,GAAKa;IAAK;MAAA3F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAEpB3D,OAAA;MAAKoD,SAAS,EAAC,sDAAsD;MAAAC,QAAA,gBACjErD,OAAA;QAAIsD,KAAK,EAAE;UAAEC,KAAK,EAAE,qBAAqB;UAAEsD,QAAQ,EAAE,OAAO;UAAEtB,UAAU,EAAE;QAAM,CAAE;QAAAlC,QAAA,EAAC;MAEnF;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACL3D,OAAA;QACI2F,OAAO,EAAEqG,YAAa;QACtB5I,SAAS,EAAC,gGAAgG;QAC1GE,KAAK,EAAE;UAAEsC,eAAe,EAAE,SAAS;UAAEuG,KAAK,EAAE;YAAEvG,eAAe,EAAE;UAAU;QAAE,CAAE;QAAAvC,QAAA,gBAE7ErD,OAAA,CAACP,MAAM;UAACyH,IAAI,EAAE;QAAG;UAAA1D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACpB3D,OAAA;UAAAqD,QAAA,EAAM;QAAM;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,eAGN3D,OAAA;MAAIsD,KAAK,EAAE;QAAEC,KAAK,EAAE,qBAAqB;QAAE6I,YAAY,EAAE,MAAM;QAAEvF,QAAQ,EAAE;MAAQ,CAAE;MAAAxD,QAAA,EAAC;IAEtF;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEL3D,OAAA;MAAKoD,SAAS,EAAC,mBAAmB;MAACE,KAAK,EAAE;QACtCc,OAAO,EAAE,MAAM;QACfC,mBAAmB,EAAE,SAAS;QAC9BC,GAAG,EAAE,MAAM;QACX;QACA,4BAA4B,EAAE;UAC1BD,mBAAmB,EAAE;QACzB;MACJ,CAAE;MAAAhB,QAAA,gBAEErD,OAAA;QAAKsD,KAAK,EAAE;UAAE+I,YAAY,EAAE,MAAM;UAAEC,WAAW,EAAErD,cAAc,GAAG,+BAA+B,GAAG;QAAO,CAAE;QAAA5F,QAAA,eACzGrD,OAAA,CAACwB,WAAW;UAERX,aAAa,EAAEoI,cAAe;UAC9BxH,QAAQ,EAAEyI,mBAAoB;UAC9BxI,QAAQ,EAAE4J,gBAAiB;UAC3B3J,OAAO,EAAEA;QAAQ,GAJZsH,cAAc,GAAGA,cAAc,CAACpF,EAAE,GAAG,KAAK;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAKlD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eAGN3D,OAAA;QAAAqD,QAAA,eACIrD,OAAA,CAAC8F,gBAAgB;UACbC,QAAQ,EAAEA,QAAS;UACnBC,MAAM,EAAEqF,UAAW;UACnBpF,QAAQ,EAAEsF,YAAa;UACvB5J,OAAO,EAAEA;QAAQ;UAAA6B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAIN3D,OAAA;MAAKsD,KAAK,EAAE;QACRoB,SAAS,EAAE,MAAM;QACjBgB,SAAS,EAAE,6BAA6B;QACxCD,UAAU,EAAE;MAChB,CAAE;MAAApC,QAAA,gBACErD,OAAA;QAAIsD,KAAK,EAAE;UAAEC,KAAK,EAAE,qBAAqB;UAAE6I,YAAY,EAAE,MAAM;UAAEvF,QAAQ,EAAE;QAAQ,CAAE;QAAAxD,QAAA,EAAC;MAEtF;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAGL3D,OAAA,CAAC0H,UAAU;QACPC,KAAK,EAAEgE;QACP;MAAA;QAAAnI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGF3D,OAAA,CAACoI,eAAe;QAACzG,OAAO,EAAEA,OAAQ;QAACsE,QAAQ,EAAE4F;MAAmB;QAAArI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACkF,GAAA,CAhaID,cAAc;EAAA,QACCpJ,WAAW;AAAA;AAAA+M,GAAA,GAD1B3D,cAAc;AAkapB,eAAeA,cAAc;AAAC,IAAA/C,EAAA,EAAAsB,GAAA,EAAAgB,GAAA,EAAAE,GAAA,EAAAM,GAAA,EAAA4D,GAAA;AAAAC,YAAA,CAAA3G,EAAA;AAAA2G,YAAA,CAAArF,GAAA;AAAAqF,YAAA,CAAArE,GAAA;AAAAqE,YAAA,CAAAnE,GAAA;AAAAmE,YAAA,CAAA7D,GAAA;AAAA6D,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}