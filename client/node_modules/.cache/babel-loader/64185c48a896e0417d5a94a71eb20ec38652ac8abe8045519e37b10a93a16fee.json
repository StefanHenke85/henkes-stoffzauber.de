{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan\\\\Desktop\\\\henkes-stoffzauber\\\\henkes-stoffzauber-projekt\\\\client\\\\src\\\\AdminDashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// client/src/components/AdminDashboard.js\nimport React, { useState, useEffect, useMemo } from 'react';\n\n// =========================================================================\n// BEGINN: EINGEFÜGTER CODE FÜR HILFSKOMPONENTEN (ProductForm, AdminProductList)\n// Da Sie die Dateien einzeln verwenden, füge ich die Formen hier wieder ein,\n// damit das AdminDashboard als eine große, selbsttragende Datei funktioniert.\n// =========================================================================\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3001/api/products';\nconst API_FABRICS_URL = 'http://localhost:3001/api/fabrics';\nconst BACKEND_URL = 'http://localhost:3001';\nconst FALLBACK_IMAGE = \"https://placehold.co/50x50/eee/333?text=Bild\";\n\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n */\nconst getImageUrl = imagePath => {\n  if (imagePath && imagePath.startsWith('/uploads/')) {\n    return `${BACKEND_URL}${imagePath}`;\n  }\n  // Handhabt externe URLs oder defekte Pfade\n  return imagePath || FALLBACK_IMAGE;\n};\n\n// Hilfsfunktion für den initialen Zustand des Produktformulars\nconst getInitialState = productToEdit => productToEdit || {\n  name: '',\n  description: '',\n  price: 0,\n  stock: 0,\n  isFeatured: false,\n  imageFile: null,\n  imageUrl: '',\n  fabricId: ''\n};\n\n// --- Komponente: Produktformular (ProductForm) ---\nconst ProductForm = ({\n  productToEdit,\n  onSubmit,\n  onCancel,\n  fabrics\n}) => {\n  _s();\n  // useMemo stellt sicher, dass initialState nur neu berechnet wird, wenn sich productToEdit ändert\n  const initialState = useMemo(() => getInitialState(productToEdit), [productToEdit]);\n\n  // Zustand für das Formular\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!productToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    // Setzt das Formular zurück, wenn ein neues Produkt geladen wird\n    setFormData(initialState);\n    setIsEditing(!!productToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, productToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : name === 'price' || name === 'stock' ? parseFloat(value) : value\n    }));\n  };\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    setFormData(prev => ({\n      ...prev,\n      imageFile: file\n    }));\n    if (file) {\n      setPreviewImage(URL.createObjectURL(file));\n    } else {\n      setPreviewImage(formData.imageUrl || null);\n    }\n  };\n  const getFinalPreviewUrl = () => {\n    if (previewImage && previewImage.startsWith('blob:')) {\n      return previewImage; // Temporäre Blob-URL\n    }\n    return getImageUrl(formData.imageUrl); // Gespeicherte URL (korrigiert)\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    // Erstellen des FormData-Objekts für den Upload\n    const data = new FormData();\n    data.append('name', formData.name);\n    data.append('description', formData.description);\n    data.append('price', formData.price);\n    data.append('stock', formData.stock);\n    data.append('isFeatured', formData.isFeatured);\n    data.append('fabricId', formData.fabricId); // NEU: Fabric ID hinzufügen\n\n    if (formData.imageFile) {\n      data.append('imageFile', formData.imageFile);\n    } else if (formData.imageUrl) {\n      // Senden der vorhandenen imageUrl, wenn kein neues Bild ausgewählt wurde\n      data.append('imageUrl', formData.imageUrl);\n    }\n    onSubmit(data, isEditing, productToEdit ? productToEdit.id : null);\n  };\n\n  // Style-Definitionen (inline, zur Vereinfachung)\n  const formStyle = {\n    padding: '20px',\n    backgroundColor: 'var(--farbe-hell)',\n    borderRadius: '12px',\n    boxShadow: '0 4px 15px rgba(0, 0, 0, 0.1)',\n    marginBottom: '20px'\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form\",\n    style: formStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: isEditing ? `Produkt bearbeiten: ${productToEdit.name}` : 'Neues Produkt erstellen'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: \"Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Beschreibung:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        required: true,\n        rows: \"3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group-inline\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          children: \"Preis (\\u20AC):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"price\",\n          name: \"price\",\n          value: formData.price,\n          onChange: handleChange,\n          min: \"0\",\n          step: \"0.01\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"stock\",\n          children: \"Bestand (St\\xFCck):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"stock\",\n          name: \"stock\",\n          value: formData.stock,\n          onChange: handleChange,\n          min: \"0\",\n          step: \"1\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricId\",\n        children: \"Zugeh\\xF6riger Stoff (Optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"fabricId\",\n        name: \"fabricId\",\n        value: formData.fabricId,\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Keinen Stoff zuweisen --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this), fabrics && fabrics.map(fabric => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: fabric.id,\n          children: [fabric.name, \" (\", fabric.fabricType, \")\"]\n        }, fabric.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this), !fabrics && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'var(--farbe-rot)',\n          fontSize: '0.8em',\n          marginTop: '5px'\n        },\n        children: \"*Stoffinventar konnte nicht geladen werden.*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageFile\",\n        children: \"Bild (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"imageFile\",\n        name: \"imageFile\",\n        accept: \"image/*\",\n        onChange: handleImageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getFinalPreviewUrl(),\n          alt: \"Vorschau\",\n          style: {\n            maxWidth: '100px',\n            maxHeight: '100px',\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"isFeatured\",\n        name: \"isFeatured\",\n        checked: formData.isFeatured,\n        onChange: handleChange,\n        style: {\n          width: '20px',\n          height: '20px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"isFeatured\",\n        style: {\n          margin: 0,\n          fontWeight: 'normal',\n          cursor: 'pointer'\n        },\n        children: \"Als \\\"Featured Product\\\" auf der Startseite anzeigen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        children: isEditing ? 'Änderungen speichern' : 'Produkt erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen (Zur\\xFCck zur Erstellung)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Komponente: Produktliste ---\n_s(ProductForm, \"mG0AgEOCBf3MhewyjwhcE6TaBHs=\");\n_c = ProductForm;\nconst AdminProductList = ({\n  products,\n  onEdit,\n  onDelete,\n  fabrics\n}) => {\n  // Hilfsfunktion, um den Stoffnamen anhand der fabricId zu finden\n  const getFabricName = fabricId => {\n    if (!fabrics) return 'N/A';\n    const fabric = fabrics.find(f => f.id === fabricId);\n    return fabric ? fabric.name : 'Unbekannt';\n  };\n  return (\n    /*#__PURE__*/\n    // Verwendet jetzt CSS-Klassen aus index.css\n    _jsxDEV(\"div\", {\n      className: \"admin-list-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: '1.5em',\n          color: 'var(--farbe-text)',\n          margin: '0 0 20px 0'\n        },\n        children: [\"Alle Produkte im System (\", products.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 13\n      }, this), products.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'var(--farbe-text-dunkel)'\n        },\n        children: \"Keine Produkte im System.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"admin-product-list\",\n        children: products.map(product => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"admin-list-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: getImageUrl(product.imageUrl),\n            alt: product.name,\n            className: \"admin-list-image\",\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = FALLBACK_IMAGE;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-list-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"admin-list-name\",\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"admin-list-price\",\n              children: [\"\\u20AC \", product.price.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"admin-list-stock\",\n              style: {\n                color: product.stock > 0 ? 'var(--farbe-grün)' : 'var(--farbe-rot)'\n              },\n              children: [\"Bestand: \", product.stock]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"admin-list-fabric\",\n              style: {\n                fontSize: '0.9em',\n                color: 'var(--farbe-primär-dunkel)'\n              },\n              children: [\"Stoff: \", getFabricName(product.fabricId)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-list-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onEdit(product),\n              className: \"admin-list-button edit-button\",\n              children: \"Bearbeiten\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onDelete(product.id),\n              className: \"admin-list-button delete-button\",\n              children: \"L\\xF6schen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 29\n          }, this)]\n        }, product.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }, this)\n  );\n};\n\n// --- Komponente: Stoff-Formular ---\n_c2 = AdminProductList;\nconst USAGE_OPTIONS = ['Mütze (Außen)', 'Mütze (Innen)', 'Bündchen', 'Bekleidung (Oberteil)', 'Bekleidung (Hose)', 'Babybekleidung', 'Deko', 'Taschen', 'Accessoires'];\nconst FABRIC_TYPES = ['Jersey', 'French Terry (Sommersweat)', 'Sweat', 'Bündchenstoff', 'Musselin', 'Webware Baumwolle', 'Cord', 'Fleece', 'Softshell', 'Leder (Imitat/Echt)'];\nconst getInitialFabricState = stoffToEdit => stoffToEdit || {\n  name: '',\n  description: '',\n  fabricType: '',\n  suitableFor: [],\n  stock: 0,\n  imageUrl: '',\n  imageFile: null\n};\nconst FabricForm = ({\n  stoffToEdit,\n  onAdd,\n  onCancel\n}) => {\n  _s2();\n  const initialState = useMemo(() => getInitialFabricState(stoffToEdit), [stoffToEdit]);\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!stoffToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    setFormData(initialState);\n    setIsEditing(!!stoffToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, stoffToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    if (name === 'suitableFor') {\n      const currentUsages = formData.suitableFor;\n      if (checked) {\n        // Hinzufügen, wenn nicht enthalten\n        setFormData(prev => ({\n          ...prev,\n          suitableFor: [...currentUsages, value]\n        }));\n      } else {\n        // Entfernen\n        setFormData(prev => ({\n          ...prev,\n          suitableFor: currentUsages.filter(u => u !== value)\n        }));\n      }\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : name === 'stock' ? parseFloat(value) : value\n      }));\n    }\n  };\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    setFormData(prev => ({\n      ...prev,\n      imageFile: file\n    }));\n    if (file) {\n      setPreviewImage(URL.createObjectURL(file));\n    } else {\n      setPreviewImage(formData.imageUrl || null);\n    }\n  };\n  const getFinalPreviewUrl = () => {\n    if (previewImage && previewImage.startsWith('blob:')) {\n      return previewImage;\n    }\n    return getImageUrl(formData.imageUrl);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    const data = new FormData();\n    data.append('name', formData.name);\n    data.append('description', formData.description);\n    data.append('fabricType', formData.fabricType);\n    data.append('stock', formData.stock);\n    // Das Array von Verwendungszwecken als JSON-String senden\n    data.append('suitableFor', JSON.stringify(formData.suitableFor));\n    if (formData.imageFile) {\n      data.append('imageFile', formData.imageFile);\n    } else if (formData.imageUrl) {\n      data.append('imageUrl', formData.imageUrl);\n    }\n    onAdd(data, isEditing, stoffToEdit ? stoffToEdit.id : null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form\",\n    style: {\n      padding: '20px',\n      backgroundColor: 'var(--farbe-hell)',\n      borderRadius: '12px',\n      boxShadow: '0 4px 15px rgba(0, 0, 0, 0.1)',\n      marginBottom: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: isEditing ? `Stoff bearbeiten: ${stoffToEdit.name}` : 'Neuen Stoff erstellen'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricName\",\n        children: \"Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"fabricName\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group-inline\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fabricType\",\n          children: \"Stoffart:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"fabricType\",\n          name: \"fabricType\",\n          value: formData.fabricType,\n          onChange: handleChange,\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- W\\xE4hle eine Art --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 25\n          }, this), FABRIC_TYPES.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: type,\n            children: type\n          }, type, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"stock\",\n          children: \"Bestand (m):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"stock\",\n          name: \"stock\",\n          value: formData.stock,\n          onChange: handleChange,\n          min: \"0\",\n          step: \"0.1\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Beschreibung:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        rows: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Verwendungszwecke:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexWrap: 'wrap',\n          gap: '10px'\n        },\n        children: USAGE_OPTIONS.map(usage => /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '5px',\n            fontWeight: 'normal',\n            cursor: 'pointer'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            name: \"suitableFor\",\n            value: usage,\n            checked: formData.suitableFor.includes(usage),\n            onChange: handleChange,\n            style: {\n              width: '15px',\n              height: '15px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 29\n          }, this), usage]\n        }, usage, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageFile\",\n        children: \"Stoffmuster Bild (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"imageFile\",\n        name: \"imageFile\",\n        accept: \"image/*\",\n        onChange: handleImageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getFinalPreviewUrl(),\n          alt: \"Vorschau\",\n          style: {\n            maxWidth: '100px',\n            maxHeight: '100px',\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        children: isEditing ? 'Änderungen speichern' : 'Stoff erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 394,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Komponente: Stoff-Liste ---\n_s2(FabricForm, \"wGOTUVtITCs2ajUBJK3xxSyGbCY=\");\n_c3 = FabricForm;\nconst AdminFabricList = ({\n  fabrics,\n  onDelete,\n  onEdit\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-list-container\",\n    style: {\n      marginTop: '30px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: '1.5em',\n        color: 'var(--farbe-text)',\n        margin: '0 0 20px 0'\n      },\n      children: [\"Stoff-Inventar (\", fabrics.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 13\n    }, this), fabrics.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'var(--farbe-text-dunkel)'\n      },\n      children: \"Keine Stoffe im Inventar.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"admin-product-list\",\n      children: fabrics.map(stoff => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"admin-list-item\",\n        style: {\n          minHeight: '80px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: getImageUrl(stoff.imageUrl),\n          alt: stoff.name,\n          className: \"admin-list-image\",\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = FALLBACK_IMAGE;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-list-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"admin-list-name\",\n            children: [stoff.name, \" (\", stoff.fabricType, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"admin-list-stock\",\n            style: {\n              color: stoff.stock > 0 ? 'var(--farbe-grün)' : 'var(--farbe-rot)'\n            },\n            children: [\"Bestand: \", stoff.stock, \" m\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '0.8em',\n              color: 'var(--farbe-text-dunkel)'\n            },\n            children: stoff.suitableFor && stoff.suitableFor.join(', ')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-list-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onEdit(stoff),\n            className: \"admin-list-button edit-button\",\n            children: \"Bearbeiten\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onDelete(stoff.id),\n            className: \"admin-list-button delete-button\",\n            children: \"L\\xF6schen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 29\n        }, this)]\n      }, stoff.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 514,\n    columnNumber: 9\n  }, this);\n};\n\n// =========================================================================\n// ENDE: EINGEFÜGTER CODE FÜR HILFSKOMPONENTEN\n// =========================================================================\n\n// --- HAUPTKOMPONENTE: AdminDashboard ---\n_c4 = AdminFabricList;\nconst AdminDashboard = () => {\n  _s3();\n  // Zustand für Produkte\n  const [products, setProducts] = useState([]);\n  const [currentProduct, setCurrentProduct] = useState(null);\n\n  // Zustand für Stoffe (Fabrics)\n  const [fabrics, setFabrics] = useState([]);\n  const [currentFabric, setCurrentFabric] = useState(null);\n\n  // Status- und Ladezustände\n  const [statusMessage, setStatusMessage] = useState({\n    text: '',\n    type: ''\n  });\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Hilfsfunktion zum Setzen der Statusnachricht mit Timeout\n  const showStatus = (text, type = 'success') => {\n    setStatusMessage({\n      text,\n      type\n    });\n    setTimeout(() => {\n      setStatusMessage({\n        text: '',\n        type: ''\n      });\n    }, 5000); // Nachricht nach 5 Sekunden ausblenden\n  };\n\n  // =========================================================================\n  // 1. DATENABRUF FÜR PRODUKTE UND STOFFE (useEffect)\n  // =========================================================================\n  useEffect(() => {\n    // Funktion zum Abrufen der Produktdaten\n    const fetchProducts = async () => {\n      try {\n        const response = await fetch(API_URL);\n        if (!response.ok) {\n          // WICHTIG: Prüfen auf JSON-Fehler, bevor wir parsen\n          const errorText = await response.text();\n          throw new Error(`HTTP-Fehler ${response.status}: ${errorText.substring(0, 100)}...`);\n        }\n        const data = await response.json();\n        setProducts(data);\n      } catch (error) {\n        console.error(\"Fehler beim Abrufen der Produkte:\", error);\n        showStatus(`Fehler beim Laden der Produkte: ${error.message}`, 'error');\n      }\n    };\n\n    // Funktion zum Abrufen der Stoffdaten\n    const fetchFabrics = async () => {\n      // Deaktivieren des Ladezustands für Produkte, da er nur für den\n      // Gesamtzustand relevant ist und Fehler separat behandelt werden.\n      // Wir setzen setIsLoading(false) erst am Ende.\n      try {\n        // WICHTIG: Endpunkt für Fabrics muss auf dem Backend existieren!\n        const response = await fetch(API_FABRICS_URL);\n        if (!response.ok) {\n          const errorText = await response.text();\n          // Werfen eines Fehlers, der den HTTP-Status und den Text enthält\n          throw new Error(`HTTP-Fehler ${response.status}: ${errorText.substring(0, 100)}...`);\n        }\n        const data = await response.json();\n        setFabrics(data);\n      } catch (error) {\n        console.error(\"Fehler beim Abrufen der Stoffe:\", error);\n        // Statusnachricht, die klarstellt, dass nur die Stoffe fehlen\n        showStatus(`Fehler beim Laden der Stoffe. Bitte Backend-Route '/api/fabrics' prüfen!`, 'error');\n        setFabrics([]); // Sicherstellen, dass der fabrics-Zustand leer ist, um Render-Fehler zu vermeiden\n      }\n    };\n    const fetchData = async () => {\n      setIsLoading(true);\n      // Wir führen beide Aufrufe parallel aus, behandeln aber ihre Fehler isoliert.\n      // Promise.allSettled wartet auf BEIDE, auch wenn einer fehlschlägt.\n      await Promise.allSettled([fetchProducts(), fetchFabrics()]);\n      setIsLoading(false);\n    };\n    fetchData();\n  }, []); // Lädt beim ersten Rendern\n\n  // =========================================================================\n  // 2. PRODUKT-LOGIK (Erstellen, Bearbeiten, Löschen)\n  // =========================================================================\n\n  // Produkt-Formular senden (Erstellen oder Bearbeiten)\n  const handleProductSubmit = async (formData, isEditing, id) => {\n    const method = isEditing ? 'PUT' : 'POST';\n    const url = isEditing ? `${API_URL}/${id}` : API_URL;\n    try {\n      const response = await fetch(url, {\n        method: method,\n        body: formData // FormData wird direkt gesendet, keine Content-Type-Header nötig\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Fehler bei der Anfrage: ${response.status} - ${errorText.substring(0, 100)}...`);\n      }\n      const result = await response.json();\n\n      // Aktualisiert die Produktliste\n      if (isEditing) {\n        setProducts(products.map(p => p.id === id ? result : p));\n        setCurrentProduct(null); // Bearbeitungsmodus beenden\n        showStatus(`Produkt '${result.name}' erfolgreich aktualisiert.`);\n      } else {\n        setProducts([...products, result]);\n        showStatus(`Produkt '${result.name}' erfolgreich erstellt.`);\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Speichern des Produkts:\", error);\n      showStatus(`Fehler beim Speichern: ${error.message}`, 'error');\n    }\n  };\n\n  // Produkt löschen\n  const handleDelete = async id => {\n    if (!window.confirm(\"Sind Sie sicher, dass Sie dieses Produkt löschen möchten?\")) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/${id}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        throw new Error('Fehler beim Löschen des Produkts.');\n      }\n\n      // Aktualisiert die Produktliste\n      setProducts(products.filter(p => p.id !== id));\n      showStatus('Produkt erfolgreich gelöscht.');\n    } catch (error) {\n      console.error(\"Fehler beim Löschen des Produkts:\", error);\n      showStatus(`Fehler beim Löschen: ${error.message}`, 'error');\n    }\n  };\n\n  // Produkt zum Bearbeiten laden\n  const handleEdit = product => {\n    setCurrentProduct(product);\n    showStatus(`Bearbeite Produkt: ${product.name}`, 'info');\n    // Optional: Zum Formular scrollen\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  // Bearbeitungsmodus abbrechen\n  const handleCancelEdit = () => {\n    setCurrentProduct(null);\n    setStatusMessage({\n      text: '',\n      type: ''\n    });\n  };\n\n  // =========================================================================\n  // 3. STOFF-LOGIK (Erstellen, Bearbeiten, Löschen)\n  // =========================================================================\n\n  // Stoff-Formular senden (Erstellen oder Bearbeiten)\n  const handleAddFabric = async (formData, isEditing, id) => {\n    const method = isEditing ? 'PUT' : 'POST';\n    const url = isEditing ? `${API_FABRICS_URL}/${id}` : API_FABRICS_URL;\n    try {\n      const response = await fetch(url, {\n        method: method,\n        body: formData\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Fehler bei der Anfrage: ${response.status} - ${errorText.substring(0, 100)}...`);\n      }\n      const result = await response.json();\n\n      // Aktualisiert die Stoffliste\n      if (isEditing) {\n        setFabrics(fabrics.map(f => f.id === id ? result : f));\n        setCurrentFabric(null); // Bearbeitungsmodus beenden\n        showStatus(`Stoffinventar '${result.name}' erfolgreich aktualisiert.`);\n      } else {\n        setFabrics([...fabrics, result]);\n        showStatus(`Stoffinventar '${result.name}' erfolgreich erstellt.`);\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Speichern des Stoffs:\", error);\n      showStatus(`Fehler beim Speichern des Stoffs: ${error.message}`, 'error');\n    }\n  };\n\n  // Stoff löschen\n  const handleDeleteFabric = async id => {\n    if (!window.confirm(\"Sind Sie sicher, dass Sie diesen Stoff aus dem Inventar löschen möchten?\")) {\n      return;\n    }\n    try {\n      const response = await fetch(`${API_FABRICS_URL}/${id}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        throw new Error('Fehler beim Löschen des Stoffs.');\n      }\n\n      // Aktualisiert die Stoffliste\n      setFabrics(fabrics.filter(f => f.id !== id));\n      showStatus('Stoff erfolgreich gelöscht.');\n    } catch (error) {\n      console.error(\"Fehler beim Löschen des Stoffs:\", error);\n      showStatus(`Fehler beim Löschen des Stoffs: ${error.message}`, 'error');\n    }\n  };\n\n  // Stoff zum Bearbeiten laden\n  const handleEditFabric = fabric => {\n    setCurrentFabric(fabric);\n    showStatus(`Bearbeite Stoff: ${fabric.name}`, 'info');\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  // Bearbeitungsmodus Stoff abbrechen\n  const handleCancelFabricEdit = () => {\n    setCurrentFabric(null);\n    setStatusMessage({\n      text: '',\n      type: ''\n    });\n  };\n\n  // =========================================================================\n  // 4. RENDERN\n  // =========================================================================\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        padding: '50px',\n        fontSize: '1.2em'\n      },\n      children: \"Dashboard wird geladen...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 799,\n      columnNumber: 17\n    }, this);\n  }\n\n  // Status-Nachrichten-Stil (bleibt inline, da dynamisch)\n  const statusStyle = {\n    padding: '10px',\n    margin: '10px 0',\n    borderRadius: '8px',\n    textAlign: 'center',\n    fontWeight: 'bold',\n    color: 'white',\n    backgroundColor: statusMessage.type === 'error' ? 'var(--farbe-rot)' : 'var(--farbe-grün)',\n    display: statusMessage.text ? 'block' : 'none'\n  };\n  return (\n    /*#__PURE__*/\n    // Verwendet jetzt CSS-Klassen aus index.css\n    _jsxDEV(\"div\", {\n      className: \"admin-dashboard-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: statusStyle,\n        children: statusMessage.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 819,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'var(--farbe-primär)',\n          marginBottom: '30px',\n          fontSize: '1.8em'\n        },\n        children: \"Produkt-Verwaltung (Verkn\\xFCpfung mit Shop)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 822,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-grid-2-cols\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(ProductForm, {\n            productToEdit: currentProduct,\n            onSubmit: handleProductSubmit,\n            onCancel: handleCancelEdit,\n            fabrics: fabrics // Stoffe an das Produktformular übergeben\n          }, currentProduct ? currentProduct.id : 'new', false, {\n            fileName: _jsxFileName,\n            lineNumber: 829,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 828,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(AdminProductList, {\n            products: products,\n            onEdit: handleEdit,\n            onDelete: handleDelete,\n            fabrics: fabrics // Stoffe an die Produktliste übergeben\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 840,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 839,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 826,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '40px',\n          borderTop: '2px solid var(--farbe-grau)',\n          paddingTop: '30px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            color: 'var(--farbe-primär)',\n            marginBottom: '30px',\n            fontSize: '1.8em'\n          },\n          children: \"Stoff-Inventar-Verwaltung\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 856,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(FabricForm, {\n          stoffToEdit: currentFabric,\n          onAdd: handleAddFabric,\n          onCancel: handleCancelFabricEdit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 861,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(AdminFabricList, {\n          fabrics: fabrics,\n          onDelete: handleDeleteFabric,\n          onEdit: handleEditFabric\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 851,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 817,\n      columnNumber: 9\n    }, this)\n  );\n};\n_s3(AdminDashboard, \"maaUbovTK74P67IZHmt8/0SxenQ=\");\n_c5 = AdminDashboard;\nexport default AdminDashboard;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"ProductForm\");\n$RefreshReg$(_c2, \"AdminProductList\");\n$RefreshReg$(_c3, \"FabricForm\");\n$RefreshReg$(_c4, \"AdminFabricList\");\n$RefreshReg$(_c5, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","jsxDEV","_jsxDEV","API_URL","API_FABRICS_URL","BACKEND_URL","FALLBACK_IMAGE","getImageUrl","imagePath","startsWith","getInitialState","productToEdit","name","description","price","stock","isFeatured","imageFile","imageUrl","fabricId","ProductForm","onSubmit","onCancel","fabrics","_s","initialState","formData","setFormData","isEditing","setIsEditing","previewImage","setPreviewImage","handleChange","e","value","type","checked","target","prev","parseFloat","handleImageChange","file","files","URL","createObjectURL","getFinalPreviewUrl","handleSubmit","preventDefault","data","FormData","append","id","formStyle","padding","backgroundColor","borderRadius","boxShadow","marginBottom","className","style","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","onChange","required","rows","min","step","map","fabric","fabricType","color","fontSize","marginTop","accept","src","alt","maxWidth","maxHeight","border","display","alignItems","gap","width","height","margin","fontWeight","cursor","paddingTop","borderTop","onClick","_c","AdminProductList","products","onEdit","onDelete","getFabricName","find","f","length","product","onError","onerror","toFixed","_c2","USAGE_OPTIONS","FABRIC_TYPES","getInitialFabricState","stoffToEdit","suitableFor","FabricForm","onAdd","_s2","currentUsages","filter","u","JSON","stringify","flexWrap","usage","includes","_c3","AdminFabricList","stoff","minHeight","join","_c4","AdminDashboard","_s3","setProducts","currentProduct","setCurrentProduct","setFabrics","currentFabric","setCurrentFabric","statusMessage","setStatusMessage","text","isLoading","setIsLoading","showStatus","setTimeout","fetchProducts","response","fetch","ok","errorText","Error","status","substring","json","error","console","message","fetchFabrics","fetchData","Promise","allSettled","handleProductSubmit","method","url","body","result","p","handleDelete","window","confirm","handleEdit","scrollTo","top","behavior","handleCancelEdit","handleAddFabric","handleDeleteFabric","handleEditFabric","handleCancelFabricEdit","textAlign","statusStyle","_c5","$RefreshReg$"],"sources":["C:/Users/Stefan/Desktop/henkes-stoffzauber/henkes-stoffzauber-projekt/client/src/AdminDashboard.js"],"sourcesContent":["// client/src/components/AdminDashboard.js\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\n\r\n// =========================================================================\r\n// BEGINN: EINGEFÜGTER CODE FÜR HILFSKOMPONENTEN (ProductForm, AdminProductList)\r\n// Da Sie die Dateien einzeln verwenden, füge ich die Formen hier wieder ein,\r\n// damit das AdminDashboard als eine große, selbsttragende Datei funktioniert.\r\n// =========================================================================\r\n\r\nconst API_URL = 'http://localhost:3001/api/products';\r\nconst API_FABRICS_URL = 'http://localhost:3001/api/fabrics';\r\nconst BACKEND_URL = 'http://localhost:3001';\r\nconst FALLBACK_IMAGE = \"https://placehold.co/50x50/eee/333?text=Bild\";\r\n\r\n\r\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n */\r\nconst getImageUrl = (imagePath) => {\r\n    if (imagePath && imagePath.startsWith('/uploads/')) {\r\n        return `${BACKEND_URL}${imagePath}`;\r\n    }\r\n    // Handhabt externe URLs oder defekte Pfade\r\n    return imagePath || FALLBACK_IMAGE;\r\n};\r\n\r\n\r\n// Hilfsfunktion für den initialen Zustand des Produktformulars\r\nconst getInitialState = (productToEdit) => productToEdit || {\r\n    name: '',\r\n    description: '',\r\n    price: 0,\r\n    stock: 0,\r\n    isFeatured: false,\r\n    imageFile: null,\r\n    imageUrl: '',\r\n    fabricId: '', \r\n};\r\n\r\n// --- Komponente: Produktformular (ProductForm) ---\r\nconst ProductForm = ({ productToEdit, onSubmit, onCancel, fabrics }) => {\r\n    \r\n    // useMemo stellt sicher, dass initialState nur neu berechnet wird, wenn sich productToEdit ändert\r\n    const initialState = useMemo(() => getInitialState(productToEdit), [productToEdit]);\r\n    \r\n    // Zustand für das Formular\r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!productToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n\r\n    useEffect(() => {\r\n        // Setzt das Formular zurück, wenn ein neues Produkt geladen wird\r\n        setFormData(initialState);\r\n        setIsEditing(!!productToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, productToEdit]); \r\n    \r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: type === 'checkbox' ? checked : (name === 'price' || name === 'stock' ? parseFloat(value) : value)\r\n        }));\r\n    };\r\n\r\n    const handleImageChange = (e) => {\r\n        const file = e.target.files[0];\r\n        setFormData(prev => ({ ...prev, imageFile: file }));\r\n        if (file) {\r\n            setPreviewImage(URL.createObjectURL(file));\r\n        } else {\r\n            setPreviewImage(formData.imageUrl || null);\r\n        }\r\n    };\r\n\r\n    const getFinalPreviewUrl = () => {\r\n        if (previewImage && previewImage.startsWith('blob:')) {\r\n            return previewImage; // Temporäre Blob-URL\r\n        }\r\n        return getImageUrl(formData.imageUrl); // Gespeicherte URL (korrigiert)\r\n    };\r\n    \r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        // Erstellen des FormData-Objekts für den Upload\r\n        const data = new FormData();\r\n        data.append('name', formData.name);\r\n        data.append('description', formData.description);\r\n        data.append('price', formData.price);\r\n        data.append('stock', formData.stock);\r\n        data.append('isFeatured', formData.isFeatured);\r\n        data.append('fabricId', formData.fabricId); // NEU: Fabric ID hinzufügen\r\n\r\n        if (formData.imageFile) {\r\n            data.append('imageFile', formData.imageFile);\r\n        } else if (formData.imageUrl) {\r\n            // Senden der vorhandenen imageUrl, wenn kein neues Bild ausgewählt wurde\r\n            data.append('imageUrl', formData.imageUrl); \r\n        }\r\n\r\n        onSubmit(data, isEditing, productToEdit ? productToEdit.id : null);\r\n    };\r\n\r\n    // Style-Definitionen (inline, zur Vereinfachung)\r\n    const formStyle = {\r\n        padding: '20px',\r\n        backgroundColor: 'var(--farbe-hell)',\r\n        borderRadius: '12px',\r\n        boxShadow: '0 4px 15px rgba(0, 0, 0, 0.1)',\r\n        marginBottom: '20px'\r\n    };\r\n\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form\" style={formStyle}>\r\n            <h2>{isEditing ? `Produkt bearbeiten: ${productToEdit.name}` : 'Neues Produkt erstellen'}</h2>\r\n            \r\n            {/* 1. Basisinformationen */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"name\">Name:</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    required\r\n                />\r\n            </div>\r\n            \r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"description\">Beschreibung:</label>\r\n                <textarea\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    required\r\n                    rows=\"3\"\r\n                />\r\n            </div>\r\n            \r\n            <div className=\"admin-form-group-inline\">\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"price\">Preis (€):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"price\"\r\n                        name=\"price\"\r\n                        value={formData.price}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        step=\"0.01\"\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"stock\">Bestand (Stück):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"stock\"\r\n                        name=\"stock\"\r\n                        value={formData.stock}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        step=\"1\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* NEU: Stoff-Auswahlfeld */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricId\">Zugehöriger Stoff (Optional):</label>\r\n                <select\r\n                    id=\"fabricId\"\r\n                    name=\"fabricId\"\r\n                    value={formData.fabricId}\r\n                    onChange={handleChange}\r\n                >\r\n                    <option value=\"\">-- Keinen Stoff zuweisen --</option>\r\n                    {fabrics && fabrics.map(fabric => (\r\n                        <option key={fabric.id} value={fabric.id}>\r\n                            {fabric.name} ({fabric.fabricType})\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n                {!fabrics && (\r\n                    <p style={{ color: 'var(--farbe-rot)', fontSize: '0.8em', marginTop: '5px' }}>\r\n                        *Stoffinventar konnte nicht geladen werden.*\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* 2. Bild-Upload */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"imageFile\">Bild (optional):</label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    name=\"imageFile\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleImageChange}\r\n                />\r\n                \r\n                <div style={{ marginTop: '15px' }}>\r\n                    <img\r\n                        src={getFinalPreviewUrl()}\r\n                        alt=\"Vorschau\"\r\n                        style={{ maxWidth: '100px', maxHeight: '100px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"admin-form-group\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"isFeatured\"\r\n                    name=\"isFeatured\"\r\n                    checked={formData.isFeatured}\r\n                    onChange={handleChange}\r\n                    style={{ width: '20px', height: '20px' }}\r\n                />\r\n                <label htmlFor=\"isFeatured\" style={{ margin: 0, fontWeight: 'normal', cursor: 'pointer' }}>\r\n                    Als \"Featured Product\" auf der Startseite anzeigen\r\n                </label>\r\n            </div>\r\n            \r\n            {/* 3. Aktionen */}\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\">\r\n                    {isEditing ? 'Änderungen speichern' : 'Produkt erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen (Zurück zur Erstellung)\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n\r\n// --- Komponente: Produktliste ---\r\nconst AdminProductList = ({ products, onEdit, onDelete, fabrics }) => {\r\n    // Hilfsfunktion, um den Stoffnamen anhand der fabricId zu finden\r\n    const getFabricName = (fabricId) => {\r\n        if (!fabrics) return 'N/A';\r\n        const fabric = fabrics.find(f => f.id === fabricId);\r\n        return fabric ? fabric.name : 'Unbekannt';\r\n    };\r\n\r\n    return (\r\n        // Verwendet jetzt CSS-Klassen aus index.css\r\n        <div className=\"admin-list-container\">\r\n            <h2 style={{ fontSize: '1.5em', color: 'var(--farbe-text)', margin: '0 0 20px 0' }}>\r\n                Alle Produkte im System ({products.length})\r\n            </h2>\r\n            {products.length === 0 ? (\r\n                <p style={{ color: 'var(--farbe-text-dunkel)' }}>Keine Produkte im System.</p>\r\n            ) : (\r\n                <ul className=\"admin-product-list\">\r\n                    {products.map(product => (\r\n                        <li key={product.id} className=\"admin-list-item\">\r\n                            <img \r\n                                src={getImageUrl(product.imageUrl)} \r\n                                alt={product.name} \r\n                                className=\"admin-list-image\"\r\n                                onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE; }}\r\n                            />\r\n                            <div className=\"admin-list-details\">\r\n                                <span className=\"admin-list-name\">{product.name}</span>\r\n                                <span className=\"admin-list-price\">€ {product.price.toFixed(2)}</span>\r\n                                <span className=\"admin-list-stock\" style={{ color: product.stock > 0 ? 'var(--farbe-grün)' : 'var(--farbe-rot)' }}>\r\n                                    Bestand: {product.stock}\r\n                                </span>\r\n                                <span className=\"admin-list-fabric\" style={{ fontSize: '0.9em', color: 'var(--farbe-primär-dunkel)' }}>\r\n                                    Stoff: {getFabricName(product.fabricId)}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"admin-list-actions\">\r\n                                <button onClick={() => onEdit(product)} className=\"admin-list-button edit-button\">\r\n                                    Bearbeiten\r\n                                </button>\r\n                                <button onClick={() => onDelete(product.id)} className=\"admin-list-button delete-button\">\r\n                                    Löschen\r\n                                </button>\r\n                            </div>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Komponente: Stoff-Formular ---\r\nconst USAGE_OPTIONS = [\r\n    'Mütze (Außen)', 'Mütze (Innen)', 'Bündchen', 'Bekleidung (Oberteil)', \r\n    'Bekleidung (Hose)', 'Babybekleidung', 'Deko', 'Taschen', 'Accessoires'\r\n];\r\nconst FABRIC_TYPES = [\r\n    'Jersey', 'French Terry (Sommersweat)', 'Sweat', 'Bündchenstoff', 'Musselin', \r\n    'Webware Baumwolle', 'Cord', 'Fleece', 'Softshell', 'Leder (Imitat/Echt)'\r\n];\r\nconst getInitialFabricState = (stoffToEdit) => stoffToEdit || {\r\n    name: '',\r\n    description: '',\r\n    fabricType: '', \r\n    suitableFor: [], \r\n    stock: 0, \r\n    imageUrl: '', \r\n    imageFile: null,\r\n};\r\n\r\nconst FabricForm = ({ stoffToEdit, onAdd, onCancel }) => {\r\n    \r\n    const initialState = useMemo(() => getInitialFabricState(stoffToEdit), [stoffToEdit]);\r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!stoffToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n    useEffect(() => {\r\n        setFormData(initialState);\r\n        setIsEditing(!!stoffToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, stoffToEdit]); \r\n    \r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        \r\n        if (name === 'suitableFor') {\r\n            const currentUsages = formData.suitableFor;\r\n            if (checked) {\r\n                // Hinzufügen, wenn nicht enthalten\r\n                setFormData(prev => ({ ...prev, suitableFor: [...currentUsages, value] }));\r\n            } else {\r\n                // Entfernen\r\n                setFormData(prev => ({ ...prev, suitableFor: currentUsages.filter(u => u !== value) }));\r\n            }\r\n        } else {\r\n            setFormData(prev => ({ \r\n                ...prev,\r\n                [name]: type === 'checkbox' ? checked : (name === 'stock' ? parseFloat(value) : value)\r\n            }));\r\n        }\r\n    };\r\n\r\n    const handleImageChange = (e) => {\r\n        const file = e.target.files[0];\r\n        setFormData(prev => ({ ...prev, imageFile: file }));\r\n        if (file) {\r\n            setPreviewImage(URL.createObjectURL(file));\r\n        } else {\r\n            setPreviewImage(formData.imageUrl || null);\r\n        }\r\n    };\r\n\r\n    const getFinalPreviewUrl = () => {\r\n        if (previewImage && previewImage.startsWith('blob:')) {\r\n            return previewImage;\r\n        }\r\n        return getImageUrl(formData.imageUrl); \r\n    };\r\n    \r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        const data = new FormData();\r\n        data.append('name', formData.name);\r\n        data.append('description', formData.description);\r\n        data.append('fabricType', formData.fabricType);\r\n        data.append('stock', formData.stock);\r\n        // Das Array von Verwendungszwecken als JSON-String senden\r\n        data.append('suitableFor', JSON.stringify(formData.suitableFor)); \r\n\r\n        if (formData.imageFile) {\r\n            data.append('imageFile', formData.imageFile);\r\n        } else if (formData.imageUrl) {\r\n            data.append('imageUrl', formData.imageUrl);\r\n        }\r\n\r\n        onAdd(data, isEditing, stoffToEdit ? stoffToEdit.id : null);\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form\" style={{ padding: '20px', backgroundColor: 'var(--farbe-hell)', borderRadius: '12px', boxShadow: '0 4px 15px rgba(0, 0, 0, 0.1)', marginBottom: '20px' }}>\r\n            <h2>{isEditing ? `Stoff bearbeiten: ${stoffToEdit.name}` : 'Neuen Stoff erstellen'}</h2>\r\n            \r\n            {/* 1. Basisinformationen */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricName\">Name:</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"fabricName\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div className=\"admin-form-group-inline\">\r\n                 <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"fabricType\">Stoffart:</label>\r\n                    <select\r\n                        id=\"fabricType\"\r\n                        name=\"fabricType\"\r\n                        value={formData.fabricType}\r\n                        onChange={handleChange}\r\n                        required\r\n                    >\r\n                        <option value=\"\">-- Wähle eine Art --</option>\r\n                        {FABRIC_TYPES.map(type => (\r\n                            <option key={type} value={type}>{type}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                <div className=\"admin-form-group\">\r\n                    <label htmlFor=\"stock\">Bestand (m):</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"stock\"\r\n                        name=\"stock\"\r\n                        value={formData.stock}\r\n                        onChange={handleChange}\r\n                        min=\"0\"\r\n                        step=\"0.1\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"description\">Beschreibung:</label>\r\n                <textarea\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    rows=\"2\"\r\n                />\r\n            </div>\r\n\r\n            {/* Verwendungszwecke (Checkboxen) */}\r\n            <div className=\"admin-form-group\">\r\n                <label>Verwendungszwecke:</label>\r\n                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '10px' }}>\r\n                    {USAGE_OPTIONS.map(usage => (\r\n                        <label key={usage} style={{ display: 'flex', alignItems: 'center', gap: '5px', fontWeight: 'normal', cursor: 'pointer' }}>\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                name=\"suitableFor\"\r\n                                value={usage}\r\n                                checked={formData.suitableFor.includes(usage)}\r\n                                onChange={handleChange}\r\n                                style={{ width: '15px', height: '15px' }}\r\n                            />\r\n                            {usage}\r\n                        </label>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Bild-Upload */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"imageFile\">Stoffmuster Bild (optional):</label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    name=\"imageFile\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleImageChange}\r\n                />\r\n                \r\n                <div style={{ marginTop: '15px' }}>\r\n                    <img\r\n                        src={getFinalPreviewUrl()}\r\n                        alt=\"Vorschau\"\r\n                        style={{ maxWidth: '100px', maxHeight: '100px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Aktionen */}\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\">\r\n                    {isEditing ? 'Änderungen speichern' : 'Stoff erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n\r\n\r\n// --- Komponente: Stoff-Liste ---\r\nconst AdminFabricList = ({ fabrics, onDelete, onEdit }) => {\r\n    return (\r\n        <div className=\"admin-list-container\" style={{ marginTop: '30px' }}>\r\n            <h2 style={{ fontSize: '1.5em', color: 'var(--farbe-text)', margin: '0 0 20px 0' }}>\r\n                Stoff-Inventar ({fabrics.length})\r\n            </h2>\r\n            {fabrics.length === 0 ? (\r\n                <p style={{ color: 'var(--farbe-text-dunkel)' }}>Keine Stoffe im Inventar.</p>\r\n            ) : (\r\n                <ul className=\"admin-product-list\">\r\n                    {fabrics.map(stoff => (\r\n                        <li key={stoff.id} className=\"admin-list-item\" style={{ minHeight: '80px' }}>\r\n                            <img \r\n                                src={getImageUrl(stoff.imageUrl)} \r\n                                alt={stoff.name} \r\n                                className=\"admin-list-image\"\r\n                                onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE; }}\r\n                            />\r\n                            <div className=\"admin-list-details\">\r\n                                <span className=\"admin-list-name\">{stoff.name} ({stoff.fabricType})</span>\r\n                                <span className=\"admin-list-stock\" style={{ color: stoff.stock > 0 ? 'var(--farbe-grün)' : 'var(--farbe-rot)' }}>\r\n                                    Bestand: {stoff.stock} m\r\n                                </span>\r\n                                <span style={{ fontSize: '0.8em', color: 'var(--farbe-text-dunkel)' }}>\r\n                                    {stoff.suitableFor && stoff.suitableFor.join(', ')}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"admin-list-actions\">\r\n                                <button onClick={() => onEdit(stoff)} className=\"admin-list-button edit-button\">\r\n                                    Bearbeiten\r\n                                </button>\r\n                                <button onClick={() => onDelete(stoff.id)} className=\"admin-list-button delete-button\">\r\n                                    Löschen\r\n                                </button>\r\n                            </div>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// =========================================================================\r\n// ENDE: EINGEFÜGTER CODE FÜR HILFSKOMPONENTEN\r\n// =========================================================================\r\n\r\n\r\n// --- HAUPTKOMPONENTE: AdminDashboard ---\r\nconst AdminDashboard = () => {\r\n    // Zustand für Produkte\r\n    const [products, setProducts] = useState([]);\r\n    const [currentProduct, setCurrentProduct] = useState(null);\r\n\r\n    // Zustand für Stoffe (Fabrics)\r\n    const [fabrics, setFabrics] = useState([]);\r\n    const [currentFabric, setCurrentFabric] = useState(null);\r\n    \r\n    // Status- und Ladezustände\r\n    const [statusMessage, setStatusMessage] = useState({ text: '', type: '' });\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    // Hilfsfunktion zum Setzen der Statusnachricht mit Timeout\r\n    const showStatus = (text, type = 'success') => {\r\n        setStatusMessage({ text, type });\r\n        setTimeout(() => {\r\n            setStatusMessage({ text: '', type: '' });\r\n        }, 5000); // Nachricht nach 5 Sekunden ausblenden\r\n    };\r\n\r\n\r\n    // =========================================================================\r\n    // 1. DATENABRUF FÜR PRODUKTE UND STOFFE (useEffect)\r\n    // =========================================================================\r\n    useEffect(() => {\r\n        // Funktion zum Abrufen der Produktdaten\r\n        const fetchProducts = async () => {\r\n            try {\r\n                const response = await fetch(API_URL);\r\n                if (!response.ok) {\r\n                    // WICHTIG: Prüfen auf JSON-Fehler, bevor wir parsen\r\n                    const errorText = await response.text();\r\n                    throw new Error(`HTTP-Fehler ${response.status}: ${errorText.substring(0, 100)}...`);\r\n                }\r\n                const data = await response.json();\r\n                setProducts(data);\r\n            } catch (error) {\r\n                console.error(\"Fehler beim Abrufen der Produkte:\", error);\r\n                showStatus(`Fehler beim Laden der Produkte: ${error.message}`, 'error');\r\n            }\r\n        };\r\n\r\n        // Funktion zum Abrufen der Stoffdaten\r\n        const fetchFabrics = async () => {\r\n             // Deaktivieren des Ladezustands für Produkte, da er nur für den\r\n             // Gesamtzustand relevant ist und Fehler separat behandelt werden.\r\n             // Wir setzen setIsLoading(false) erst am Ende.\r\n            try {\r\n                // WICHTIG: Endpunkt für Fabrics muss auf dem Backend existieren!\r\n                const response = await fetch(API_FABRICS_URL);\r\n                if (!response.ok) {\r\n                    const errorText = await response.text();\r\n                    // Werfen eines Fehlers, der den HTTP-Status und den Text enthält\r\n                    throw new Error(`HTTP-Fehler ${response.status}: ${errorText.substring(0, 100)}...`);\r\n                }\r\n                const data = await response.json();\r\n                setFabrics(data);\r\n            } catch (error) {\r\n                console.error(\"Fehler beim Abrufen der Stoffe:\", error);\r\n                // Statusnachricht, die klarstellt, dass nur die Stoffe fehlen\r\n                showStatus(`Fehler beim Laden der Stoffe. Bitte Backend-Route '/api/fabrics' prüfen!`, 'error');\r\n                setFabrics([]); // Sicherstellen, dass der fabrics-Zustand leer ist, um Render-Fehler zu vermeiden\r\n            }\r\n        };\r\n\r\n        const fetchData = async () => {\r\n            setIsLoading(true);\r\n            // Wir führen beide Aufrufe parallel aus, behandeln aber ihre Fehler isoliert.\r\n            // Promise.allSettled wartet auf BEIDE, auch wenn einer fehlschlägt.\r\n            await Promise.allSettled([fetchProducts(), fetchFabrics()]);\r\n            setIsLoading(false);\r\n        };\r\n        \r\n        fetchData();\r\n    }, []); // Lädt beim ersten Rendern\r\n\r\n\r\n    // =========================================================================\r\n    // 2. PRODUKT-LOGIK (Erstellen, Bearbeiten, Löschen)\r\n    // =========================================================================\r\n\r\n    // Produkt-Formular senden (Erstellen oder Bearbeiten)\r\n    const handleProductSubmit = async (formData, isEditing, id) => {\r\n        const method = isEditing ? 'PUT' : 'POST';\r\n        const url = isEditing ? `${API_URL}/${id}` : API_URL;\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: method,\r\n                body: formData, // FormData wird direkt gesendet, keine Content-Type-Header nötig\r\n            });\r\n\r\n            if (!response.ok) {\r\n                 const errorText = await response.text();\r\n                throw new Error(`Fehler bei der Anfrage: ${response.status} - ${errorText.substring(0, 100)}...`);\r\n            }\r\n\r\n            const result = await response.json();\r\n            \r\n            // Aktualisiert die Produktliste\r\n            if (isEditing) {\r\n                setProducts(products.map(p => (p.id === id ? result : p)));\r\n                setCurrentProduct(null); // Bearbeitungsmodus beenden\r\n                showStatus(`Produkt '${result.name}' erfolgreich aktualisiert.`);\r\n            } else {\r\n                setProducts([...products, result]);\r\n                showStatus(`Produkt '${result.name}' erfolgreich erstellt.`);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Speichern des Produkts:\", error);\r\n            showStatus(`Fehler beim Speichern: ${error.message}`, 'error');\r\n        }\r\n    };\r\n    \r\n    // Produkt löschen\r\n    const handleDelete = async (id) => {\r\n        if (!window.confirm(\"Sind Sie sicher, dass Sie dieses Produkt löschen möchten?\")) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/${id}`, {\r\n                method: 'DELETE',\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Fehler beim Löschen des Produkts.');\r\n            }\r\n\r\n            // Aktualisiert die Produktliste\r\n            setProducts(products.filter(p => p.id !== id));\r\n            showStatus('Produkt erfolgreich gelöscht.');\r\n\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Löschen des Produkts:\", error);\r\n            showStatus(`Fehler beim Löschen: ${error.message}`, 'error');\r\n        }\r\n    };\r\n    \r\n    // Produkt zum Bearbeiten laden\r\n    const handleEdit = (product) => {\r\n        setCurrentProduct(product);\r\n        showStatus(`Bearbeite Produkt: ${product.name}`, 'info');\r\n        // Optional: Zum Formular scrollen\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    };\r\n    \r\n    // Bearbeitungsmodus abbrechen\r\n    const handleCancelEdit = () => {\r\n        setCurrentProduct(null);\r\n        setStatusMessage({ text: '', type: '' });\r\n    };\r\n\r\n    // =========================================================================\r\n    // 3. STOFF-LOGIK (Erstellen, Bearbeiten, Löschen)\r\n    // =========================================================================\r\n\r\n    // Stoff-Formular senden (Erstellen oder Bearbeiten)\r\n    const handleAddFabric = async (formData, isEditing, id) => {\r\n        const method = isEditing ? 'PUT' : 'POST';\r\n        const url = isEditing ? `${API_FABRICS_URL}/${id}` : API_FABRICS_URL;\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: method,\r\n                body: formData,\r\n            });\r\n\r\n            if (!response.ok) {\r\n                 const errorText = await response.text();\r\n                throw new Error(`Fehler bei der Anfrage: ${response.status} - ${errorText.substring(0, 100)}...`);\r\n            }\r\n\r\n            const result = await response.json();\r\n            \r\n            // Aktualisiert die Stoffliste\r\n            if (isEditing) {\r\n                setFabrics(fabrics.map(f => (f.id === id ? result : f)));\r\n                setCurrentFabric(null); // Bearbeitungsmodus beenden\r\n                showStatus(`Stoffinventar '${result.name}' erfolgreich aktualisiert.`);\r\n            } else {\r\n                setFabrics([...fabrics, result]);\r\n                showStatus(`Stoffinventar '${result.name}' erfolgreich erstellt.`);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Speichern des Stoffs:\", error);\r\n            showStatus(`Fehler beim Speichern des Stoffs: ${error.message}`, 'error');\r\n        }\r\n    };\r\n\r\n    // Stoff löschen\r\n    const handleDeleteFabric = async (id) => {\r\n        if (!window.confirm(\"Sind Sie sicher, dass Sie diesen Stoff aus dem Inventar löschen möchten?\")) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_FABRICS_URL}/${id}`, {\r\n                method: 'DELETE',\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Fehler beim Löschen des Stoffs.');\r\n            }\r\n\r\n            // Aktualisiert die Stoffliste\r\n            setFabrics(fabrics.filter(f => f.id !== id));\r\n            showStatus('Stoff erfolgreich gelöscht.');\r\n\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Löschen des Stoffs:\", error);\r\n            showStatus(`Fehler beim Löschen des Stoffs: ${error.message}`, 'error');\r\n        }\r\n    };\r\n    \r\n    // Stoff zum Bearbeiten laden\r\n    const handleEditFabric = (fabric) => {\r\n        setCurrentFabric(fabric);\r\n        showStatus(`Bearbeite Stoff: ${fabric.name}`, 'info');\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    };\r\n    \r\n    // Bearbeitungsmodus Stoff abbrechen\r\n    const handleCancelFabricEdit = () => {\r\n        setCurrentFabric(null);\r\n        setStatusMessage({ text: '', type: '' });\r\n    };\r\n\r\n\r\n    // =========================================================================\r\n    // 4. RENDERN\r\n    // =========================================================================\r\n    \r\n    if (isLoading) {\r\n         return <p style={{ textAlign: 'center', padding: '50px', fontSize: '1.2em' }}>Dashboard wird geladen...</p>;\r\n    }\r\n\r\n\r\n    // Status-Nachrichten-Stil (bleibt inline, da dynamisch)\r\n    const statusStyle = {\r\n        padding: '10px',\r\n        margin: '10px 0',\r\n        borderRadius: '8px',\r\n        textAlign: 'center',\r\n        fontWeight: 'bold',\r\n        color: 'white',\r\n        backgroundColor: statusMessage.type === 'error' ? 'var(--farbe-rot)' : 'var(--farbe-grün)',\r\n        display: statusMessage.text ? 'block' : 'none', \r\n    };\r\n\r\n    return (\r\n        // Verwendet jetzt CSS-Klassen aus index.css\r\n        <div className=\"admin-dashboard-container\">\r\n            \r\n            <div style={statusStyle}>{statusMessage.text}</div>\r\n\r\n            {/* 1. Bereich: Produkt-Verwaltung */}\r\n            <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                Produkt-Verwaltung (Verknüpfung mit Shop)\r\n            </h1>\r\n            \r\n            <div className=\"admin-grid-2-cols\">\r\n                {/* 1. Spalte: Produktformular */}\r\n                <div>\r\n                    <ProductForm\r\n                        key={currentProduct ? currentProduct.id : 'new'} \r\n                        productToEdit={currentProduct}\r\n                        onSubmit={handleProductSubmit}\r\n                        onCancel={handleCancelEdit}\r\n                        fabrics={fabrics} // Stoffe an das Produktformular übergeben\r\n                    />\r\n                </div>\r\n\r\n                {/* 2. Spalte: Produktliste */}\r\n                <div>\r\n                    <AdminProductList \r\n                        products={products}\r\n                        onEdit={handleEdit}\r\n                        onDelete={handleDelete}\r\n                        fabrics={fabrics} // Stoffe an die Produktliste übergeben\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            \r\n            {/* 2. Bereich: Stoff-Inventar-Verwaltung (Unterhalb des Grids) */}\r\n            <div style={{ \r\n                marginTop: '40px', \r\n                borderTop: '2px solid var(--farbe-grau)', \r\n                paddingTop: '30px' \r\n            }}>\r\n                <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                    Stoff-Inventar-Verwaltung\r\n                </h1>\r\n                \r\n                {/* Stoff-Formular */}\r\n                <FabricForm \r\n                    stoffToEdit={currentFabric}\r\n                    onAdd={handleAddFabric} \r\n                    onCancel={handleCancelFabricEdit}\r\n                />\r\n                \r\n                {/* Stoff-Liste */}\r\n                <AdminFabricList \r\n                    fabrics={fabrics} \r\n                    onDelete={handleDeleteFabric} \r\n                    onEdit={handleEditFabric}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}