{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan\\\\Desktop\\\\henkes-stoffzauber\\\\henkes-stoffzauber-projekt\\\\client\\\\src\\\\AdminDashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// client/src/components/AdminDashboard.js\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { LogOut, Edit, Trash2, PlusCircle, CheckCircle, XCircle } from 'lucide-react'; // Lucide-Icons werden benötigt\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3001/api';\nconst BACKEND_URL = 'http://localhost:3001';\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/100x100/CCCCCC/333333?text=N/A\";\n\n// =========================================================================\n// HILFSFUNKTIONEN\n// =========================================================================\n\n/**\r\n * Ruft den Admin-Authentifizierungstoken aus dem localStorage ab.\r\n * @returns {object} Headers-Objekt oder Fehler-Objekt.\r\n */\nconst getAuthHeaders = () => {\n  const adminToken = localStorage.getItem('adminToken');\n  if (!adminToken) {\n    // Obwohl der AdminProtectedRoute dies verhindern sollte, ist dies eine zusätzliche Absicherung\n    return {\n      error: 'Admin-Sitzung abgelaufen oder nicht gefunden.'\n    };\n  }\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${adminToken}`\n  };\n};\n\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n */\nconst getImageUrl = imagePath => {\n  if (imagePath && imagePath.startsWith('/uploads/')) {\n    return `${BACKEND_URL}${imagePath}`;\n  }\n  return imagePath || FALLBACK_IMAGE_URL;\n};\n\n// =========================================================================\n// BEGINN: EINGEFÜGTE KOMPONENTEN-DEFINITIONEN \n// Aufgrund der 1-Datei-Regel müssen die Unterkomponenten hier definiert werden, wenn sie nicht aus einer separaten Datei importiert werden.\n// =========================================================================\n\n// Hilfsfunktion für den initialen Zustand des Produktformulars\nconst getInitialProductState = productToEdit => productToEdit || {\n  name: '',\n  description: '',\n  price: 0,\n  stock: 0,\n  isFeatured: false,\n  imageFile: null,\n  imageUrl: '',\n  fabricId: ''\n};\n\n// --- Komponente: Produktformular (ProductForm) ---\nconst ProductForm = ({\n  productToEdit,\n  onSubmit,\n  onCancel,\n  fabrics\n}) => {\n  _s();\n  // FIX: fabrics prop hinzugefügt\n\n  // useMemo behebt die ESLint-Warnung\n  const initialState = useMemo(() => getInitialProductState(productToEdit), [productToEdit]);\n\n  // Zustand für das Formular\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!productToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    // Setzt das Formular zurück, wenn ein neues oder kein Produkt zum Bearbeiten übergeben wird\n    setFormData(initialState);\n    setIsEditing(!!productToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, productToEdit]); // Dependency array: initialer State und Produkt\n\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked,\n      files\n    } = e.target;\n    if (type === 'file') {\n      const file = files[0];\n      setFormData(prev => ({\n        ...prev,\n        imageFile: file,\n        imageUrl: file ? URL.createObjectURL(file) : '' // Lokale URL für Vorschau\n      }));\n      setPreviewImage(file ? URL.createObjectURL(file) : productToEdit ? productToEdit.imageUrl : null);\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : name === 'price' || name === 'stock' ? parseFloat(value) : value\n      }));\n    }\n  };\n  const getFinalPreviewUrl = () => {\n    if (formData.imageFile) {\n      return formData.imageUrl; // Temporäre URL aus der Datei\n    }\n    if (productToEdit && productToEdit.imageUrl) {\n      return getImageUrl(productToEdit.imageUrl); // Backend-URL\n    }\n    return FALLBACK_IMAGE_URL; // Fallback\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSubmit(formData); // Übergibt die Formular-Daten (inkl. imageFile) an den Dashboard-Handler\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form-container\",\n    style: {\n      padding: '20px',\n      backgroundColor: 'var(--farbe-hell)',\n      borderRadius: '10px',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.05)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: 'var(--farbe-akzent)',\n        marginBottom: '20px',\n        fontSize: '1.5em'\n      },\n      children: isEditing ? 'Produkt bearbeiten' : 'Neues Produkt erstellen'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: \"Produktname:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"price\",\n        children: \"Preis (\\u20AC):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"price\",\n        name: \"price\",\n        value: formData.price,\n        onChange: handleChange,\n        min: \"0\",\n        step: \"0.01\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"stock\",\n        children: \"Lagerbestand (Einheiten):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"stock\",\n        name: \"stock\",\n        value: formData.stock,\n        onChange: handleChange,\n        min: \"0\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricId\",\n        children: \"Zugeh\\xF6riger Stoff (ID):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"fabricId\",\n        name: \"fabricId\",\n        value: formData.fabricId,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"W\\xE4hlen Sie einen Stoff\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), fabrics.map(fabric => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: fabric.id,\n          children: [fabric.name, \" (\", fabric.id, \")\"]\n        }, fabric.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '0.8em',\n          color: '#666',\n          marginTop: '5px'\n        },\n        children: \"*Der Stoff muss zuerst in der Stoffverwaltung angelegt werden.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Beschreibung:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        rows: \"4\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageFile\",\n        children: \"Produktbild:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"imageFile\",\n        name: \"imageFile\",\n        accept: \"image/*\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getFinalPreviewUrl(),\n          alt: \"Vorschau\",\n          style: {\n            maxWidth: '100px',\n            maxHeight: '100px',\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          },\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = FALLBACK_IMAGE_URL;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"isFeatured\",\n        name: \"isFeatured\",\n        checked: formData.isFeatured,\n        onChange: handleChange,\n        style: {\n          width: '20px',\n          height: '20px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"isFeatured\",\n        style: {\n          margin: 0,\n          fontWeight: 'normal',\n          cursor: 'pointer'\n        },\n        children: \"Als \\\"Featured Product\\\" auf der Startseite anzeigen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: 'var(--farbe-akzent)',\n          color: 'white',\n          padding: '10px 20px',\n          borderRadius: '5px',\n          border: 'none',\n          cursor: 'pointer'\n        },\n        children: isEditing ? 'Änderungen speichern' : 'Produkt erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen (Zur\\xFCck zur Erstellung)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Komponente: AdminProductList ---\n_s(ProductForm, \"mG0AgEOCBf3MhewyjwhcE6TaBHs=\");\n_c = ProductForm;\nconst AdminProductList = ({\n  products,\n  onEdit,\n  onDelete,\n  fabrics\n}) => {\n  // fabrics prop hinzugefügt\n\n  // Helper, um den Stoffnamen zu finden\n  const getFabricName = fabricId => {\n    const fabric = fabrics.find(f => f.id === fabricId);\n    return fabric ? fabric.name : 'Unbekannt';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-product-list-container\",\n    style: {\n      backgroundColor: 'var(--farbe-hell)',\n      borderRadius: '10px',\n      padding: '20px',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.05)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: 'var(--farbe-primär)',\n        marginBottom: '20px',\n        fontSize: '1.5em'\n      },\n      children: [\"Produkt\\xFCbersicht (\", products.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: '600px',\n        overflowY: 'auto'\n      },\n      children: products.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: 'center',\n          color: '#666'\n        },\n        children: \"Keine Produkte vorhanden. Bitte erstellen Sie zuerst ein Produkt.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 21\n      }, this) : products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-product-item\",\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          padding: '15px 0',\n          borderBottom: '1px dashed #eee'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '15px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: getImageUrl(product.imageUrl),\n            alt: product.name,\n            style: {\n              width: '50px',\n              height: '50px',\n              objectFit: 'cover',\n              borderRadius: '5px'\n            },\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = FALLBACK_IMAGE_URL;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: 0,\n                fontSize: '1.1em',\n                color: 'var(--farbe-text-dunkel)'\n              },\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '2px 0 0 0',\n                fontSize: '0.9em',\n                color: '#999'\n              },\n              children: [\"Stoff: \", getFabricName(product.fabricId), \" | Bestand: \", product.stock]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onEdit(product),\n            style: {\n              background: 'var(--farbe-akzent)',\n              color: 'white',\n              border: 'none',\n              padding: '5px 10px',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '5px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Edit, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 37\n            }, this), \" Bearbeiten\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onDelete(product.id),\n            style: {\n              background: 'var(--farbe-rot)',\n              color: 'white',\n              border: 'none',\n              padding: '5px 10px',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '5px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Trash2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 37\n            }, this), \" L\\xF6schen\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 29\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 9\n  }, this);\n};\n\n// Hilfsfunktion für den initialen Zustand des Stoffformulars\n_c2 = AdminProductList;\nconst getInitialFabricState = stoffToEdit => stoffToEdit || {\n  name: '',\n  description: '',\n  fabricType: '',\n  suitableFor: [],\n  stock: 0,\n  imageUrl: '',\n  imageFile: null\n};\n\n// Liste der möglichen Verwendungszwecke (zum Checkbox-Rendern)\nconst USAGE_OPTIONS = ['Mütze (Außen)', 'Mütze (Innen)', 'Bündchen', 'Bekleidung (Oberteil)', 'Bekleidung (Hose)', 'Babybekleidung', 'Deko', 'Taschen', 'Accessoires'];\n\n// Liste der Stoffarten\nconst FABRIC_TYPES = ['Jersey', 'French Terry (Sommersweat)', 'Sweat', 'Bündchenstoff', 'Musselin', 'Webware Baumwolle', 'Cord', 'Fleece', 'Softshell', 'Leder (Imitat/Echt)'];\n\n// --- Komponente: Stoff-Formular (FabricForm) ---\nconst FabricForm = ({\n  stoffToEdit,\n  onAdd,\n  onCancel\n}) => {\n  _s2();\n  const initialState = useMemo(() => getInitialFabricState(stoffToEdit), [stoffToEdit]);\n  const [formData, setFormData] = useState(initialState);\n  const [isEditing, setIsEditing] = useState(!!stoffToEdit);\n  const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\n  useEffect(() => {\n    setFormData(initialState);\n    setIsEditing(!!stoffToEdit);\n    setPreviewImage(initialState.imageUrl || null);\n  }, [initialState, stoffToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked,\n      files\n    } = e.target;\n    if (type === 'file') {\n      const file = files[0];\n      setFormData(prev => ({\n        ...prev,\n        imageFile: file,\n        imageUrl: file ? URL.createObjectURL(file) : ''\n      }));\n      setPreviewImage(file ? URL.createObjectURL(file) : stoffToEdit ? stoffToEdit.imageUrl : null);\n    } else if (name === 'suitableFor') {\n      const currentUsages = Array.isArray(formData.suitableFor) ? formData.suitableFor : [];\n      setFormData(prev => ({\n        ...prev,\n        suitableFor: checked ? [...currentUsages, value] : currentUsages.filter(usage => usage !== value)\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: type === 'checkbox' ? checked : name === 'stock' ? parseInt(value) || 0 : value\n      }));\n    }\n  };\n  const getFinalPreviewUrl = () => {\n    if (formData.imageFile) {\n      return formData.imageUrl;\n    }\n    if (stoffToEdit && stoffToEdit.imageUrl) {\n      return getImageUrl(stoffToEdit.imageUrl);\n    }\n    return FALLBACK_IMAGE_URL;\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onAdd(formData);\n    // Reset-Logik könnte hier bei erfolgreichem Hinzufügen eingefügt werden.\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"admin-form-container\",\n    style: {\n      padding: '20px',\n      backgroundColor: 'var(--farbe-hell)',\n      borderRadius: '10px',\n      boxShadow: '0 4px 12px rgba(0,0,0,0.05)',\n      marginBottom: '30px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: 'var(--farbe-akzent)',\n        marginBottom: '20px',\n        fontSize: '1.5em'\n      },\n      children: isEditing ? 'Stoff bearbeiten' : 'Neuen Stoff anlegen'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: \"Stoffname (z.B. Jersey Ananas):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fabricType\",\n        children: \"Stoffart:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"fabricType\",\n        name: \"fabricType\",\n        value: formData.fabricType,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"W\\xE4hlen Sie die Art\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 21\n        }, this), FABRIC_TYPES.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: type,\n          children: type\n        }, type, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"stock\",\n        children: \"Lagerbestand (Meter):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"stock\",\n        name: \"stock\",\n        value: formData.stock,\n        onChange: handleChange,\n        min: \"0\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Geeignet f\\xFCr (Mehrfachauswahl):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\n          gap: '10px'\n        },\n        children: USAGE_OPTIONS.map(usage => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: `usage-${usage}`,\n            name: \"suitableFor\",\n            value: usage,\n            checked: formData.suitableFor && formData.suitableFor.includes(usage),\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `usage-${usage}`,\n            style: {\n              margin: 0,\n              fontWeight: 'normal',\n              cursor: 'pointer',\n              fontSize: '0.9em'\n            },\n            children: usage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 29\n          }, this)]\n        }, usage, true, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: \"Kurzbeschreibung:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        rows: \"2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"imageFile\",\n        children: \"Stoffmuster Bild (optional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"imageFile\",\n        name: \"imageFile\",\n        accept: \"image/*\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '15px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getFinalPreviewUrl(),\n          alt: \"Vorschau\",\n          style: {\n            maxWidth: '100px',\n            maxHeight: '100px',\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          },\n          onError: e => {\n            e.target.onerror = null;\n            e.target.src = FALLBACK_IMAGE_URL;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginTop: '10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: 'var(--farbe-akzent)',\n          color: 'white',\n          padding: '10px 20px',\n          borderRadius: '5px',\n          border: 'none',\n          cursor: 'pointer'\n        },\n        children: isEditing ? 'Änderungen speichern' : 'Stoff erstellen'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 13\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px',\n        paddingTop: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"admin-form-submit-button\",\n        style: {\n          backgroundColor: '#666'\n        },\n        children: \"Abbrechen (Zur\\xFCck zur Erstellung)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 418,\n    columnNumber: 9\n  }, this);\n};\n\n// --- Komponente: AdminFabricList ---\n_s2(FabricForm, \"wGOTUVtITCs2ajUBJK3xxSyGbCY=\");\n_c3 = FabricForm;\nconst AdminFabricList = ({\n  fabrics,\n  onDelete\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-fabric-list-container\",\n    style: {\n      backgroundColor: 'var(--farbe-hell)',\n      borderRadius: '10px',\n      padding: '20px',\n      boxShadow: '0 4px 12px rgba(0,4,0,0.05)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: 'var(--farbe-primär)',\n        marginBottom: '20px',\n        fontSize: '1.5em'\n      },\n      children: [\"Stoff\\xFCbersicht (\", fabrics.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: '400px',\n        overflowY: 'auto'\n      },\n      children: fabrics.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: 'center',\n          color: '#666'\n        },\n        children: \"Momentan sind keine Stoffe im Inventar.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 21\n      }, this) : fabrics.map(fabric => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-fabric-item\",\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          padding: '15px 0',\n          borderBottom: '1px dashed #eee'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '15px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: getImageUrl(fabric.imageUrl),\n            alt: fabric.name,\n            style: {\n              width: '50px',\n              height: '50px',\n              objectFit: 'cover',\n              borderRadius: '5px'\n            },\n            onError: e => {\n              e.target.onerror = null;\n              e.target.src = FALLBACK_IMAGE_URL;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: 0,\n                fontSize: '1.1em',\n                color: 'var(--farbe-text-dunkel)'\n              },\n              children: fabric.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '2px 0 0 0',\n                fontSize: '0.9em',\n                color: '#999'\n              },\n              children: [fabric.fabricType, \" | Bestand: \", fabric.stock, \" m | ID: \", fabric.id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onDelete(fabric.id),\n            style: {\n              background: 'var(--farbe-rot)',\n              color: 'white',\n              border: 'none',\n              padding: '5px 10px',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '5px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Trash2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 37\n            }, this), \" L\\xF6schen\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 29\n        }, this)]\n      }, fabric.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 554,\n    columnNumber: 9\n  }, this);\n};\n\n// =========================================================================\n// HAUPTKOMPONENTE: AdminDashboard\n// =========================================================================\n\n/**\r\n * AdminDashboard-Komponente zur Verwaltung von Produkten und Stoffen.\r\n * @param {object} props\r\n * @param {function} props.onLogout - Callback-Funktion zum Beenden der Admin-Sitzung.\r\n */\n_c4 = AdminFabricList;\nconst AdminDashboard = ({\n  onLogout\n}) => {\n  _s3();\n  const navigate = useNavigate();\n\n  // Zustände für Produkte\n  const [products, setProducts] = useState([]);\n  const [currentProduct, setCurrentProduct] = useState(null);\n  const [isLoadingProducts, setIsLoadingProducts] = useState(false);\n\n  // Zustände für Stoffe (Fabrics)\n  const [fabrics, setFabrics] = useState([]);\n  const [isLoadingFabrics, setIsLoadingFabrics] = useState(false);\n  const [statusMessage, setStatusMessage] = useState('');\n  const [isError, setIsError] = useState(false);\n\n  // Hilfsfunktion zur Status-Anzeige\n  const showStatus = useCallback((message, isErr = false) => {\n    setStatusMessage(message);\n    setIsError(isErr);\n    setTimeout(() => setStatusMessage(''), 5000);\n  }, []);\n\n  // ---------------------------------------------------------------------\n  // DATEN ABRUFEN (PRODUCTS & FABRICS)\n  // ---------------------------------------------------------------------\n\n  // Produkte abrufen\n  const fetchProducts = useCallback(async () => {\n    setIsLoadingProducts(true);\n    const headers = getAuthHeaders();\n    if (headers.error) {\n      showStatus(headers.error, true);\n      onLogout(); // Loggt den Admin aus, falls der Token fehlt\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/products`, {\n        headers: {\n          'Authorization': headers.Authorization\n        } // Nur den Auth-Header senden\n      });\n      if (!response.ok) {\n        // Bei 401 (Unauthorized) den Logout erzwingen\n        if (response.status === 401) {\n          onLogout();\n          throw new Error('Authentifizierung fehlgeschlagen. Bitte melden Sie sich erneut an.');\n        }\n        throw new Error(`Fehler beim Laden der Produkte: ${response.statusText}`);\n      }\n      const data = await response.json();\n      setProducts(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error(\"Fehler beim Abrufen der Produkte:\", error);\n      showStatus(`Fehler beim Abrufen der Produkte: ${error.message}`, true);\n    } finally {\n      setIsLoadingProducts(false);\n    }\n  }, [showStatus, onLogout]);\n\n  // Stoffe abrufen\n  const fetchFabrics = useCallback(async () => {\n    setIsLoadingFabrics(true);\n    const headers = getAuthHeaders();\n    if (headers.error) {\n      // Keine Aktion, da die Admin-Sitzung bereits bei fetchProducts geprüft wurde, \n      // aber wir verhindern unnötige Anfragen.\n      return;\n    }\n    try {\n      const response = await fetch(`${API_URL}/fabrics`, {\n        headers: {\n          'Authorization': headers.Authorization\n        }\n      });\n      if (!response.ok) {\n        if (response.status === 401) {\n          // onLogout wurde bereits in fetchProducts aufgerufen\n          throw new Error('Authentifizierung fehlgeschlagen.');\n        }\n        throw new Error(`Fehler beim Laden der Stoffe: ${response.statusText}`);\n      }\n      const data = await response.json();\n      setFabrics(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error(\"Fehler beim Abrufen der Stoffe:\", error);\n      showStatus(`Fehler beim Abrufen der Stoffe: ${error.message}`, true);\n    } finally {\n      setIsLoadingFabrics(false);\n    }\n  }, [showStatus]);\n  useEffect(() => {\n    // Beim Laden des Dashboards beide Datensätze abrufen\n    fetchFabrics();\n    fetchProducts();\n  }, [fetchFabrics, fetchProducts]);\n\n  // ---------------------------------------------------------------------\n  // PRODUKT-OPERATIONEN\n  // ---------------------------------------------------------------------\n\n  // Produkt erstellen/aktualisieren\n  const handleProductSubmit = async formData => {\n    const headers = getAuthHeaders();\n    if (headers.error) return showStatus(headers.error, true);\n\n    // FormData für multipart/form-data erstellen (für Datei-Upload)\n    const formPayload = new FormData();\n    formPayload.append('name', formData.name);\n    formPayload.append('description', formData.description);\n    formPayload.append('price', formData.price);\n    formPayload.append('stock', formData.stock);\n    formPayload.append('isFeatured', formData.isFeatured);\n    formPayload.append('fabricId', formData.fabricId);\n\n    // Bilddatei hinzufügen, falls vorhanden\n    if (formData.imageFile) {\n      formPayload.append('imageFile', formData.imageFile);\n    }\n    const isUpdate = !!currentProduct;\n    const method = isUpdate ? 'PUT' : 'POST';\n    const url = isUpdate ? `${API_URL}/products/${currentProduct.id}` : `${API_URL}/products`;\n    try {\n      const response = await fetch(url, {\n        method: method,\n        // ACHTUNG: Bei FormData NICHT 'Content-Type: application/json' setzen. \n        // Der Browser setzt 'Content-Type: multipart/form-data' automatisch.\n        headers: {\n          'Authorization': headers.Authorization\n          // Content-Type MUSS weggelassen werden\n        },\n        body: formPayload\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({\n          message: 'Unbekannter Fehler'\n        }));\n        throw new Error(`Fehler beim ${isUpdate ? 'Aktualisieren' : 'Erstellen'}: ${errorData.message || response.statusText}`);\n      }\n      const updatedProduct = await response.json();\n\n      // Status-Feedback\n      showStatus(`Produkt erfolgreich ${isUpdate ? 'aktualisiert' : 'erstellt'}.`);\n\n      // UI aktualisieren\n      fetchProducts();\n      setCurrentProduct(null); // Bearbeitung beenden\n    } catch (error) {\n      console.error(`Produkt-Operation fehlgeschlagen:`, error);\n      showStatus(`Fehler: ${error.message}`, true);\n    }\n  };\n\n  // Bearbeitungsmodus starten\n  const handleEdit = product => {\n    setCurrentProduct(product);\n    showStatus(`Produkt '${product.name}' wird zur Bearbeitung geladen.`, false);\n  };\n\n  // Bearbeitung abbrechen\n  const handleCancelEdit = () => {\n    setCurrentProduct(null);\n    showStatus('Produktbearbeitung abgebrochen.', false);\n  };\n\n  // Produkt löschen\n  const handleDelete = async productId => {\n    if (!window.confirm(\"Sind Sie sicher, dass Sie dieses Produkt löschen möchten?\")) return;\n    const headers = getAuthHeaders();\n    if (headers.error) return showStatus(headers.error, true);\n    try {\n      const response = await fetch(`${API_URL}/products/${productId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': headers.Authorization\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Fehler beim Löschen: ${response.statusText}`);\n      }\n\n      // UI aktualisieren\n      fetchProducts();\n      showStatus('Produkt erfolgreich gelöscht.', false);\n      if (currentProduct && currentProduct.id === productId) {\n        setCurrentProduct(null); // Falls das gelöschte Produkt gerade bearbeitet wurde\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Löschen:\", error);\n      showStatus(`Fehler beim Löschen: ${error.message}`, true);\n    }\n  };\n\n  // ---------------------------------------------------------------------\n  // STOFF-OPERATIONEN\n  // ---------------------------------------------------------------------\n\n  // Stoff erstellen/aktualisieren (Derzeit nur Hinzufügen/Löschen implementiert)\n  const handleAddFabric = async formData => {\n    const headers = getAuthHeaders();\n    if (headers.error) return showStatus(headers.error, true);\n    const formPayload = new FormData();\n    formPayload.append('name', formData.name);\n    formPayload.append('description', formData.description);\n    formPayload.append('fabricType', formData.fabricType);\n    formPayload.append('stock', formData.stock);\n    // Arrays müssen als JSON-String gesendet werden, da FormData keine komplexen Arrays unterstützt\n    formPayload.append('suitableFor', JSON.stringify(formData.suitableFor));\n    if (formData.imageFile) {\n      formPayload.append('imageFile', formData.imageFile);\n    }\n    try {\n      const response = await fetch(`${API_URL}/fabrics`, {\n        method: 'POST',\n        headers: {\n          'Authorization': headers.Authorization\n        },\n        body: formPayload\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({\n          message: 'Unbekannter Fehler'\n        }));\n        throw new Error(`Fehler beim Erstellen des Stoffs: ${errorData.message || response.statusText}`);\n      }\n      showStatus('Stoff erfolgreich erstellt.');\n      fetchFabrics(); // Stoffliste aktualisieren\n      fetchProducts(); // Produktformular-Select aktualisieren\n    } catch (error) {\n      console.error(`Stoff-Operation fehlgeschlagen:`, error);\n      showStatus(`Fehler: ${error.message}`, true);\n    }\n  };\n\n  // Stoff löschen\n  const handleDeleteFabric = async fabricId => {\n    if (!window.confirm(\"WARNUNG: Sind Sie sicher, dass Sie diesen Stoff löschen möchten? Alle Produkte, die diesen Stoff verwenden, werden möglicherweise fehlerhaft angezeigt.\")) return;\n    const headers = getAuthHeaders();\n    if (headers.error) return showStatus(headers.error, true);\n    try {\n      const response = await fetch(`${API_URL}/fabrics/${fabricId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': headers.Authorization\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Fehler beim Löschen des Stoffs: ${response.statusText}`);\n      }\n      fetchFabrics(); // Stoffliste aktualisieren\n      fetchProducts(); // Produktliste aktualisieren\n      showStatus('Stoff erfolgreich gelöscht.', false);\n    } catch (error) {\n      console.error(\"Fehler beim Löschen des Stoffs:\", error);\n      showStatus(`Fehler beim Löschen des Stoffs: ${error.message}`, true);\n    }\n  };\n\n  // ---------------------------------------------------------------------\n  // RENDERING\n  // ---------------------------------------------------------------------\n\n  const dashboardContainerStyle = {\n    maxWidth: '1200px',\n    margin: '50px auto',\n    padding: '0 20px',\n    minHeight: '600px'\n  };\n  if (isLoadingProducts || isLoadingFabrics) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        padding: '50px'\n      },\n      children: \"Dashboard wird geladen...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 900,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: dashboardContainerStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '40px',\n        borderBottom: '2px solid var(--farbe-grau)',\n        paddingBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'var(--farbe-primär)',\n          margin: 0,\n          fontSize: '2.5em'\n        },\n        children: \"Admin Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 907,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px'\n        },\n        children: [statusMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '10px 15px',\n            borderRadius: '5px',\n            backgroundColor: isError ? 'var(--farbe-rot-hell)' : 'var(--farbe-akzent-hell)',\n            color: isError ? 'var(--farbe-rot)' : 'var(--farbe-akzent)',\n            fontWeight: 'bold',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          children: [isError ? /*#__PURE__*/_jsxDEV(XCircle, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 923,\n            columnNumber: 40\n          }, this) : /*#__PURE__*/_jsxDEV(CheckCircle, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 923,\n            columnNumber: 64\n          }, this), statusMessage]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 913,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLogout,\n          style: {\n            backgroundColor: 'var(--farbe-rot)',\n            color: 'white',\n            padding: '10px 15px',\n            borderRadius: '5px',\n            border: 'none',\n            cursor: 'pointer',\n            fontWeight: 'bold',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '5px',\n            transition: 'background-color 0.2s'\n          },\n          onMouseEnter: e => e.target.style.backgroundColor = '#cc0000',\n          onMouseLeave: e => e.target.style.backgroundColor = 'var(--farbe-rot)',\n          children: [/*#__PURE__*/_jsxDEV(LogOut, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 942,\n            columnNumber: 25\n          }, this), \" Logout\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 929,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 910,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 906,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: 'var(--farbe-primär)',\n        marginBottom: '30px',\n        fontSize: '1.8em'\n      },\n      children: \"Produktverwaltung\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 948,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'minmax(300px, 1fr) minmax(300px, 1.5fr)',\n        gap: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(ProductForm, {\n          productToEdit: currentProduct,\n          onSubmit: handleProductSubmit,\n          onCancel: handleCancelEdit,\n          fabrics: fabrics // WICHTIG: Stoffe für das Dropdown übergeben\n        }, currentProduct ? currentProduct.id : 'new', false, {\n          fileName: _jsxFileName,\n          lineNumber: 959,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 957,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(AdminProductList, {\n          products: products,\n          onEdit: handleEdit,\n          onDelete: handleDelete,\n          fabrics: fabrics // WICHTIG: Stoffe für die Namensauflösung übergeben\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 971,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 969,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 951,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '40px',\n        borderTop: '2px solid var(--farbe-grau)',\n        paddingTop: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'var(--farbe-primär)',\n          marginBottom: '30px',\n          fontSize: '1.8em'\n        },\n        children: \"Stoff-Inventar-Verwaltung\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 987,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FabricForm, {\n        onAdd: handleAddFabric\n        // Hier müsste die Bearbeitung von Stoffen implementiert werden, \n        // derzeit wird nur zum Hinzufügen aufgefordert.\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 992,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AdminFabricList, {\n        fabrics: fabrics,\n        onDelete: handleDeleteFabric\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 999,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 982,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 904,\n    columnNumber: 9\n  }, this);\n};\n_s3(AdminDashboard, \"FOCKNg1rufLhlPbW6KFM4MnrfCQ=\", false, function () {\n  return [useNavigate];\n});\n_c5 = AdminDashboard;\nexport default AdminDashboard;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"ProductForm\");\n$RefreshReg$(_c2, \"AdminProductList\");\n$RefreshReg$(_c3, \"FabricForm\");\n$RefreshReg$(_c4, \"AdminFabricList\");\n$RefreshReg$(_c5, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","useNavigate","LogOut","Edit","Trash2","PlusCircle","CheckCircle","XCircle","jsxDEV","_jsxDEV","API_URL","BACKEND_URL","FALLBACK_IMAGE_URL","getAuthHeaders","adminToken","localStorage","getItem","error","getImageUrl","imagePath","startsWith","getInitialProductState","productToEdit","name","description","price","stock","isFeatured","imageFile","imageUrl","fabricId","ProductForm","onSubmit","onCancel","fabrics","_s","initialState","formData","setFormData","isEditing","setIsEditing","previewImage","setPreviewImage","handleChange","e","value","type","checked","files","target","file","prev","URL","createObjectURL","parseFloat","getFinalPreviewUrl","handleSubmit","preventDefault","className","style","padding","backgroundColor","borderRadius","boxShadow","children","color","marginBottom","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","onChange","required","min","step","map","fabric","marginTop","rows","accept","src","alt","maxWidth","maxHeight","border","onError","onerror","display","alignItems","gap","width","height","margin","fontWeight","cursor","paddingTop","borderTop","onClick","_c","AdminProductList","products","onEdit","onDelete","getFabricName","find","f","length","overflowY","textAlign","product","justifyContent","borderBottom","objectFit","background","size","_c2","getInitialFabricState","stoffToEdit","fabricType","suitableFor","USAGE_OPTIONS","FABRIC_TYPES","FabricForm","onAdd","_s2","currentUsages","Array","isArray","filter","usage","parseInt","gridTemplateColumns","includes","_c3","AdminFabricList","_c4","AdminDashboard","onLogout","_s3","navigate","setProducts","currentProduct","setCurrentProduct","isLoadingProducts","setIsLoadingProducts","setFabrics","isLoadingFabrics","setIsLoadingFabrics","statusMessage","setStatusMessage","isError","setIsError","showStatus","message","isErr","setTimeout","fetchProducts","headers","response","fetch","Authorization","ok","status","Error","statusText","data","json","console","fetchFabrics","handleProductSubmit","formPayload","FormData","append","isUpdate","method","url","body","errorData","catch","updatedProduct","handleEdit","handleCancelEdit","handleDelete","productId","window","confirm","handleAddFabric","JSON","stringify","handleDeleteFabric","dashboardContainerStyle","minHeight","paddingBottom","transition","onMouseEnter","onMouseLeave","_c5","$RefreshReg$"],"sources":["C:/Users/Stefan/Desktop/henkes-stoffzauber/henkes-stoffzauber-projekt/client/src/AdminDashboard.js"],"sourcesContent":["// client/src/components/AdminDashboard.js\r\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { LogOut, Edit, Trash2, PlusCircle, CheckCircle, XCircle } from 'lucide-react'; // Lucide-Icons werden benötigt\r\n\r\nconst API_URL = 'http://localhost:3001/api';\r\nconst BACKEND_URL = 'http://localhost:3001';\r\nconst FALLBACK_IMAGE_URL = \"https://placehold.co/100x100/CCCCCC/333333?text=N/A\";\r\n\r\n// =========================================================================\r\n// HILFSFUNKTIONEN\r\n// =========================================================================\r\n\r\n/**\r\n * Ruft den Admin-Authentifizierungstoken aus dem localStorage ab.\r\n * @returns {object} Headers-Objekt oder Fehler-Objekt.\r\n */\r\nconst getAuthHeaders = () => {\r\n    const adminToken = localStorage.getItem('adminToken');\r\n    if (!adminToken) {\r\n        // Obwohl der AdminProtectedRoute dies verhindern sollte, ist dies eine zusätzliche Absicherung\r\n        return { error: 'Admin-Sitzung abgelaufen oder nicht gefunden.' };\r\n    }\r\n    return { \r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${adminToken}`,\r\n    };\r\n};\r\n\r\n/**\r\n * HILFSFUNKTION: Korrigiert Bildpfade, die vom Backend kommen.\r\n */\r\nconst getImageUrl = (imagePath) => {\r\n    if (imagePath && imagePath.startsWith('/uploads/')) {\r\n        return `${BACKEND_URL}${imagePath}`;\r\n    }\r\n    return imagePath || FALLBACK_IMAGE_URL;\r\n};\r\n\r\n// =========================================================================\r\n// BEGINN: EINGEFÜGTE KOMPONENTEN-DEFINITIONEN \r\n// Aufgrund der 1-Datei-Regel müssen die Unterkomponenten hier definiert werden, wenn sie nicht aus einer separaten Datei importiert werden.\r\n// =========================================================================\r\n\r\n// Hilfsfunktion für den initialen Zustand des Produktformulars\r\nconst getInitialProductState = (productToEdit) => productToEdit || {\r\n    name: '',\r\n    description: '',\r\n    price: 0,\r\n    stock: 0,\r\n    isFeatured: false,\r\n    imageFile: null,\r\n    imageUrl: '',\r\n    fabricId: '', \r\n};\r\n\r\n// --- Komponente: Produktformular (ProductForm) ---\r\nconst ProductForm = ({ productToEdit, onSubmit, onCancel, fabrics }) => { // FIX: fabrics prop hinzugefügt\r\n    \r\n    // useMemo behebt die ESLint-Warnung\r\n    const initialState = useMemo(() => getInitialProductState(productToEdit), [productToEdit]);\r\n    \r\n    // Zustand für das Formular\r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!productToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n\r\n    useEffect(() => {\r\n        // Setzt das Formular zurück, wenn ein neues oder kein Produkt zum Bearbeiten übergeben wird\r\n        setFormData(initialState);\r\n        setIsEditing(!!productToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, productToEdit]); // Dependency array: initialer State und Produkt\r\n\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked, files } = e.target;\r\n        \r\n        if (type === 'file') {\r\n            const file = files[0];\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                imageFile: file,\r\n                imageUrl: file ? URL.createObjectURL(file) : '', // Lokale URL für Vorschau\r\n            }));\r\n            setPreviewImage(file ? URL.createObjectURL(file) : (productToEdit ? productToEdit.imageUrl : null));\r\n        } else {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                [name]: type === 'checkbox' ? checked : (name === 'price' || name === 'stock' ? parseFloat(value) : value),\r\n            }));\r\n        }\r\n    };\r\n\r\n    const getFinalPreviewUrl = () => {\r\n        if (formData.imageFile) {\r\n            return formData.imageUrl; // Temporäre URL aus der Datei\r\n        }\r\n        if (productToEdit && productToEdit.imageUrl) {\r\n            return getImageUrl(productToEdit.imageUrl); // Backend-URL\r\n        }\r\n        return FALLBACK_IMAGE_URL; // Fallback\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onSubmit(formData); // Übergibt die Formular-Daten (inkl. imageFile) an den Dashboard-Handler\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form-container\" style={{\r\n            padding: '20px',\r\n            backgroundColor: 'var(--farbe-hell)',\r\n            borderRadius: '10px',\r\n            boxShadow: '0 4px 12px rgba(0,0,0,0.05)',\r\n        }}>\r\n            <h2 style={{ color: 'var(--farbe-akzent)', marginBottom: '20px', fontSize: '1.5em' }}>\r\n                {isEditing ? 'Produkt bearbeiten' : 'Neues Produkt erstellen'}\r\n            </h2>\r\n\r\n            {/* 1. Name & Preis */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"name\">Produktname:</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    required\r\n                />\r\n            </div>\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"price\">Preis (€):</label>\r\n                <input\r\n                    type=\"number\"\r\n                    id=\"price\"\r\n                    name=\"price\"\r\n                    value={formData.price}\r\n                    onChange={handleChange}\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            {/* 2. Lagerbestand & Stoff-ID */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"stock\">Lagerbestand (Einheiten):</label>\r\n                <input\r\n                    type=\"number\"\r\n                    id=\"stock\"\r\n                    name=\"stock\"\r\n                    value={formData.stock}\r\n                    onChange={handleChange}\r\n                    min=\"0\"\r\n                    required\r\n                />\r\n            </div>\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricId\">Zugehöriger Stoff (ID):</label>\r\n                <select\r\n                    id=\"fabricId\"\r\n                    name=\"fabricId\"\r\n                    value={formData.fabricId}\r\n                    onChange={handleChange}\r\n                    required\r\n                >\r\n                    <option value=\"\">Wählen Sie einen Stoff</option>\r\n                    {fabrics.map(fabric => (\r\n                        <option key={fabric.id} value={fabric.id}>\r\n                            {fabric.name} ({fabric.id})\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n                <p style={{ fontSize: '0.8em', color: '#666', marginTop: '5px' }}>\r\n                    *Der Stoff muss zuerst in der Stoffverwaltung angelegt werden.\r\n                </p>\r\n            </div>\r\n\r\n            {/* 3. Beschreibung */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"description\">Beschreibung:</label>\r\n                <textarea\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    rows=\"4\"\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            {/* 4. Bild-Upload */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"imageFile\">Produktbild:</label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    name=\"imageFile\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleChange}\r\n                />\r\n                \r\n                <div style={{ marginTop: '15px' }}>\r\n                    <img\r\n                        src={getFinalPreviewUrl()}\r\n                        alt=\"Vorschau\"\r\n                        style={{ maxWidth: '100px', maxHeight: '100px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                        onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"admin-form-group\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"isFeatured\"\r\n                    name=\"isFeatured\"\r\n                    checked={formData.isFeatured}\r\n                    onChange={handleChange}\r\n                    style={{ width: '20px', height: '20px' }}\r\n                />\r\n                <label htmlFor=\"isFeatured\" style={{ margin: 0, fontWeight: 'normal', cursor: 'pointer' }}>\r\n                    Als \"Featured Product\" auf der Startseite anzeigen\r\n                </label>\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\" style={{ \r\n                    backgroundColor: 'var(--farbe-akzent)', \r\n                    color: 'white', \r\n                    padding: '10px 20px', \r\n                    borderRadius: '5px',\r\n                    border: 'none',\r\n                    cursor: 'pointer'\r\n                }}>\r\n                    {isEditing ? 'Änderungen speichern' : 'Produkt erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen (Zurück zur Erstellung)\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n\r\n\r\n// --- Komponente: AdminProductList ---\r\nconst AdminProductList = ({ products, onEdit, onDelete, fabrics }) => { // fabrics prop hinzugefügt\r\n    \r\n    // Helper, um den Stoffnamen zu finden\r\n    const getFabricName = (fabricId) => {\r\n        const fabric = fabrics.find(f => f.id === fabricId);\r\n        return fabric ? fabric.name : 'Unbekannt';\r\n    };\r\n\r\n    return (\r\n        <div className=\"admin-product-list-container\" style={{ \r\n            backgroundColor: 'var(--farbe-hell)', \r\n            borderRadius: '10px', \r\n            padding: '20px', \r\n            boxShadow: '0 4px 12px rgba(0,0,0,0.05)',\r\n        }}>\r\n            <h2 style={{ color: 'var(--farbe-primär)', marginBottom: '20px', fontSize: '1.5em' }}>Produktübersicht ({products.length})</h2>\r\n            <div style={{ maxHeight: '600px', overflowY: 'auto' }}>\r\n                {products.length === 0 ? (\r\n                    <p style={{ textAlign: 'center', color: '#666' }}>Keine Produkte vorhanden. Bitte erstellen Sie zuerst ein Produkt.</p>\r\n                ) : (\r\n                    products.map(product => (\r\n                        <div key={product.id} className=\"admin-product-item\" style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'center',\r\n                            padding: '15px 0',\r\n                            borderBottom: '1px dashed #eee',\r\n                        }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                                <img \r\n                                    src={getImageUrl(product.imageUrl)} \r\n                                    alt={product.name} \r\n                                    style={{ width: '50px', height: '50px', objectFit: 'cover', borderRadius: '5px' }} \r\n                                    onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                                />\r\n                                <div>\r\n                                    <h3 style={{ margin: 0, fontSize: '1.1em', color: 'var(--farbe-text-dunkel)' }}>{product.name}</h3>\r\n                                    <p style={{ margin: '2px 0 0 0', fontSize: '0.9em', color: '#999' }}>\r\n                                        Stoff: {getFabricName(product.fabricId)} | Bestand: {product.stock}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ display: 'flex', gap: '10px' }}>\r\n                                <button onClick={() => onEdit(product)} style={{ \r\n                                    background: 'var(--farbe-akzent)', \r\n                                    color: 'white', \r\n                                    border: 'none', \r\n                                    padding: '5px 10px', \r\n                                    borderRadius: '5px', \r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '5px'\r\n                                }}>\r\n                                    <Edit size={16} /> Bearbeiten\r\n                                </button>\r\n                                <button onClick={() => onDelete(product.id)} style={{ \r\n                                    background: 'var(--farbe-rot)', \r\n                                    color: 'white', \r\n                                    border: 'none', \r\n                                    padding: '5px 10px', \r\n                                    borderRadius: '5px', \r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '5px'\r\n                                }}>\r\n                                    <Trash2 size={16} /> Löschen\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Hilfsfunktion für den initialen Zustand des Stoffformulars\r\nconst getInitialFabricState = (stoffToEdit) => stoffToEdit || {\r\n    name: '',\r\n    description: '',\r\n    fabricType: '', \r\n    suitableFor: [], \r\n    stock: 0, \r\n    imageUrl: '', \r\n    imageFile: null,\r\n};\r\n\r\n// Liste der möglichen Verwendungszwecke (zum Checkbox-Rendern)\r\nconst USAGE_OPTIONS = [\r\n    'Mütze (Außen)', 'Mütze (Innen)', 'Bündchen', 'Bekleidung (Oberteil)', \r\n    'Bekleidung (Hose)', 'Babybekleidung', 'Deko', 'Taschen', 'Accessoires'\r\n];\r\n\r\n// Liste der Stoffarten\r\nconst FABRIC_TYPES = [\r\n    'Jersey', 'French Terry (Sommersweat)', 'Sweat', 'Bündchenstoff', 'Musselin', \r\n    'Webware Baumwolle', 'Cord', 'Fleece', 'Softshell', 'Leder (Imitat/Echt)'\r\n];\r\n\r\n// --- Komponente: Stoff-Formular (FabricForm) ---\r\nconst FabricForm = ({ stoffToEdit, onAdd, onCancel }) => { \r\n    \r\n    const initialState = useMemo(() => getInitialFabricState(stoffToEdit), [stoffToEdit]);\r\n    \r\n    const [formData, setFormData] = useState(initialState);\r\n    const [isEditing, setIsEditing] = useState(!!stoffToEdit);\r\n    const [previewImage, setPreviewImage] = useState(formData.imageUrl || null);\r\n\r\n\r\n    useEffect(() => {\r\n        setFormData(initialState);\r\n        setIsEditing(!!stoffToEdit);\r\n        setPreviewImage(initialState.imageUrl || null);\r\n    }, [initialState, stoffToEdit]); \r\n    \r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked, files } = e.target;\r\n        \r\n        if (type === 'file') {\r\n            const file = files[0];\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                imageFile: file,\r\n                imageUrl: file ? URL.createObjectURL(file) : '', \r\n            }));\r\n            setPreviewImage(file ? URL.createObjectURL(file) : (stoffToEdit ? stoffToEdit.imageUrl : null));\r\n        } else if (name === 'suitableFor') {\r\n            const currentUsages = Array.isArray(formData.suitableFor) ? formData.suitableFor : [];\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                suitableFor: checked \r\n                    ? [...currentUsages, value] \r\n                    : currentUsages.filter(usage => usage !== value)\r\n            }));\r\n        } else {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                [name]: type === 'checkbox' ? checked : (name === 'stock' ? parseInt(value) || 0 : value),\r\n            }));\r\n        }\r\n    };\r\n\r\n    const getFinalPreviewUrl = () => {\r\n        if (formData.imageFile) {\r\n            return formData.imageUrl; \r\n        }\r\n        if (stoffToEdit && stoffToEdit.imageUrl) {\r\n            return getImageUrl(stoffToEdit.imageUrl); \r\n        }\r\n        return FALLBACK_IMAGE_URL; \r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onAdd(formData); \r\n        // Reset-Logik könnte hier bei erfolgreichem Hinzufügen eingefügt werden.\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"admin-form-container\" style={{\r\n            padding: '20px',\r\n            backgroundColor: 'var(--farbe-hell)',\r\n            borderRadius: '10px',\r\n            boxShadow: '0 4px 12px rgba(0,0,0,0.05)',\r\n            marginBottom: '30px'\r\n        }}>\r\n            <h2 style={{ color: 'var(--farbe-akzent)', marginBottom: '20px', fontSize: '1.5em' }}>\r\n                {isEditing ? 'Stoff bearbeiten' : 'Neuen Stoff anlegen'}\r\n            </h2>\r\n\r\n            {/* 1. Name & Art */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"name\">Stoffname (z.B. Jersey Ananas):</label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    required\r\n                />\r\n            </div>\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"fabricType\">Stoffart:</label>\r\n                <select\r\n                    id=\"fabricType\"\r\n                    name=\"fabricType\"\r\n                    value={formData.fabricType}\r\n                    onChange={handleChange}\r\n                    required\r\n                >\r\n                    <option value=\"\">Wählen Sie die Art</option>\r\n                    {FABRIC_TYPES.map(type => (\r\n                        <option key={type} value={type}>{type}</option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            {/* 2. Lagerbestand */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"stock\">Lagerbestand (Meter):</label>\r\n                <input\r\n                    type=\"number\"\r\n                    id=\"stock\"\r\n                    name=\"stock\"\r\n                    value={formData.stock}\r\n                    onChange={handleChange}\r\n                    min=\"0\"\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            {/* 3. Verwendungszwecke (Checkboxen) */}\r\n            <div className=\"admin-form-group\">\r\n                <label>Geeignet für (Mehrfachauswahl):</label>\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '10px' }}>\r\n                    {USAGE_OPTIONS.map(usage => (\r\n                        <div key={usage} style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                id={`usage-${usage}`}\r\n                                name=\"suitableFor\"\r\n                                value={usage}\r\n                                checked={formData.suitableFor && formData.suitableFor.includes(usage)}\r\n                                onChange={handleChange}\r\n                            />\r\n                            <label htmlFor={`usage-${usage}`} style={{ margin: 0, fontWeight: 'normal', cursor: 'pointer', fontSize: '0.9em' }}>\r\n                                {usage}\r\n                            </label>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* 4. Beschreibung */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"description\">Kurzbeschreibung:</label>\r\n                <textarea\r\n                    id=\"description\"\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    rows=\"2\"\r\n                />\r\n            </div>\r\n\r\n            {/* 5. Bild-Upload */}\r\n            <div className=\"admin-form-group\">\r\n                <label htmlFor=\"imageFile\">Stoffmuster Bild (optional):</label>\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"imageFile\"\r\n                    name=\"imageFile\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleChange}\r\n                />\r\n                \r\n                <div style={{ marginTop: '15px' }}>\r\n                    <img\r\n                        src={getFinalPreviewUrl()}\r\n                        alt=\"Vorschau\"\r\n                        style={{ maxWidth: '100px', maxHeight: '100px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                        onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* 6. Aktionen */}\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '10px' }}>\r\n                <button type=\"submit\" className=\"admin-form-submit-button\" style={{ \r\n                    backgroundColor: 'var(--farbe-akzent)', \r\n                    color: 'white', \r\n                    padding: '10px 20px', \r\n                    borderRadius: '5px',\r\n                    border: 'none',\r\n                    cursor: 'pointer'\r\n                }}>\r\n                    {isEditing ? 'Änderungen speichern' : 'Stoff erstellen'}\r\n                </button>\r\n            </div>\r\n            \r\n            {isEditing && (\r\n                <div style={{ marginTop: '15px', paddingTop: '15px', borderTop: '1px solid #eee' }}>\r\n                    <button type=\"button\" onClick={onCancel} className=\"admin-form-submit-button\" style={{backgroundColor: '#666'}}>\r\n                        Abbrechen (Zurück zur Erstellung)\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n\r\n// --- Komponente: AdminFabricList ---\r\nconst AdminFabricList = ({ fabrics, onDelete }) => {\r\n    return (\r\n        <div className=\"admin-fabric-list-container\" style={{ \r\n            backgroundColor: 'var(--farbe-hell)', \r\n            borderRadius: '10px', \r\n            padding: '20px', \r\n            boxShadow: '0 4px 12px rgba(0,4,0,0.05)',\r\n        }}>\r\n            <h2 style={{ color: 'var(--farbe-primär)', marginBottom: '20px', fontSize: '1.5em' }}>Stoffübersicht ({fabrics.length})</h2>\r\n            <div style={{ maxHeight: '400px', overflowY: 'auto' }}>\r\n                {fabrics.length === 0 ? (\r\n                    <p style={{ textAlign: 'center', color: '#666' }}>Momentan sind keine Stoffe im Inventar.</p>\r\n                ) : (\r\n                    fabrics.map(fabric => (\r\n                        <div key={fabric.id} className=\"admin-fabric-item\" style={{\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'center',\r\n                            padding: '15px 0',\r\n                            borderBottom: '1px dashed #eee',\r\n                        }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                                <img \r\n                                    src={getImageUrl(fabric.imageUrl)} \r\n                                    alt={fabric.name} \r\n                                    style={{ width: '50px', height: '50px', objectFit: 'cover', borderRadius: '5px' }} \r\n                                    onError={(e) => { e.target.onerror = null; e.target.src = FALLBACK_IMAGE_URL; }}\r\n                                />\r\n                                <div>\r\n                                    <h3 style={{ margin: 0, fontSize: '1.1em', color: 'var(--farbe-text-dunkel)' }}>{fabric.name}</h3>\r\n                                    <p style={{ margin: '2px 0 0 0', fontSize: '0.9em', color: '#999' }}>\r\n                                        {fabric.fabricType} | Bestand: {fabric.stock} m | ID: {fabric.id}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ display: 'flex', gap: '10px' }}>\r\n                                {/* <button onClick={() => onEdit(fabric)} style={{ background: '#ffa500', color: 'white', border: 'none', padding: '5px 10px', borderRadius: '5px', cursor: 'pointer' }}>\r\n                                    <Edit size={16} />\r\n                                </button> */}\r\n                                <button onClick={() => onDelete(fabric.id)} style={{ \r\n                                    background: 'var(--farbe-rot)', \r\n                                    color: 'white', \r\n                                    border: 'none', \r\n                                    padding: '5px 10px', \r\n                                    borderRadius: '5px', \r\n                                    cursor: 'pointer',\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '5px'\r\n                                }}>\r\n                                    <Trash2 size={16} /> Löschen\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// =========================================================================\r\n// HAUPTKOMPONENTE: AdminDashboard\r\n// =========================================================================\r\n\r\n/**\r\n * AdminDashboard-Komponente zur Verwaltung von Produkten und Stoffen.\r\n * @param {object} props\r\n * @param {function} props.onLogout - Callback-Funktion zum Beenden der Admin-Sitzung.\r\n */\r\nconst AdminDashboard = ({ onLogout }) => {\r\n    const navigate = useNavigate();\r\n\r\n    // Zustände für Produkte\r\n    const [products, setProducts] = useState([]);\r\n    const [currentProduct, setCurrentProduct] = useState(null);\r\n    const [isLoadingProducts, setIsLoadingProducts] = useState(false);\r\n    \r\n    // Zustände für Stoffe (Fabrics)\r\n    const [fabrics, setFabrics] = useState([]);\r\n    const [isLoadingFabrics, setIsLoadingFabrics] = useState(false);\r\n    \r\n    const [statusMessage, setStatusMessage] = useState('');\r\n    const [isError, setIsError] = useState(false);\r\n\r\n    // Hilfsfunktion zur Status-Anzeige\r\n    const showStatus = useCallback((message, isErr = false) => {\r\n        setStatusMessage(message);\r\n        setIsError(isErr);\r\n        setTimeout(() => setStatusMessage(''), 5000);\r\n    }, []);\r\n\r\n    // ---------------------------------------------------------------------\r\n    // DATEN ABRUFEN (PRODUCTS & FABRICS)\r\n    // ---------------------------------------------------------------------\r\n\r\n    // Produkte abrufen\r\n    const fetchProducts = useCallback(async () => {\r\n        setIsLoadingProducts(true);\r\n        const headers = getAuthHeaders();\r\n        if (headers.error) {\r\n            showStatus(headers.error, true);\r\n            onLogout(); // Loggt den Admin aus, falls der Token fehlt\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/products`, {\r\n                headers: { 'Authorization': headers.Authorization } // Nur den Auth-Header senden\r\n            });\r\n            if (!response.ok) {\r\n                // Bei 401 (Unauthorized) den Logout erzwingen\r\n                if (response.status === 401) {\r\n                    onLogout();\r\n                    throw new Error('Authentifizierung fehlgeschlagen. Bitte melden Sie sich erneut an.');\r\n                }\r\n                throw new Error(`Fehler beim Laden der Produkte: ${response.statusText}`);\r\n            }\r\n            const data = await response.json();\r\n            setProducts(Array.isArray(data) ? data : []);\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Abrufen der Produkte:\", error);\r\n            showStatus(`Fehler beim Abrufen der Produkte: ${error.message}`, true);\r\n        } finally {\r\n            setIsLoadingProducts(false);\r\n        }\r\n    }, [showStatus, onLogout]);\r\n\r\n    // Stoffe abrufen\r\n    const fetchFabrics = useCallback(async () => {\r\n        setIsLoadingFabrics(true);\r\n        const headers = getAuthHeaders();\r\n        if (headers.error) {\r\n            // Keine Aktion, da die Admin-Sitzung bereits bei fetchProducts geprüft wurde, \r\n            // aber wir verhindern unnötige Anfragen.\r\n            return; \r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/fabrics`, {\r\n                headers: { 'Authorization': headers.Authorization }\r\n            });\r\n            if (!response.ok) {\r\n                if (response.status === 401) {\r\n                    // onLogout wurde bereits in fetchProducts aufgerufen\r\n                    throw new Error('Authentifizierung fehlgeschlagen.');\r\n                }\r\n                throw new Error(`Fehler beim Laden der Stoffe: ${response.statusText}`);\r\n            }\r\n            const data = await response.json();\r\n            setFabrics(Array.isArray(data) ? data : []);\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Abrufen der Stoffe:\", error);\r\n            showStatus(`Fehler beim Abrufen der Stoffe: ${error.message}`, true);\r\n        } finally {\r\n            setIsLoadingFabrics(false);\r\n        }\r\n    }, [showStatus]);\r\n\r\n\r\n    useEffect(() => {\r\n        // Beim Laden des Dashboards beide Datensätze abrufen\r\n        fetchFabrics();\r\n        fetchProducts();\r\n    }, [fetchFabrics, fetchProducts]);\r\n\r\n    // ---------------------------------------------------------------------\r\n    // PRODUKT-OPERATIONEN\r\n    // ---------------------------------------------------------------------\r\n\r\n    // Produkt erstellen/aktualisieren\r\n    const handleProductSubmit = async (formData) => {\r\n        const headers = getAuthHeaders();\r\n        if (headers.error) return showStatus(headers.error, true);\r\n        \r\n        // FormData für multipart/form-data erstellen (für Datei-Upload)\r\n        const formPayload = new FormData();\r\n        formPayload.append('name', formData.name);\r\n        formPayload.append('description', formData.description);\r\n        formPayload.append('price', formData.price);\r\n        formPayload.append('stock', formData.stock);\r\n        formPayload.append('isFeatured', formData.isFeatured);\r\n        formPayload.append('fabricId', formData.fabricId);\r\n\r\n        // Bilddatei hinzufügen, falls vorhanden\r\n        if (formData.imageFile) {\r\n            formPayload.append('imageFile', formData.imageFile);\r\n        }\r\n        \r\n        const isUpdate = !!currentProduct;\r\n        const method = isUpdate ? 'PUT' : 'POST';\r\n        const url = isUpdate ? `${API_URL}/products/${currentProduct.id}` : `${API_URL}/products`;\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: method,\r\n                // ACHTUNG: Bei FormData NICHT 'Content-Type: application/json' setzen. \r\n                // Der Browser setzt 'Content-Type: multipart/form-data' automatisch.\r\n                headers: { \r\n                    'Authorization': headers.Authorization,\r\n                    // Content-Type MUSS weggelassen werden\r\n                },\r\n                body: formPayload,\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json().catch(() => ({ message: 'Unbekannter Fehler' }));\r\n                throw new Error(`Fehler beim ${isUpdate ? 'Aktualisieren' : 'Erstellen'}: ${errorData.message || response.statusText}`);\r\n            }\r\n\r\n            const updatedProduct = await response.json();\r\n\r\n            // Status-Feedback\r\n            showStatus(`Produkt erfolgreich ${isUpdate ? 'aktualisiert' : 'erstellt'}.`);\r\n            \r\n            // UI aktualisieren\r\n            fetchProducts();\r\n            setCurrentProduct(null); // Bearbeitung beenden\r\n        } catch (error) {\r\n            console.error(`Produkt-Operation fehlgeschlagen:`, error);\r\n            showStatus(`Fehler: ${error.message}`, true);\r\n        }\r\n    };\r\n\r\n    // Bearbeitungsmodus starten\r\n    const handleEdit = (product) => {\r\n        setCurrentProduct(product);\r\n        showStatus(`Produkt '${product.name}' wird zur Bearbeitung geladen.`, false);\r\n    };\r\n\r\n    // Bearbeitung abbrechen\r\n    const handleCancelEdit = () => {\r\n        setCurrentProduct(null);\r\n        showStatus('Produktbearbeitung abgebrochen.', false);\r\n    };\r\n\r\n    // Produkt löschen\r\n    const handleDelete = async (productId) => {\r\n        if (!window.confirm(\"Sind Sie sicher, dass Sie dieses Produkt löschen möchten?\")) return;\r\n\r\n        const headers = getAuthHeaders();\r\n        if (headers.error) return showStatus(headers.error, true);\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/products/${productId}`, {\r\n                method: 'DELETE',\r\n                headers: { 'Authorization': headers.Authorization },\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`Fehler beim Löschen: ${response.statusText}`);\r\n            }\r\n\r\n            // UI aktualisieren\r\n            fetchProducts();\r\n            showStatus('Produkt erfolgreich gelöscht.', false);\r\n            if (currentProduct && currentProduct.id === productId) {\r\n                setCurrentProduct(null); // Falls das gelöschte Produkt gerade bearbeitet wurde\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Löschen:\", error);\r\n            showStatus(`Fehler beim Löschen: ${error.message}`, true);\r\n        }\r\n    };\r\n\r\n    // ---------------------------------------------------------------------\r\n    // STOFF-OPERATIONEN\r\n    // ---------------------------------------------------------------------\r\n\r\n    // Stoff erstellen/aktualisieren (Derzeit nur Hinzufügen/Löschen implementiert)\r\n    const handleAddFabric = async (formData) => {\r\n        const headers = getAuthHeaders();\r\n        if (headers.error) return showStatus(headers.error, true);\r\n        \r\n        const formPayload = new FormData();\r\n        formPayload.append('name', formData.name);\r\n        formPayload.append('description', formData.description);\r\n        formPayload.append('fabricType', formData.fabricType);\r\n        formPayload.append('stock', formData.stock);\r\n        // Arrays müssen als JSON-String gesendet werden, da FormData keine komplexen Arrays unterstützt\r\n        formPayload.append('suitableFor', JSON.stringify(formData.suitableFor)); \r\n\r\n        if (formData.imageFile) {\r\n            formPayload.append('imageFile', formData.imageFile);\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/fabrics`, {\r\n                method: 'POST',\r\n                headers: { 'Authorization': headers.Authorization },\r\n                body: formPayload,\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json().catch(() => ({ message: 'Unbekannter Fehler' }));\r\n                throw new Error(`Fehler beim Erstellen des Stoffs: ${errorData.message || response.statusText}`);\r\n            }\r\n\r\n            showStatus('Stoff erfolgreich erstellt.');\r\n            fetchFabrics(); // Stoffliste aktualisieren\r\n            fetchProducts(); // Produktformular-Select aktualisieren\r\n        } catch (error) {\r\n            console.error(`Stoff-Operation fehlgeschlagen:`, error);\r\n            showStatus(`Fehler: ${error.message}`, true);\r\n        }\r\n    };\r\n\r\n\r\n    // Stoff löschen\r\n    const handleDeleteFabric = async (fabricId) => {\r\n        if (!window.confirm(\"WARNUNG: Sind Sie sicher, dass Sie diesen Stoff löschen möchten? Alle Produkte, die diesen Stoff verwenden, werden möglicherweise fehlerhaft angezeigt.\")) return;\r\n\r\n        const headers = getAuthHeaders();\r\n        if (headers.error) return showStatus(headers.error, true);\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/fabrics/${fabricId}`, {\r\n                method: 'DELETE',\r\n                headers: { 'Authorization': headers.Authorization },\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`Fehler beim Löschen des Stoffs: ${response.statusText}`);\r\n            }\r\n\r\n            fetchFabrics(); // Stoffliste aktualisieren\r\n            fetchProducts(); // Produktliste aktualisieren\r\n            showStatus('Stoff erfolgreich gelöscht.', false);\r\n        } catch (error) {\r\n            console.error(\"Fehler beim Löschen des Stoffs:\", error);\r\n            showStatus(`Fehler beim Löschen des Stoffs: ${error.message}`, true);\r\n        }\r\n    };\r\n\r\n\r\n    // ---------------------------------------------------------------------\r\n    // RENDERING\r\n    // ---------------------------------------------------------------------\r\n\r\n    const dashboardContainerStyle = {\r\n        maxWidth: '1200px',\r\n        margin: '50px auto',\r\n        padding: '0 20px',\r\n        minHeight: '600px',\r\n    };\r\n\r\n    if (isLoadingProducts || isLoadingFabrics) {\r\n        return <p style={{ textAlign: 'center', padding: '50px' }}>Dashboard wird geladen...</p>;\r\n    }\r\n\r\n    return (\r\n        <div style={dashboardContainerStyle}>\r\n            {/* Header und Logout */}\r\n            <header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '40px', borderBottom: '2px solid var(--farbe-grau)', paddingBottom: '20px' }}>\r\n                <h1 style={{ color: 'var(--farbe-primär)', margin: 0, fontSize: '2.5em' }}>\r\n                    Admin Dashboard\r\n                </h1>\r\n                <div style={{ display: 'flex', gap: '10px' }}>\r\n                    {/* Statusmeldung */}\r\n                    {statusMessage && (\r\n                        <div style={{\r\n                            padding: '10px 15px',\r\n                            borderRadius: '5px',\r\n                            backgroundColor: isError ? 'var(--farbe-rot-hell)' : 'var(--farbe-akzent-hell)',\r\n                            color: isError ? 'var(--farbe-rot)' : 'var(--farbe-akzent)',\r\n                            fontWeight: 'bold',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '8px',\r\n                        }}>\r\n                            {isError ? <XCircle size={20} /> : <CheckCircle size={20} />}\r\n                            {statusMessage}\r\n                        </div>\r\n                    )}\r\n                    \r\n                    {/* Logout Button */}\r\n                    <button onClick={onLogout} style={{\r\n                        backgroundColor: 'var(--farbe-rot)',\r\n                        color: 'white',\r\n                        padding: '10px 15px',\r\n                        borderRadius: '5px',\r\n                        border: 'none',\r\n                        cursor: 'pointer',\r\n                        fontWeight: 'bold',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '5px',\r\n                        transition: 'background-color 0.2s',\r\n                    }} onMouseEnter={(e) => e.target.style.backgroundColor = '#cc0000'} onMouseLeave={(e) => e.target.style.backgroundColor = 'var(--farbe-rot)'}>\r\n                        <LogOut size={20} /> Logout\r\n                    </button>\r\n                </div>\r\n            </header>\r\n            \r\n            {/* 1. Bereich: PRODUKT-VERWALTUNG (Grid) */}\r\n            <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                Produktverwaltung\r\n            </h1>\r\n            <div style={{ \r\n                display: 'grid', \r\n                gridTemplateColumns: 'minmax(300px, 1fr) minmax(300px, 1.5fr)', \r\n                gap: '30px' \r\n            }}>\r\n                {/* 1. Spalte: Produktformular */}\r\n                <div>\r\n                    {/* FIX: Sicherstellen, dass die Component-Props korrekt übergeben werden */}\r\n                    <ProductForm \r\n                        key={currentProduct ? currentProduct.id : 'new'} \r\n                        productToEdit={currentProduct}\r\n                        onSubmit={handleProductSubmit}\r\n                        onCancel={handleCancelEdit}\r\n                        fabrics={fabrics} // WICHTIG: Stoffe für das Dropdown übergeben\r\n                    />\r\n                </div>\r\n\r\n                {/* 2. Spalte: Produktliste */}\r\n                <div>\r\n                    {/* FIX: Sicherstellen, dass die Component-Props korrekt übergeben werden */}\r\n                    <AdminProductList \r\n                        products={products}\r\n                        onEdit={handleEdit}\r\n                        onDelete={handleDelete}\r\n                        fabrics={fabrics} // WICHTIG: Stoffe für die Namensauflösung übergeben\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            \r\n            {/* 2. Bereich: STOFF-VERWALTUNG (Unterhalb des Grids) */}\r\n            <div style={{ \r\n                marginTop: '40px', \r\n                borderTop: '2px solid var(--farbe-grau)', \r\n                paddingTop: '30px' \r\n            }}>\r\n                <h1 style={{ color: 'var(--farbe-primär)', marginBottom: '30px', fontSize: '1.8em' }}>\r\n                    Stoff-Inventar-Verwaltung\r\n                </h1>\r\n                \r\n                {/* Stoff-Formular */}\r\n                <FabricForm \r\n                    onAdd={handleAddFabric} \r\n                    // Hier müsste die Bearbeitung von Stoffen implementiert werden, \r\n                    // derzeit wird nur zum Hinzufügen aufgefordert.\r\n                />\r\n                \r\n                {/* Stoff-Liste */}\r\n                <AdminFabricList fabrics={fabrics} onDelete={handleDeleteFabric} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}